(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=s),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=Object(r.g)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r.e)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r.g)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.I)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.C)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.b("@firebase/database"),m=(c=1,function(){return c++}),y=function(t){var e=Object(i.H)(t),n=new i.c;n.update(e);var r=n.digest();return i.f.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.I)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.a.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=v.apply(null,t);b(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,Object(o.f)([t],Object(o.e)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));throw g.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",k="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===x||e===k)return-1;if(e===x||t===k)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.I)(e))},R=function(t){if("object"!=typeof t||null===t)return Object(i.I)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.I)(e[o]),r+=":",r+=R(t[e[o]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,s;Object(i.d)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},U=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){T('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",K="long_polling",$=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Q(t,e,n){var r;if(Object(i.d)("string"==typeof e,"typeof type must == string"),Object(i.d)("object"==typeof n,"typeof params must == object"),e===W)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,(function(t,e){o.push(t+"="+e)})),r+o.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.k)(this.counters_)},t}(),Y={},J={};function Z(t){var e=t.toString();return Y[e]||(Y[e]=new G),Y[e]}var X=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=Z(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Q(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new X(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(i.x)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new rt((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.x)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.g)(e),r=P(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.x)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.I)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.x)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(i.x)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=Z(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.x)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),Q(t,W,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.x)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.C)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=U((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.d)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.v)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function St(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ot=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.G)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,kt,At=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),jt=1e3,Nt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=jt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.x)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return At.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.I)(o)),Object(i.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.d)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.h)(t,"w")){var n=Object(i.F)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.p)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.B)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.I)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(i.I)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,a,u,c,l,h,d,f,p,g,m=this;return Object(o.d)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.d)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.e.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){T(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&T(g),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.t)(this.interruptReasons_)&&(this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return R(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.g)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.x)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.v)()?t["framework.cordova"]=1:Object(i.y)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.t)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Rt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Pt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Rt(x,t),r=new Rt(x,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Rt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Rt.MIN},e.prototype.maxPost=function(){return new Rt(k,xt)},e.prototype.makePost=function(t,e){return Object(i.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Rt(t,xt)},e.prototype.toString=function(){return".key"},e}(Pt),Mt=new Dt,Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function qt(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var Ht,zt,Wt,Kt,$t,Qt=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Gt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.h)(e,".sv"),"Priority must be a string or number.")}else Object(i.d)(t===kt||t.isEmpty(),"priority of unexpected type.");Object(i.d)(t===kt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Gt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.d)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.d)(o>=0,"Unknown leaf type: "+n),Object(i.d)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Rt.MIN},e.prototype.maxPost=function(){return new Rt(k,new Yt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Rt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Pt)),Zt=Math.log(2),Xt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Zt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Lt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Lt.BLACK):(a(h,Lt.BLACK),a(h,Lt.RED))}return o}(new Xt(t.length));return new Ut(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.d)(ee&&Jt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":ee},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.F)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(i.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.d)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Rt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var d=Object(o.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.D)(this.indexes_,(function(t,o){var s=Object(i.F)(r.indexSet_,o);if(Object(i.d)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Rt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Rt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.D)(this.indexes_,(function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Rt(e.name,r)):t})),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Gt(this.priorityNode_),this.children_.isEmpty()&&Object(i.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return $t||($t=new t(new Ut(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||$t},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?$t:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Rt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?$t:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.d)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild(Jt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Rt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Rt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Rt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Rt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Rt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Ut(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return D(t,(function(e,r){if(Object(i.h)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}})),n.updatePriority(oe(e))}var r=[],o=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Rt(t,n)))}})),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,(function(t){return t.name}),Bt);if(o){var a=te(r,Jt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Jt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Rt,{MIN:{value:new Rt(x,re.EMPTY_NODE)},MAX:{value:new Rt(k,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,kt=ie,Wt=ie,zt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.d)(!_t(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Rt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Rt(k,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Pt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Rt.MIN},e.prototype.maxPost=function(){return Rt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Rt(e,n)},e.prototype.toString=function(){return".value"},e}(Pt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.d)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.d)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return k;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return x;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(i.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,(function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))})),e.isLeafNode()||e.forEachChild(Jt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(ge(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Rt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Jt,(function(t,e){i.matches(new Rt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Rt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.d)(u.numChildren()===this.limit_,"");var c=new Rt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(ye(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(me(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function Oe(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===ce?e="$value":t.index_===Mt?e="$key":(Object(i.d)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.I)(e),t.startSet_&&(n.startAt=Object(i.I)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.I)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.I)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.I)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Te(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var Ie=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Oe(t._queryParams);this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.F)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Oe(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,(function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))})),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(s){var a=Object(o.e)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.E)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.C)(h.responseText)}catch(e){T("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&T("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(ut),xe=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function ke(){return{value:null,children:new Map}}function Ae(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,ke()),Ae(t.children.get(r),e=gt(e),n)}}function je(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){je(r,new ht(e.toString()+"/"+t),n)}))}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,o){o>0&&Object(i.h)(t.statsToReport_,e)&&(n[e]=o,r=!0)})),r&&this.server_.reportStats(n),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Pe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function De(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Me,Fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.d)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Le=function(){function t(t,e){this.source=t,this.path=e,this.type=Pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pe.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),Ue=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pe.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.d)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Be=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,o,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.e)("Should only compare child_ events.");var r=new Rt(e.childName,e.snapshotNode),o=new Rt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function ze(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return ze(new qe(e,n,r),t.serverCache)}function Ke(t,e,n,r){return ze(t.eventCache,new qe(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ge=function(){function t(t,e){void 0===e&&(Me||(Me=new Ut(j)),e=Me),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,(function(t,e){n=n.set(new ht(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(_t(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:bt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(_t(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(bt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(bt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Ye=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ge(null))},t}();function Je(t,e,n){if(_t(e))return new Ye(new Ge(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Ye(t.writeTree_.set(i,o))}var a=new Ge(n),u=t.writeTree_.setTree(e,a);return new Ye(u)}function Ze(t,e,n){var r=t;return D(n,(function(t,n){r=Je(r,bt(e,t),n)})),r}function Xe(t,e){if(_t(e))return Ye.empty();var n=t.writeTree_.setTree(e,new Ge(null));return new Ye(n)}function tn(t,e){return null!=en(t,e)}function en(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function nn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,(function(t,n){e.push(new Rt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Rt(t,n.value))})),e}function rn(t,e){if(_t(e))return t;var n=en(t,e);return new Ye(null!=n?new Ge(n):t.writeTree_.subtree(e))}function on(t){return t.writeTree_.isEmpty()}function sn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var o=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(i.d)(null!==s.value,"Priority writes must always be leaf nodes"),o=s.value):r=t(bt(e,n),s,r)})),r.getChild(e).isEmpty()||null===o||(r=r.updateChild(bt(e,".priority"),o)),r}(dt(),t.writeTree_,e)}function an(t,e){return vn(e,t)}function un(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function cn(t){return t.visible}function ln(t,e,n){for(var r=Ye.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Je(r,u=wt(n,a),s.snap):Et(a,n)&&(u=wt(a,n),r=Je(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.e)("WriteRecord should have .snap or .children");if(Et(n,a))r=Ze(r,u=wt(n,a),s.children);else if(Et(a,n))if(_t(u=wt(a,n)))r=Ze(r,dt(),s.children);else{var c=Object(i.F)(s.children,ft(u));if(c){var l=c.getChild(gt(u));r=Je(r,dt(),l)}}}}}return r}function hn(t,e,n,r,i){if(r||i){var o=rn(t.visibleWrites,e);return!i&&on(o)?n:i||null!=n||tn(o,dt())?sn(ln(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))}),e),n||re.EMPTY_NODE):null}var s=en(t.visibleWrites,e);if(null!=s)return s;var a=rn(t.visibleWrites,e);return on(a)?n:null!=n||tn(a,dt())?sn(a,n||re.EMPTY_NODE):null}function dn(t,e,n,r){return hn(t.writeTree,t.treePath,e,n,r)}function fn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=en(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=rn(t.visibleWrites,e);return n.forEachChild(Jt,(function(t,e){var n=sn(rn(o,new ht(t)),e);r=r.updateImmediateChild(t,n)})),nn(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return nn(rn(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function pn(t,e,n,r){return function(t,e,n,r,o){Object(i.d)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(tn(t.visibleWrites,s))return null;var a=rn(t.visibleWrites,s);return on(a)?o.getChild(n):sn(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e){return en(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function mn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=en(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?sn(rn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function yn(t,e){return vn(bt(t.treePath,e),t.writeTree)}function vn(t,e){return{treePath:t,writeTree:e}}var bn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),_n=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),wn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=rn(t.visibleWrites,e),c=en(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=sn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Cn(t,e,n,r,o,s){var a=e.eventCache;if(null!=gn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=fn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=dn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.d)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=pn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=gt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=pn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=mn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,o,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ft(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var f=gt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,_n,null)}var g=Ke(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return Cn(t,g,n,i,new wn(i,g,o),a)}function En(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new wn(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=gt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function On(t,e){return t.eventCache.isCompleteForChild(e)}function Tn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function In(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ge(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),h,i,o,s,a)}})),c}var xn,kn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new qe(u,s.isFullyInitialized(),i.filtersNodes()),h=new qe(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ze(h,l),this.eventGenerator_=new Be(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function An(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function jn(t){return 0===t.eventRegistrations_.length}function Nn(t,e,n){var r=[];if(n){Object(i.d)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)}))}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Rn(t,e,n,r){e.type===Pe.MERGE&&null!==e.source.queryId&&(Object(i.d)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.d)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new bn;if(n.type===Pe.OVERWRITE){var c=n;c.source.fromUser?s=En(t,e,c.path,c.snap,r,o,u):(Object(i.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=Sn(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===Pe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=bt(n,r);On(e,ft(c))&&(a=En(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=bt(n,r);On(e,ft(c))||(a=En(t,a,c,u,i,o,s))})),a}(t,e,l.path,l.children,r,o,u):(Object(i.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=In(t,e,l.path,l.children,r,o,a,u))}else if(n.type===Pe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=gn(r,n))return e;var u=new wn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=dn(r,Qe(e));else{var d=e.serverCache.getNode();Object(i.d)(d instanceof re,"serverChildren would be complete if leaf node"),h=fn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ft(n),p=mn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,gt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=dn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=gn(r,dt()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=gn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ge(null);return u.getNode().forEachChild(Mt,(function(t,e){c=c.set(new ht(t),e)})),In(t,e,n,c,i,o,a,s)}return e}var l=new Ge(null);return r.foreach((function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),In(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Pe.LISTEN_COMPLETE)throw Object(i.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Cn(t,Ke(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,_n,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.d)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.d)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Pn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Pn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Dn,Mn=function(){return function(){this.views=new Map}}();function Fn(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.d)(null!=c,"SyncTree gave us an op for an invalid query."),Rn(c,e,n,r)}var l=[];try{for(var h=Object(o.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Rn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Ln(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=dn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=fn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=ze(new qe(s,a,!1),new qe(r,i,!1));return new kn(e,u)}return o}function Vn(t){var e,n,r=[];try{for(var i=Object(o.g)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Un(t,e){var n,r,i=null;try{for(var s=Object(o.g)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||An(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function qn(t,e){return e._queryParams.loadsAllData()?zn(t):t.views.get(e._queryIdentifier)}function Bn(t,e){return null!=qn(t,e)}function Hn(t){return null!=zn(t)}function zn(t){var e,n;try{for(var r=Object(o.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Wn=1,Kn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ge(null),this.pendingWriteTree_={visibleWrites:Ye.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function $n(t,e,n,r,o){return function(t,e,n,r,o){Object(i.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?Xn(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Qn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(i.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&un(u,r.path)?o=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=ln(t.allWrites,cn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Xe(t.visibleWrites,r.path):D(r.children,(function(e){t.visibleWrites=Xe(t.visibleWrites,bt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var o=new Ge(null);return null!=r.snap?o=o.set(dt(),!0):D(r.children,(function(t){o=o.set(new ht(t),!0)})),Xn(t,new Fe(r.path,o,n))}return[]}function Gn(t,e,n){return Xn(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Yn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||Bn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Hn(t);if("default"===u)try{for(var d=Object(o.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.e)(f.value,2),m=g[0];l=l.concat(Nn(p=g[1],n,r)),jn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){s={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Nn(p,n,r)),jn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Hn(t)&&c.push(new(Object(i.d)(xn,"Reference.ts has not been loaded"),xn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex((function(t){return t._queryParams.loadsAllData()})),d=t.syncPointTree_.findOnPath(s,(function(t,e){return Hn(e)}));if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold((function(t,e,n){if(e&&Hn(e))return[zn(e)];var r=[];return e&&(r=Vn(e)),D(n,(function(t,e){r=r.concat(e)})),r}))}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=tr(t,m);t.listenProvider_.startListening(sr(y),er(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(sr(e),null):l.forEach((function(e){var n=t.queryToTagMap.get(nr(e));t.listenProvider_.stopListening(sr(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=nr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Jn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=wt(t,r);o=o||Un(e,n),s=s||Hn(e)}));var a,u=t.syncPointTree_.get(r);u?(s=s||Hn(u),o=o||Un(u,dt())):(u=new Mn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Un(e,dt());n&&(o=o.updateImmediateChild(t,n))})));var c=Bn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=nr(e);Object(i.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Wn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Ln(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,(function(t,e){r.push(ge(t,e))})),n.isFullyInitialized()&&r.push(pe(n.getNode())),Pn(t,r,n.getNode(),e)}(s,n)}(u,e,n,an(t.pendingWriteTree_,r),o,a);if(!c&&!s){var f=qn(u,e);d=d.concat(function(t,e,n){var r=e._path,o=er(t,e),s=tr(t,n),a=t.listenProvider_.startListening(sr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.d)(!Hn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!_t(t)&&e&&Hn(e))return[zn(e).query];var r=[];return e&&(r=r.concat(Vn(e).map((function(t){return t.query})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(sr(h),er(t,h))}return a}(t,e,f))}return d}function Zn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Un(n,wt(t,e));if(r)return r}));return hn(r,e,i,n,!0)}function Xn(t,e){return function t(e,n,r,i){if(_t(e.path))return function t(e,n,r,i){var o=n.get(dt());null==r&&null!=o&&(r=Un(o,dt()));var s=[];return n.children.inorderTraversal((function(n,o){var a=r?r.getImmediateChild(n):null,u=yn(i,n),c=e.operationForChild(n);c&&(s=s.concat(t(c,o,a,u)))})),o&&(s=s.concat(Fn(o,e,i,r))),s}(e,n,r,i);var o=n.get(dt());null==r&&null!=o&&(r=Un(o,dt()));var s=[],a=ft(e.path),u=e.operationForChild(a),c=n.children.get(a);if(c&&u){var l=r?r.getImmediateChild(a):null,h=yn(i,a);s=s.concat(t(u,c,l,h))}return o&&(s=s.concat(Fn(o,e,i,r))),s}(e,t.syncPointTree_,null,an(t.pendingWriteTree_,dt()))}function tr(t,e){var n=e.query,r=er(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=rr(t,n);if(r){var i=ir(r),o=i.path,s=i.queryId,a=wt(o,e);return or(t,o,new Le(De(s),a))}return[]}(t,n._path,r):function(t,e){return Xn(t,new Le({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Yn(t,n,null,i)}}}function er(t,e){var n=nr(e);return t.queryToTagMap.get(n)}function nr(t){return t._path.toString()+"$"+t._queryIdentifier}function rr(t,e){return t.tagToQueryMap.get(e)}function ir(t){var e=t.indexOf("$");return Object(i.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function or(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.d)(r,"Missing sync point for query tag that we're tracking"),Fn(r,n,an(t.pendingWriteTree_,e),null)}function sr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.d)(Dn,"Reference.ts has not been loaded"),Dn)(t._repo,t._path):t}var ar=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ur=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Zn(this.syncTree_,this.path_)},t}(),cr=function(t,e,n){return t&&"object"==typeof t?(Object(i.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?lr(t[".sv"],e,n):"object"==typeof t[".sv"]?hr(t[".sv"],e):void Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},lr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.d)(!1,"Unexpected server value: "+t)}},hr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.d)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.d)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},dr=function(t,e,n,r){return pr(e,new ur(n,t),r)},fr=function(t,e,n){return pr(t,new ar(e),n)};function pr(t,e,n){var r,i=t.getPriority().val(),o=cr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=cr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Jt,(function(t,i){var o=pr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var gr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function mr(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.F)(r.node.children,o)||{children:{},childCount:0};r=new gr(o,r,s),o=ft(n=gt(n))}return r}function yr(t){return t.node.value}function vr(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){var o=function(t){return void 0===yr(t)&&!br(t)}(r),s=Object(i.h)(e.node.children,n);o&&s?(delete e.node.children[n],e.node.childCount--,t(e)):o||s||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function br(t){return t.node.childCount>0}function _r(t,e){D(t.node.children,(function(n,r){e(new gr(n,t,r))}))}function wr(t){return new ht(null===t.parent?t.name:wr(t.parent)+"/"+t.name)}var Cr=/[\[\].#$\/\u0000-\u001F\u007F]/,Sr=/[\[\].#$\u0000-\u001F\u007F]/,Er=10485760,Or=function(t){return"string"==typeof t&&0!==t.length&&!Cr.test(t)},Tr=function(t){return"string"==typeof t&&0!==t.length&&!Sr.test(t)},Ir=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(i.h)(t,".sv")},xr=function(t,e,n,r){r&&void 0===e||kr(Object(i.m)(t,"value"),e,n)},kr=function(t,e,n){var r=n instanceof ht?new Ot(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+It(r));if("function"==typeof e)throw new Error(t+"contains a function "+It(r)+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+It(r));if("string"==typeof e&&e.length>Er/3&&Object(i.G)(e)>Er)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+It(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(D(e,(function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Or(e)))throw new Error(t+" contains an invalid key ("+e+") "+It(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.G)(e),Tt(t)}(r,e),kr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.G)(u),a.parts_.length>0&&(a.byteLength_-=1)})),o&&s)throw new Error(t+' contains ".value" child '+It(r)+" in addition to actual children.")}},Ar=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.m)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(e,(function(t,e){var r=new ht(t);if(kr(o,e,bt(n,r)),".priority"===mt(r)&&!Ir(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Or(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},jr=function(t,e,n){if(!n||void 0!==e){if(I(e))throw new Error(Object(i.m)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ir(e))throw new Error(Object(i.m)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Nr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.m)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Rr=function(t,e,n,r){if(!(r&&void 0===n||Or(n)))throw new Error(Object(i.m)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Pr=function(t,e,n,r){if(!(r&&void 0===n||Tr(n)))throw new Error(Object(i.m)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Dr=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Mr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Or(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tr(t)}(n))throw new Error(Object(i.m)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Fr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.m)(t,e)+"must be a boolean.")},Lr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Vr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||St(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ur(t,e,n){Vr(t,n),Br(t,(function(t){return St(t,e)}))}function qr(t,e,n){Vr(t,n),Br(t,(function(t){return Et(t,e)||Et(e,t)}))}function Br(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Hr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Hr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&C("event: "+n.toString()),V(r)}}}var zr="repo_interrupt",Wr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Lr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ke(),this.transactionQueueTree_=new gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Kr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function $r(t){return(e=(e={timestamp:Kr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Qr(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.D)(n,(function(t){return oe(t)}));a=function(t,e,n,r){var i=rr(t,r);if(i){var o=ir(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ge.fromObject(n);return or(t,s,new Ue(De(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=rr(t,r);if(null!=i){var o=ir(i),s=o.path,a=o.queryId,u=wt(s,e);return or(t,s,new Ve(De(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.D)(n,(function(t){return oe(t)}));a=function(t,e,n){var r=Ge.fromObject(n);return Xn(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Gn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=si(t,s)),qr(t.eventQueue_,d,a)}function Gr(t,e){Yr(t,"connected",e),!1===e&&function(t){ni(t,"onDisconnectEvents");var e=$r(t),n=ke();je(t.onDisconnect_,dt(),(function(r,i){var o=dr(r,i,t.serverSyncTree_,e);Ae(n,r,o)}));var r=[];je(n,dt(),(function(e,n){r=r.concat(Gn(t.serverSyncTree_,e,n));var i=li(t,e);si(t,i)})),t.onDisconnect_=ke(),qr(t.eventQueue_,dt(),r)}(t)}function Yr(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Gn(t.infoSyncTree_,r,i);qr(t.eventQueue_,r,o)}function Jr(t){return t.nextWriteId_++}function Zr(t,e,n,r,i){ni(t,"set",{path:e.toString(),value:n,priority:r});var o=$r(t),s=oe(n,r),a=Zn(t.serverSyncTree_,e),u=fr(s,a,o),c=Jr(t),l=$n(t.serverSyncTree_,e,u,c,!0);Vr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||T("set at "+e+" failed: "+n);var s=Qn(t.serverSyncTree_,c,!o);qr(t.eventQueue_,e,s),ri(0,i,n,r)}));var h=li(t,e);si(t,h),qr(t.eventQueue_,h,[])}function Xr(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ae(t.onDisconnect_,e,i),ri(0,r,n,o)}))}function ti(t,e,n){var r;r=".info"===ft(e._path)?Yn(t.infoSyncTree_,e,n):Yn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}function ei(t){t.persistentConnection_&&t.persistentConnection_.interrupt(zr)}function ni(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,Object(o.f)([r],Object(o.e)(e)))}function ri(t,e,n,r){e&&V((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function ii(t,e,n){return Zn(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function oi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ci(t,e),yr(e)){var n=ui(t,e);Object(i.d)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),o=ii(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,(function(r){ni(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Qn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(ci(t,mr(t.transactionQueueTree_,e)),oi(t,t.transactionQueueTree_),qr(t.eventQueue_,e,i),a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(T("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;si(t,e)}}),a)}(t,wr(e),n)}else br(e)&&_r(e,(function(e){oi(t,e)}))}function si(t,e){var n=ai(t,e),r=wr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=ii(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){kr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=$r(t),y=fr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=Jr(t),s.splice(s.indexOf(g),1),o=(o=o.concat($n(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Qn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0))}qr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(ci(t,t.transactionQueueTree_),u=0;u<r.length;u++)V(r[u]);oi(t,t.transactionQueueTree_)}}(t,ui(t,n),r),r}function ai(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===yr(r);)r=mr(r,n),n=ft(e=gt(e));return r}function ui(t,e){var n=[];return function t(e,n,r){var i=yr(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);_r(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ci(t,e){var n=yr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,vr(e,n.length>0?n:void 0)}_r(e,(function(e){ci(t,e)}))}function li(t,e){var n=wr(ai(t,e)),r=mr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){hi(t,e)})),hi(t,r),function t(e,n,r,i){r&&!i&&n(e),_r(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){hi(t,e)})),n}function hi(t,e){var n=yr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Qn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?vr(e,void 0):n.length=s+1,qr(t.eventQueue_,wr(e),o),a=0;a<r.length;a++)V(r[a])}}var di=function(t,e){var n=fi(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},fi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.g)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},pi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.I)(this.snapshot.exportVal())},t}(),gi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),mi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),yi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t,e,n,r=new i.a;return t=this._repo,e=this._path,n=r.wrapCallback((function(){})),t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(_t(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Jt,(function(t,n){Ae(e,new ht(t),n)})),t(e,n)}if(e.children.size>0){var i=ft(n);return n=gt(n),e.children.has(i)&&t(e.children.get(i),n)&&e.children.delete(i),0===e.children.size}return!0}(t.onDisconnect_,e),ri(0,n,r,i)})),r.promise},t.prototype.remove=function(){Dr("OnDisconnect.remove",this._path);var t=new i.a;return Xr(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Dr("OnDisconnect.set",this._path),xr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return Xr(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Dr("OnDisconnect.setWithPriority",this._path),xr("OnDisconnect.setWithPriority",t,this._path,!1),jr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ae(t.onDisconnect_,e,o),ri(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Dr("OnDisconnect.update",this._path),Ar("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.t)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void ri(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&D(n,(function(n,r){var i=oe(r);Ae(t.onDisconnect_,bt(e,n),i)})),ri(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),vi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ci(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Te(this._queryParams),e=R(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Te(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.n)(e))instanceof t))return!1;var n=this._repo===e._repo,r=St(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function bi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _i(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==x)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==k)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Jt){if(null!=e&&!Ir(e)||null!=n&&!Ir(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.d)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ci=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(vi),Si=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Ti(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Ti(n.ref,r),Jt))}))},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ei(t,e){return(t=Object(i.n)(t))._checkNotDeleted("ref"),void 0!==e?Ti(t._root,e):t._root}function Oi(t,e){(t=Object(i.n)(t))._checkNotDeleted("refFromURL");var n=di(e,t._repo.repoInfo_.nodeAdmin);Mr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||O("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ei(t,n.path.toString())}function Ti(t,e){var n;return null===ft((t=Object(i.n)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pr("child","path",n,!1)):Pr("child","path",e,!1),new Ci(t._repo,bt(t._path,e))}function Ii(t,e){t=Object(i.n)(t),Dr("push",t._path),xr("push",e,t._path,!0);var n,r=Kr(t._repo),o=he(r),s=Ti(t,o),a=Ti(t,o);return n=null!=e?ki(a,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function xi(t){return Dr("remove",t._path),ki(t,null)}function ki(t,e){t=Object(i.n)(t),Dr("set",t._path),xr("set",e,t._path,!1);var n=new i.a;return Zr(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Ai(t,e){t=Object(i.n)(t),Dr("setPriority",t._path),jr("setPriority",e,!1);var n=new i.a;return Zr(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function ji(t,e,n){if(Dr("setWithPriority",t._path),xr("setWithPriority",e,t._path,!1),jr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return Zr(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Ni(t,e){Ar("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ni(t,"update",{path:e.toString(),value:n});var o=!0,s=$r(t),a={};if(D(n,(function(n,r){o=!1,a[n]=dr(bt(e,n),oe(r),t.serverSyncTree_,s)})),o)C("update() called with empty data.  Don't do anything."),ri(0,r,"ok",void 0);else{var u=Jr(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ge.fromObject(n);return Xn(t,new Ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Vr(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||T("update at "+e+" failed: "+n);var s=Qn(t.serverSyncTree_,u,!o),a=s.length>0?si(t,e):e;qr(t.eventQueue_,a,s),ri(0,r,n,i)})),D(n,(function(n){var r=li(t,bt(e,n));si(t,r)})),qr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}var Ri=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new pi("value",this,new Si(t.snapshotNode,new Ci(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new gi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Pi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new gi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.d)(null!=t.childName,"Child events should have a childName.");var n=Ti(new Ci(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new pi(t.type,this,new Si(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Di(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ti(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new mi(n,o||void 0),c="value"===e?new Ri(u):new Pi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ti(t._repo,t,c)}}function Mi(t,e,n,r){return Di(t,"value",e,n,r)}function Fi(t,e,n,r){return Di(t,"child_added",e,n,r)}function Li(t,e,n,r){return Di(t,"child_changed",e,n,r)}function Vi(t,e,n,r){return Di(t,"child_moved",e,n,r)}function Ui(t,e,n,r){return Di(t,"child_removed",e,n,r)}function qi(t,e,n){var r=null,i=n?new mi(n):null;"value"===e?r=new Ri(i):e&&(r=new Pi(e,i)),ti(t._repo,t,r)}var Bi=function(){return function(){}}(),Hi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){xr("endAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vi(t._repo,t._path,e,t._orderByCalled)},e}(Bi);function zi(t,e){return Rr("endAt","key",e,!0),new Hi(t,e)}var Wi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){xr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Se(e,n,r)):i=Se(e,n,null==r?x:fe(r)),i.endBeforeSet_=!0,i);if(wi(o),_i(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vi(t._repo,t._path,o,t._orderByCalled)},e}(Bi);function Ki(t,e){return Rr("endBefore","key",e,!0),new Wi(t,e)}var $i=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){xr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vi(t._repo,t._path,e,t._orderByCalled)},e}(Bi);function Qi(t,e){return void 0===t&&(t=null),Rr("startAt","key",e,!0),new $i(t,e)}var Gi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){xr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?k:de(r)),i.startAfterSet_=!0,i);if(wi(o),_i(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vi(t._repo,t._path,o,t._orderByCalled)},e}(Bi);function Yi(t,e){return Rr("startAfter","key",e,!0),new Gi(t,e)}var Ji=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Bi);function Zi(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ji(t)}var Xi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Bi);function to(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xi(t)}var eo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Ee(t._queryParams,n);return _i(r),new vi(t._repo,t._path,r,!0)},e}(Bi);function no(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pr("orderByChild","path",t,!1),new eo(t)}var ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByKey");var e=Ee(t._queryParams,Mt);return _i(e),new vi(t._repo,t._path,e,!0)},e}(Bi);function io(){return new ro}var oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByPriority");var e=Ee(t._queryParams,Jt);return _i(e),new vi(t._repo,t._path,e,!0)},e}(Bi);function so(){return new oo}var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByValue");var e=Ee(t._queryParams,ce);return _i(e),new vi(t._repo,t._path,e,!0)},e}(Bi);function uo(){return new ao}var co=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(xr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Hi(this._value,this._key)._apply(new $i(this._value,this._key)._apply(t))},e}(Bi);function lo(t,e){return Rr("equalTo","key",e,!0),new co(t,e)}function ho(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.n)(t);try{for(var u=Object(o.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.d)(!xn,"__referenceConstructor has already been defined"),xn=t}(Ci),function(t){Object(i.d)(!Dn,"__referenceConstructor has already been defined"),Dn=t}(Ci);var fo={},po=!1;function go(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=di(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=di(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new H(H.OWNER):new B(t.name,t.options,e);Mr("Invalid Firebase Database URL",a),_t(a.path)||O("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=fo[e.name];i||(fo[e.name]=i={});var o=i[t.toURLString()];return o&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Wr(t,po,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new mo(h,t)}var mo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Z(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ie(t.repoInfo_,(function(e,n,r,i){Qr(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Gr(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.I)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,(function(e,n,r,i){Qr(t,e,n,r,i)}),(function(e){Gr(t,e)}),(function(e){!function(t,e){D(e,(function(e,n){Yr(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},o=t.repoInfo_.toString(),J[o]||(J[o]=r()),J[o]),t.infoData_=new xe,t.infoSyncTree_=new Kn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Gn(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Yr(t,"connected",!1),t.serverSyncTree_=new Kn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);qr(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ci(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,(n=fo[e=this.app.name])&&n[t.key]===t||O("Database "+e+"("+t.repoInfo_+") has already been deleted."),ei(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&O("Cannot call "+t+" on a deleted database.")},t}();function yo(t){(t=Object(i.n)(t))._checkNotDeleted("goOffline"),ei(t._repo)}function vo(t){var e;(t=Object(i.n)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(zr)}var bo={".sv":"timestamp"},_o=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function wo(t,e,n){var r;if(t=Object(i.n)(t),Dr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=Mi(t,(function(){}));return function(e,n,r,o,a,u){ni(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Si(r,new Ci(t._repo,t._path),Jt),s.resolve(new _o(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=ii(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{kr("transaction failed: Data returned ",h,c.path),c.status=0;var d=mr(e.transactionQueueTree_,n),f=yr(d)||[];f.push(c),vr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.h)(h,".priority")?(p=Object(i.F)(h,".priority"),Object(i.d)(Ir(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(Zn(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=$r(e),y=oe(h,p),v=fr(y,l,g);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=v,c.currentWriteId=Jr(e);var b=$n(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);qr(e.eventQueue_,n,b),oi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Co=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.J)("OnDisconnect.cancel",0,1,arguments.length),Object(i.K)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(i.J)("OnDisconnect.remove",0,1,arguments.length),Object(i.K)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(i.J)("OnDisconnect.set",1,2,arguments.length),Object(i.K)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(i.J)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.K)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(i.J)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.K)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},t}(),So=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.J)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Eo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.J)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.J)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.J)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.J)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.J)("DataSnapshot.child",0,1,arguments.length),e=String(e),Pr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.J)("DataSnapshot.hasChild",1,1,arguments.length),Pr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.J)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.J)("DataSnapshot.forEach",1,1,arguments.length),Object(i.K)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(i.J)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.J)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.J)("DataSnapshot.ref",0,0,arguments.length),new To(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Oo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.J)("Query.on",2,4,arguments.length),Object(i.K)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new Eo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Mi(this._delegate,c,l),n;case"child_added":return Fi(this._delegate,c,l),n;case"child_removed":return Ui(this._delegate,c,l),n;case"child_changed":return Li(this._delegate,c,l),n;case"child_moved":return Vi(this._delegate,c,l),n;default:throw new Error(Object(i.m)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.J)("Query.off",0,3,arguments.length),Nr("Query.off",t,!0),Object(i.K)("Query.off","callback",e,!0),Object(i.L)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,qi(this._delegate,t,r)}else qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=wt(t,n);r=r||Un(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Un(i,dt()):(i=new Mn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new qe(r,!0,!1):null;return $e(Ln(i,e,an(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=oe(n).withIndex(e._queryParams.getIndex()),i=Gn(t.serverSyncTree_,e._path,r);return Ur(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return ni(t,"get for query "+Object(i.I)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(i.n)(t))._repo,t).then((function(e){return new Si(e,new Ci(t._repo,t._path),t._queryParams.getIndex())}))}(this._delegate).then((function(e){return new Eo(t.database,e)}))},t.prototype.once=function(e,n,r,o){var s=this;Object(i.J)("Query.once",1,4,arguments.length),Object(i.K)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.a,c=function(t,e){var r=new Eo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Mi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Fi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ui(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Li(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Vi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.m)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.J)("Query.limitToFirst",1,1,arguments.length),new t(this.database,ho(this._delegate,Zi(e)))},t.prototype.limitToLast=function(e){return Object(i.J)("Query.limitToLast",1,1,arguments.length),new t(this.database,ho(this._delegate,to(e)))},t.prototype.orderByChild=function(e){return Object(i.J)("Query.orderByChild",1,1,arguments.length),new t(this.database,ho(this._delegate,no(e)))},t.prototype.orderByKey=function(){return Object(i.J)("Query.orderByKey",0,0,arguments.length),new t(this.database,ho(this._delegate,io()))},t.prototype.orderByPriority=function(){return Object(i.J)("Query.orderByPriority",0,0,arguments.length),new t(this.database,ho(this._delegate,so()))},t.prototype.orderByValue=function(){return Object(i.J)("Query.orderByValue",0,0,arguments.length),new t(this.database,ho(this._delegate,uo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAt",0,2,arguments.length),new t(this.database,ho(this._delegate,Qi(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAfter",0,2,arguments.length),new t(this.database,ho(this._delegate,Yi(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endAt",0,2,arguments.length),new t(this.database,ho(this._delegate,zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endBefore",0,2,arguments.length),new t(this.database,ho(this._delegate,Ki(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.J)("Query.equalTo",1,2,arguments.length),new t(this.database,ho(this._delegate,lo(e,n)))},t.prototype.toString=function(){return Object(i.J)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.J)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.J)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.K)(t,"cancel",r.cancel,!0),r.context=n,Object(i.L)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.m)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new To(this.database,new Ci(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),To=function(t){function e(e,n){var r=t.call(this,e,new vi(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.J)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.J)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ti(this._delegate,t))},e.prototype.getParent=function(){Object(i.J)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.J)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.J)("Reference.set",1,2,arguments.length),Object(i.K)("Reference.set","onComplete",e,!0);var n=ki(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(i.J)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Dr("Reference.update",this._delegate._path),Object(i.K)("Reference.update","onComplete",e,!0);var o=Ni(this._delegate,t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},e.prototype.setWithPriority=function(t,e,n){Object(i.J)("Reference.setWithPriority",2,3,arguments.length),Object(i.K)("Reference.setWithPriority","onComplete",n,!0);var r=ji(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(i.J)("Reference.remove",0,1,arguments.length),Object(i.K)("Reference.remove","onComplete",t,!0);var e=xi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.J)("Reference.transaction",1,3,arguments.length),Object(i.K)("Reference.transaction","transactionUpdate",t,!1),Object(i.K)("Reference.transaction","onComplete",e,!0),Fr("Reference.transaction","applyLocally",n,!0);var o=wo(this._delegate,t,{applyLocally:n}).then((function(t){return new So(t.committed,new Eo(r.database,t.snapshot))}));return e&&o.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),o},e.prototype.setPriority=function(t,e){Object(i.J)("Reference.setPriority",1,2,arguments.length),Object(i.K)("Reference.setPriority","onComplete",e,!0);var n=Ai(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(i.J)("Reference.push",0,2,arguments.length),Object(i.K)("Reference.push","onComplete",n,!0);var o=Ii(this._delegate,t),s=o.then((function(t){return new e(r.database,t)}));n&&s.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Dr("Reference.onDisconnect",this._delegate._path),new Co(new yi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Oo),Io=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.n)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&O("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&O('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:Object(i.i)(r.mockUserToken,t.app.options.projectId);s=new H(a)}!function(t,e,n,r){t.repoInfo_=new $(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.J)("database.ref",0,1,arguments.length),t instanceof To){var e=Oi(this._delegate,t.toString());return new To(this,e)}return e=Ei(this._delegate,t),new To(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.J)(e,1,1,arguments.length);var n=Oi(this._delegate,t);return new To(this,n)},t.prototype.goOffline=function(){return Object(i.J)("database.goOffline",0,0,arguments.length),yo(this._delegate)},t.prototype.goOnline=function(){return Object(i.J)("database.goOnline",0,0,arguments.length),vo(this._delegate)},t.ServerValue={TIMESTAMP:bo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),xo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);D(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Io(go(e,c,void 0,n,a),e),namespace:o}}}),ko=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ao=Object.freeze({__proto__:null,DataConnection:ko,RealTimeConnection:at,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:$,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){po=t}(t)}}),jo=Io.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Io(go(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:To,Query:Oo,Database:Io,DataSnapshot:Eo,enableLogging:w,INTERNAL:xo,ServerValue:jo,TEST_ACCESS:Ao}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),Object(i.x)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a}));var i="8.10.1";r.a.registerVersion("firebase",i,"app"),r.a.SDK_VERSION=i},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return xs})),n.d(e,"b",(function(){return Zd})),n.d(e,"c",(function(){return $d})),n.d(e,"d",(function(){return Wd})),n.d(e,"e",(function(){return Kd})),n.d(e,"f",(function(){return Hf})),n.d(e,"g",(function(){return Rf})),n.d(e,"h",(function(){return Ko})),n.d(e,"i",(function(){return lf})),n.d(e,"j",(function(){return Fd})),n.d(e,"k",(function(){return Nl})),n.d(e,"l",(function(){return ef})),n.d(e,"m",(function(){return Md})),n.d(e,"n",(function(){return Rl})),n.d(e,"o",(function(){return rr})),n.d(e,"p",(function(){return qh})),n.d(e,"q",(function(){return Ud})),n.d(e,"r",(function(){return nt})),n.d(e,"s",(function(){return m})),n.d(e,"t",(function(){return hs})),n.d(e,"u",(function(){return et})),n.d(e,"v",(function(){return Is})),n.d(e,"w",(function(){return Ld})),n.d(e,"x",(function(){return Zl})),n.d(e,"y",(function(){return Xl})),n.d(e,"z",(function(){return tf})),n.d(e,"A",(function(){return Hd})),n.d(e,"B",(function(){return bt})),n.d(e,"C",(function(){return Df})),n.d(e,"D",(function(){return vt})),n.d(e,"E",(function(){return xf})),n.d(e,"F",(function(){return ff})),n.d(e,"G",(function(){return y})),n.d(e,"H",(function(){return Vd})),n.d(e,"I",(function(){return Jd})),n.d(e,"J",(function(){return Yd})),n.d(e,"K",(function(){return Fl})),n.d(e,"L",(function(){return Dl})),n.d(e,"M",(function(){return Ml})),n.d(e,"N",(function(){return Vl})),n.d(e,"O",(function(){return $r})),n.d(e,"P",(function(){return b})),n.d(e,"Q",(function(){return Lf})),n.d(e,"R",(function(){return rh})),n.d(e,"S",(function(){return wf})),n.d(e,"T",(function(){return Qo})),n.d(e,"U",(function(){return ql})),n.d(e,"V",(function(){return Ul})),n.d(e,"W",(function(){return oh})),n.d(e,"X",(function(){return At})),n.d(e,"Y",(function(){return kf})),n.d(e,"Z",(function(){return wr})),n.d(e,"ab",(function(){return L})),n.d(e,"bb",(function(){return _r})),n.d(e,"cb",(function(){return qf})),n.d(e,"db",(function(){return Ef})),n.d(e,"eb",(function(){return Xd})),n.d(e,"fb",(function(){return fs})),n.d(e,"gb",(function(){return Oc})),n.d(e,"hb",(function(){return Wr})),n.d(e,"ib",(function(){return Ir})),n.d(e,"jb",(function(){return hr})),n.d(e,"kb",(function(){return fr})),n.d(e,"lb",(function(){return yr})),n.d(e,"mb",(function(){return gr})),n.d(e,"nb",(function(){return pr})),n.d(e,"ob",(function(){return mr})),n.d(e,"pb",(function(){return wc})),n.d(e,"qb",(function(){return Uf})),n.d(e,"rb",(function(){return Cc})),n.d(e,"sb",(function(){return Sc})),n.d(e,"tb",(function(){return dr})),n.d(e,"ub",(function(){return W})),n.d(e,"vb",(function(){return Ks})),n.d(e,"wb",(function(){return Pa})),n.d(e,"xb",(function(){return Ra})),n.d(e,"yb",(function(){return _c})),n.d(e,"zb",(function(){return fh})),n.d(e,"Ab",(function(){return we})),n.d(e,"Bb",(function(){return D})),n.d(e,"Cb",(function(){return lr})),n.d(e,"Db",(function(){return Ds})),n.d(e,"Eb",(function(){return fe})),n.d(e,"Fb",(function(){return kl})),n.d(e,"Gb",(function(){return bi})),n.d(e,"Hb",(function(){return ta})),n.d(e,"Ib",(function(){return vu})),n.d(e,"Jb",(function(){return gu})),n.d(e,"Kb",(function(){return nd})),n.d(e,"Lb",(function(){return Pt})),n.d(e,"Mb",(function(){return Bt})),n.d(e,"Nb",(function(){return O})),n.d(e,"Ob",(function(){return T})),n.d(e,"Pb",(function(){return Vt})),n.d(e,"Qb",(function(){return Ht})),n.d(e,"Rb",(function(){return wa})),n.d(e,"Sb",(function(){return xa})),n.d(e,"Tb",(function(){return Ia})),n.d(e,"Ub",(function(){return Ta})),n.d(e,"Vb",(function(){return Na})),n.d(e,"Wb",(function(){return Xn})),n.d(e,"Xb",(function(){return gc})),n.d(e,"Yb",(function(){return dt})),n.d(e,"Zb",(function(){return Ca})),n.d(e,"ac",(function(){return ld})),n.d(e,"bc",(function(){return Da})),n.d(e,"cc",(function(){return od})),n.d(e,"dc",(function(){return Ua})),n.d(e,"ec",(function(){return Rh})),n.d(e,"fc",(function(){return Ph})),n.d(e,"gc",(function(){return Wa})),n.d(e,"hc",(function(){return Ba})),n.d(e,"ic",(function(){return Ea})),n.d(e,"jc",(function(){return Zh})),n.d(e,"kc",(function(){return ae})),n.d(e,"lc",(function(){return He})),n.d(e,"mc",(function(){return Yr})),n.d(e,"nc",(function(){return Ut})),n.d(e,"oc",(function(){return ba})),n.d(e,"pc",(function(){return ju})),n.d(e,"qc",(function(){return Nu})),n.d(e,"rc",(function(){return td}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__annotations__",l="__parameters__",h="__prop__metadata__";function d(t,e,n,r,i){return u(()=>{const o=f(e);function s(...t){if(this instanceof s)return o.call(this,...t),this;const e=new s(...t);return function(n){return i&&i(n,...t),(n.hasOwnProperty(c)?n[c]:Object.defineProperty(n,c,{value:[]})[c]).push(e),r&&r(n),n}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}function f(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}function p(t,e,n){return u(()=>{const r=f(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(l)?t[l]:Object.defineProperty(t,l,{value:[]})[l];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function g(t,e,n,r){return u(()=>{const i=f(e);function o(...t){if(this instanceof o)return i.apply(this,t),this;const e=new o(...t);return function(n,i){const o=n.constructor,s=o.hasOwnProperty(h)?o[h]:Object.defineProperty(o,h,{value:{}})[h];s[i]=s.hasOwnProperty(i)&&s[i]||[],s[i].unshift(e),r&&r(n,i,...t)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}const m=p("Inject",t=>({token:t})),y=p("Optional"),v=p("Self"),b=p("SkipSelf"),_=p("Host"),w=p("Attribute",t=>({attributeName:t}));var C=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function S(t){for(let e in t)if(t[e]===S)return e;throw Error("Could not find renamed property on target object.")}function E(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function I(t){return x(t,t[A])||x(t,t[R])}function x(t,e){return e&&e.token===t?e:null}function k(t){return t&&(t.hasOwnProperty(j)||t.hasOwnProperty(P))?t[j]:null}const A=S({"\u0275prov":S}),j=S({"\u0275inj":S}),N=S({"\u0275provFallback":S}),R=S({ngInjectableDef:S}),P=S({ngInjectorDef:S});function D(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(D).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function M(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const F=S({__forward_ref__:S});function L(t){return t.__forward_ref__=L,t.toString=function(){return D(this())},t}function V(t){return U(t)?t():t}function U(t){return"function"==typeof t&&t.hasOwnProperty(F)&&t.__forward_ref__===L}const q="undefined"!=typeof globalThis&&globalThis,B="undefined"!=typeof window&&window,H="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,z="undefined"!=typeof global&&global,W=q||z||B||H;var K=function(t){return t[t.Token=0]="Token",t[t.Attribute=1]="Attribute",t[t.ChangeDetectorRef=2]="ChangeDetectorRef",t[t.Invalid=3]="Invalid",t}({});function $(){const t=W.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}const Q=S({"\u0275cmp":S}),G=S({"\u0275dir":S}),Y=S({"\u0275pipe":S}),J=S({"\u0275mod":S}),Z=S({"\u0275loc":S}),X=S({"\u0275fac":S}),tt=S({__NG_ELEMENT_ID__:S});class et{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const nt=new et("INJECTOR",-1),rt={},it=/\n/gm,ot="__source",st=S({provide:String,useValue:S});let at,ut=void 0;function ct(t){const e=ut;return ut=t,e}function lt(t){const e=at;return at=t,e}function ht(t,e=C.Default){if(void 0===ut)throw new Error("inject() must be called from an injection context");return null===ut?pt(t,void 0,e):ut.get(t,e&C.Optional?null:void 0,e)}function dt(t,e=C.Default){return(at||ht)(V(t),e)}function ft(t){throw new Error("invalid")}function pt(t,e,n){const r=I(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&C.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${D(t)}]`)}function gt(t){const e=[];for(let n=0;n<t.length;n++){const r=V(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=C.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof y||"Optional"===i.ngMetadataName||i===y?n|=C.Optional:i instanceof b||"SkipSelf"===i.ngMetadataName||i===b?n|=C.SkipSelf:i instanceof v||"Self"===i.ngMetadataName||i===v?n|=C.Self:t=i instanceof m||i===m?i.token:i}e.push(dt(t,n))}else e.push(dt(r))}return e}class mt{get(t,e=rt){if(e===rt){const e=new Error(`NullInjectorError: No provider for ${D(t)}!`);throw e.name="NullInjectorError",e}return e}}const yt={"\u0275\u0275defineInjectable":O,"\u0275\u0275defineInjector":T,"\u0275\u0275inject":dt,"\u0275\u0275getFactoryOf":function t(e){const n=e;if(U(e))return()=>{const e=t(V(n));return e?e():null};const r=I(n)||k(n);return r&&void 0!==r.factory?r.factory:null},"\u0275\u0275invalidFactoryDep":ft};class vt{}class bt{}function _t(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}function wt(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),wt(r,e)):e!==t&&e.push(r)}return e}function Ct(t,e){t.forEach(t=>Array.isArray(t)?Ct(t,e):e(t))}function St(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Et(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ot(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function Tt(t,e,n){let r=xt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function It(t,e){const n=xt(t,e);if(n>=0)return t[1|n]}function xt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var kt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),At=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const jt={},Nt=[];let Rt=0;function Pt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||At.Emulated,id:"c",styles:t.styles||Nt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Rt++,n.inputs=qt(t.inputs,e),n.outputs=qt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Mt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ft):null,n})}function Dt(t,e,n){const r=t.\u0275cmp;r.directiveDefs=()=>e.map(Mt),r.pipeDefs=()=>n.map(Ft)}function Mt(t){return zt(t)||Wt(t)}function Ft(t){return Kt(t)}const Lt={};function Vt(t){const e={type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{Lt[t.id]=t.type}),e}function Ut(t,e){return u(()=>{const n=Qt(t,!0);n.declarations=e.declarations||Nt,n.imports=e.imports||Nt,n.exports=e.exports||Nt})}function qt(t,e){if(null==t)return jt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Bt=Pt;function Ht(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function zt(t){return t[Q]||null}function Wt(t){return t[G]||null}function Kt(t){return t[Y]||null}function $t(t,e){return t.hasOwnProperty(X)?t[X]:null}function Qt(t,e){const n=t[J]||null;if(!n&&!0===e)throw new Error(`Type ${D(t)} does not have '\u0275mod' property.`);return n}const Gt=20,Yt=10;function Jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Zt(t){return Array.isArray(t)&&!0===t[1]}function Xt(t){return 0!=(8&t.flags)}function te(t){return 2==(2&t.flags)}function ee(t){return 1==(1&t.flags)}function ne(t){return null!==t.template}function re(t){return 0!=(512&t[2])}function ie(t){return"string"==typeof t?t:null==t?"":""+t}function oe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ie(t)}const se=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(W))();function ae(t){return{name:"window",target:t.ownerDocument.defaultView}}function ue(t){return{name:"document",target:t.ownerDocument}}function ce(t){return{name:"body",target:t.ownerDocument.body}}function le(t){return t instanceof Function?t():t}function he(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${oe(t)} found${n}`)}class de{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function fe(){return pe}function pe(t){return t.type.prototype.ngOnChanges&&(t.setInput=me),ge}function ge(){const t=ye(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===jt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function me(t,e,n,r){const i=ye(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:jt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new de(u&&u.currentValue,e,s===jt),t[r]=e}function ye(t){return t.__ngSimpleChanges__||null}fe.ngInherit=!0;const ve="http://www.w3.org/2000/svg",be="http://www.w3.org/1998/MathML/";let _e=void 0;function we(t){_e=t}function Ce(){return void 0!==_e?_e:"undefined"!=typeof document?document:void 0}function Se(t){return!!t.listen}const Ee={createRenderer:(t,e)=>Ce()};function Oe(t){for(;Array.isArray(t);)t=t[0];return t}function Te(t,e){return Oe(e[t+Gt])}function Ie(t,e){return Oe(e[t.index])}function xe(t,e){return t.data[e+Gt]}function ke(t,e){return t[e+Gt]}function Ae(t,e){const n=e[t];return Jt(n)?n:n[0]}function je(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ne(t){return 4==(4&t[2])}function Re(t){return 128==(128&t[2])}function Pe(t,e){return null===t||null==e?null:t[e]}function De(t){t[18]=0}function Me(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Fe={lFrame:ln(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Le(){return Fe.bindingsEnabled}function Ve(){Fe.bindingsEnabled=!0}function Ue(){Fe.bindingsEnabled=!1}function qe(){return Fe.lFrame.lView}function Be(){return Fe.lFrame.tView}function He(t){Fe.lFrame.contextLView=t}function ze(){return Fe.lFrame.currentTNode}function We(t,e){Fe.lFrame.currentTNode=t,Fe.lFrame.isParent=e}function Ke(){return Fe.lFrame.isParent}function $e(){Fe.lFrame.isParent=!1}function Qe(){return Fe.isInCheckNoChangesMode}function Ge(t){Fe.isInCheckNoChangesMode=t}function Ye(){const t=Fe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Je(){return Fe.lFrame.bindingIndex}function Ze(t){return Fe.lFrame.bindingIndex=t}function Xe(){return Fe.lFrame.bindingIndex++}function tn(t){const e=Fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function en(t,e){const n=Fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,nn(e)}function nn(t){Fe.lFrame.currentDirectiveIndex=t}function rn(t){const e=Fe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function on(){return Fe.lFrame.currentQueryIndex}function sn(t){Fe.lFrame.currentQueryIndex=t}function an(t,e){const n=cn();Fe.lFrame=n,n.currentTNode=e,n.lView=t}function un(t){const e=cn(),n=t[1];Fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function cn(){const t=Fe.lFrame,e=null===t?null:t.child;return null===e?ln(t):e}function ln(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function hn(){const t=Fe.lFrame;return Fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const dn=hn;function fn(){const t=hn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pn(){return Fe.lFrame.selectedIndex}function gn(t){Fe.lFrame.selectedIndex=t}function mn(){const t=Fe.lFrame;return xe(t.tView,t.selectedIndex)}function yn(){Fe.lFrame.currentNamespace=ve}function vn(){Fe.lFrame.currentNamespace=be}function bn(){Fe.lFrame.currentNamespace=null}function _n(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function wn(t,e,n){En(t,e,3,n)}function Cn(t,e,n,r){(3&t[2])===n&&En(t,e,n,r)}function Sn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function En(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(On(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function On(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Tn=-1;class In{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function xn(t,e,n){const r=Se(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];An(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function kn(t){return 3===t||4===t||6===t}function An(t){return 64===t.charCodeAt(0)}function jn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Nn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Nn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Rn(t){return t!==Tn}function Pn(t){return 32767&t}function Dn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Mn=!0;function Fn(t){const e=Mn;return Mn=t,e}let Ln=0;function Vn(t,e){const n=qn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Un(r.data,t),Un(e,null),Un(r.blueprint,null));const i=Bn(t,e),o=t.injectorIndex;if(Rn(i)){const t=Pn(i),n=Dn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Un(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Bn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Tn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Tn}function Hn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(tt)&&(r=n[tt]),null==r&&(r=n[tt]=Ln++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function zn(t,e,n,r=C.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(tt)?t[tt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){an(e,t);try{const t=i();if(null!=t||r&C.Optional)return t;he(n)}finally{dn()}}else if("number"==typeof i){if(-1===i)return new Jn(t,e);let o=null,s=qn(t,e),a=Tn,u=r&C.Host?e[16][6]:null;for((-1===s||r&C.SkipSelf)&&(a=-1===s?Bn(t,e):e[s+8],a!==Tn&&Yn(r,!1)?(o=e[1],s=Pn(a),e=Dn(a,e)):s=-1);-1!==s;){const t=e[1];if(Gn(i,s,t.data)){const t=Kn(s,e,n,o,r,u);if(t!==Wn)return t}a=e[s+8],a!==Tn&&Yn(r,e[1].data[s+8]===u)&&Gn(i,s,e)?(o=t,s=Pn(a),e=Dn(a,e)):s=-1}}}if(r&C.Optional&&void 0===i&&(i=null),0==(r&(C.Self|C.Host))){const t=e[9],o=lt(void 0);try{return t?t.get(n,i,r&C.Optional):pt(n,i,r&C.Optional)}finally{lt(o)}}if(r&C.Optional)return i;he(n,"NodeInjector")}const Wn={};function Kn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=$n(a,s,n,null==r?te(a)&&Mn:r!=s&&2===a.type,i&C.Host&&o===a);return null!==u?Qn(e,s,u,a):Wn}function $n(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ne(t)&&t.type===n)return u}return null}function Qn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof In){const s=i;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(oe(o[n]));const a=Fn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?lt(s.injectImpl):null;an(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=pe(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&lt(u),Fn(a),s.resolving=!1,dn()}}return i}function Gn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Yn(t,e){return!(t&C.Self||t&C.Host&&e)}class Jn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return zn(this._tNode,this._lView,t,void 0,e)}}function Zn(t){const e=t;if(U(t))return()=>{const t=Zn(V(e));return t?t():null};let n=$t(e);if(null===n){const t=k(e);n=t&&t.factory}return n||null}function Xn(t){return u(()=>{const e=t.prototype.constructor,n=e[X]||Zn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||Zn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function tr(t){return t.ngDebugContext}function er(t){return t.ngOriginalError}function nr(t,...e){t.error(...e)}class rr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||nr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?tr(t)?tr(t):this._findContext(er(t)):null}_findOriginalError(t){let e=er(t);for(;e&&er(e);)e=er(e);return e}}class ir{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class or extends ir{getTypeName(){return"HTML"}}class sr extends ir{getTypeName(){return"Style"}}class ar extends ir{getTypeName(){return"Script"}}class ur extends ir{getTypeName(){return"URL"}}class cr extends ir{getTypeName(){return"ResourceURL"}}function lr(t){return t instanceof ir?t.changingThisBreaksApplicationSecurity:t}function hr(t,e){const n=dr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function dr(t){return t instanceof ir&&t.getTypeName()||null}function fr(t){return new or(t)}function pr(t){return new sr(t)}function gr(t){return new ar(t)}function mr(t){return new ur(t)}function yr(t){return new cr(t)}let vr=!0,br=!1;function _r(){return br=!0,vr}function wr(){if(br)throw new Error("Cannot enable prod mode after platform setup.");vr=!1}function Cr(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Sr:new Er(t)}class Sr{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Er{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Or=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ir(t){return(t=String(t)).match(Or)||t.match(Tr)?t:(_r()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function xr(t){return(t=String(t)).split(",").map(t=>Ir(t.trim())).join(", ")}function kr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ar(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const jr=kr("area,br,col,hr,img,wbr"),Nr=kr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Rr=kr("rp,rt"),Pr=Ar(Rr,Nr),Dr=Ar(jr,Ar(Nr,kr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ar(Rr,kr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pr),Mr=kr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fr=kr("srcset"),Lr=Ar(Mr,Fr,kr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vr=kr("script,style,template");class Ur{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Dr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Vr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!Lr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;Mr[i]&&(o=Ir(o)),Fr[i]&&(o=xr(o)),this.buf.push(" ",e,'="',Hr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Dr.hasOwnProperty(e)&&!jr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Hr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const qr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Br=/([^\#-~ |!])/g;function Hr(t){return t.replace(/&/g,"&amp;").replace(qr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Br,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zr;function Wr(t,e){let n=null;try{zr=zr||Cr(t);let r=e?String(e):"";n=zr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=zr.getInertBodyElement(r)}while(r!==o);const s=new Ur,a=s.sanitizeChildren(Kr(n)||n);return _r()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Kr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Kr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var $r=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Qr(t){const e=ti();return e?e.sanitize($r.HTML,t)||"":hr(t,"HTML")?lr(t):Wr(Ce(),ie(t))}function Gr(t){const e=ti();return e?e.sanitize($r.STYLE,t)||"":hr(t,"Style")?lr(t):ie(t)}function Yr(t){const e=ti();return e?e.sanitize($r.URL,t)||"":hr(t,"URL")?lr(t):Ir(ie(t))}function Jr(t){const e=ti();if(e)return e.sanitize($r.RESOURCE_URL,t)||"";if(hr(t,"ResourceURL"))return lr(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}function Zr(t){const e=ti();if(e)return e.sanitize($r.SCRIPT,t)||"";if(hr(t,"Script"))return lr(t);throw new Error("unsafe value used in a script context")}function Xr(t,e,n){return function(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Jr:Yr}(e,n)(t)}function ti(){const t=qe();return t&&t[12]}function ei(t,e){t.__ngContext__=e}function ni(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ri="ng-template";function ii(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ni(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function oi(t){return 0===t.type&&t.tagName!==ri}function si(t,e,n){return e===(0!==t.type||n?t.tagName:ri)}function ai(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(kn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!si(t,u,n)||""===u&&1===e.length){if(ui(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ii(t.attrs,c,n)){if(ui(r))return!1;s=!0}continue}const l=ci(8&r?"class":u,i,oi(t),n);if(-1===l){if(ui(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ni(e,c,0)||2&r&&c!==t){if(ui(r))return!1;s=!0}}}}else{if(!s&&!ui(r)&&!ui(u))return!1;if(s&&ui(u))continue;s=!1,r=u|1&r}}return ui(r)||s}function ui(t){return 0==(1&t)}function ci(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function li(t,e,n=!1){for(let r=0;r<e.length;r++)if(ai(t,e[r],n))return!0;return!1}function hi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function di(t,e){return t?":not("+e.trim()+")":e}function fi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ui(s)||(e+=di(o,i),i=""),r=s,o=o||!ui(r);n++}return""!==i&&(e+=di(o,i)),e}const pi={};function gi(t){const e=t[3];return Zt(e)?e[3]:e}function mi(t){return vi(t[13])}function yi(t){return vi(t[4])}function vi(t){for(;null!==t&&!Zt(t);)t=t[4];return t}function bi(t){_i(Be(),qe(),pn()+t,Qe())}function _i(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&wn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Cn(e,r,0,n)}gn(n)}function wi(t,e){return t<<17|e<<2}function Ci(t){return t>>17&32767}function Si(t){return 2|t}function Ei(t){return(131068&t)>>2}function Oi(t,e){return-131069&t|e<<2}function Ti(t){return 1|t}function Ii(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];sn(i),n.contentQueries(2,e[o],o)}}}function xi(t,e,n){return Se(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ki(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,De(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ai(t,e,n,r,i){const o=e+Gt,s=t.data[o]||function(t,e,n,r,i){const o=ze(),s=Ke(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return We(s,!0),s}function ji(t,e,n){un(e);try{const r=t.viewQuery;null!==r&&co(1,r,n);const i=t.template;null!==i&&Pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ii(t,e),t.staticViewQueries&&co(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)io(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,fn()}}function Ni(t,e,n,r){const i=e[2];if(256==(256&i))return;un(e);const o=Qe();try{De(e),Ze(t.bindingStartIndex),null!==n&&Pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&wn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Cn(e,n,0,null),Sn(e,0)}if(function(t){for(let e=mi(t);null!==e;e=yi(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Me(r,1),n[2]|=1024}}}(e),function(t){for(let e=mi(t);null!==e;e=yi(e))for(let t=Yt;t<e.length;t++){const n=e[t],r=n[1];Re(n)&&Ni(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ii(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&wn(e,n)}else{const n=t.contentHooks;null!==n&&Cn(e,n,1),Sn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,gn(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(en(r,i),s(2,e[i])),i++)}}}finally{gn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ro(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&co(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&wn(e,n)}else{const n=t.viewHooks;null!==n&&Cn(e,n,2),Sn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Me(e[3],-1))}finally{fn()}}function Ri(t,e,n,r){const i=e[10],o=!Qe(),s=Ne(e);try{o&&!s&&i.begin&&i.begin(),s&&ji(t,e,r),Ni(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Pi(t,e,n,r,i){const o=pn();try{gn(-1),2&r&&e.length>Gt&&_i(t,e,0,Qe()),n(r,i)}finally{gn(o)}}function Di(t,e,n){if(Xt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Mi(t,e,n){Le()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Vn(n,e),ei(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ne(r);o&&Zi(e,n,r);const u=Qn(e,t,a,n);ei(u,e),null!==s&&to(0,a-i,u,r,0,s),o&&(Ae(n.index,e)[8]=u)}}(t,e,n,Ie(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Gt,u=Fe.lFrame.currentDirectiveIndex;try{gn(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];nn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Ki(r,i):s&&o.push(null)}}finally{gn(-1),nn(u)}}(t,e,n))}function Fi(t,e,n=Ie){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Li(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Vi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Vi(t,e,n,r,i,o,s,a,u,c){const l=Gt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:pi);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ui(t,e,n,r){const i=ho(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function qi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Bi(t,e,n,r,i,o,s,a){const u=Ie(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(go(t,n,c,r,i),te(e)&&function(t,e){const n=Ae(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,Se(o)?o.setProperty(u,r,i):An(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Hi(t,e,n,r){let i=!1;if(Le()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];li(n,s.selectors,!1)&&(i||(i=[]),Hn(Vn(n,e),t,s.type),ne(s)?(Qi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,Yi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}$i(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=jn(n.mergedAttrs,c.hostAttrs),Ji(t,e,c),Gi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Gt),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Gt),u=!0),zi(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||oi(e)?null:eo(n,i);o.push(c),s=qi(n,u,s),a=qi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Wi(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=jn(n.mergedAttrs,n.attrs),i}function zi(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Wi(t,e,n){for(let r=0;r<n;r++)e.push(pi),t.blueprint.push(pi),t.data.push(null)}function Ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function $i(t,e,n){const r=Gt-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Qi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Gi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ne(e)&&(n[""]=t)}}function Yi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ji(t,e,n){t.data.push(n);const r=n.factory||(n.factory=$t(n.type)),i=new In(r,ne(n),null);t.blueprint.push(i),e.push(i)}function Zi(t,e,n){const r=Ie(e,t),i=Li(n),o=t[10],s=oo(t,ki(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Xi(t,e,n,r,i,o){const s=Ie(t,e),a=e[11];if(null==r)Se(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?ie(r):i(r,t.tagName||"",n);Se(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}function to(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function eo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function no(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ro(t,e){const n=Ae(e,t);if(Re(n)){const t=n[1];80&n[2]?Ni(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=mi(e);null!==r;r=yi(r))for(let e=Yt;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Ni(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ae(n[r],e);Re(i)&&i[5]>0&&t(i)}}(n)}}function io(t,e){const n=Ae(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ji(r,n,n[8])}function oo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function so(t){for(;t;){t[2]|=64;const e=gi(t);if(re(t)&&!e)return t;t=e}return null}function ao(t,e,n){const r=e[10];r.begin&&r.begin();try{Ni(t,e,t.template,n)}catch(i){throw po(e,i),i}finally{r.end&&r.end()}}function uo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=je(n),i=r[1];Ri(i,r,i.template,n)}}(t[8])}function co(t,e,n){sn(0),e(t,n)}const lo=(()=>Promise.resolve(null))();function ho(t){return t[7]||(t[7]=[])}function fo(t,e,n){return(null===t||ne(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function po(t,e){const n=t[9],r=n?n.get(rr,null):null;r&&r.handleError(e)}function go(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function mo(t,e,n){const r=Te(e,t),i=t[11];Se(i)?i.setValue(r,n):r.textContent=n}function yo(t,e,n,r,i){if(null!=r){let o,s=!1;Zt(r)?o=r:Jt(r)&&(s=!0,r=r[0]);const a=Oe(r);0===t&&null!==n?null==i?Oo(e,n,a):Eo(e,n,a,i||null):1===t&&null!==n?Eo(e,n,a,i||null):2===t?Ao(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Oe(n)&&yo(e,t,r,o,i);for(let s=Yt;s<n.length;s++){const i=n[s];No(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function vo(t,e){return Se(e)?e.createText(t):e.createTextNode(t)}function bo(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Me(i,-1)),n.splice(r,1)}function _o(t,e){if(t.length<=Yt)return;const n=Yt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&bo(o,r),e>0&&(t[n-1][4]=r[4]);const s=Et(t,Yt+e);No(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function wo(t,e){if(!(256&e[2])){const n=e[11];Se(n)&&n.destroyNode&&No(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Co(t[1],t);for(;e;){let n=null;if(Jt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Jt(e)&&Co(e[1],e),e=e[3];null===e&&(e=t),Jt(e)&&Co(e[1],e),n=e&&e[4]}e=n}}(e)}}function Co(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof In)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Oe(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Se(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Zt(e[3])){n!==e[3]&&bo(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function So(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return Ie(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==At.ShadowDom&&n!==At.Native)return null}return Ie(r,n)}function Eo(t,e,n,r){Se(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Oo(t,e,n){Se(t)?t.appendChild(e,n):e.appendChild(n)}function To(t,e,n,r){null!==r?Eo(t,e,n,r):Oo(t,e,n)}function Io(t,e){return Se(t)?t.parentNode(e):e.parentNode}function xo(t,e){return 3===t.type||4===t.type?Ie(t,e):null}function ko(t,e,n,r){const i=So(t,r,e);if(null!=i){const t=e[11],o=xo(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)To(t,i,n[e],o);else To(t,i,n,o)}}function Ao(t,e,n){const r=Io(t,e);r&&function(t,e,n,r){Se(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function jo(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&ei(Oe(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(jo(t,e,n.child,r,i,o,!1),yo(e,t,i,a,o)):1===u?Po(t,e,r,n,i,o):yo(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function No(t,e,n,r,i,o){jo(n,r,t.firstChild,e,i,o,!1)}function Ro(t,e,n){Po(e[11],0,e,n,So(t,n,e),xo(n.parent||e[6],e))}function Po(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)yo(e,t,i,a[u],o);else jo(t,e,a,s[3],i,o,!0)}function Do(t,e,n){Se(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Mo(t,e,n){Se(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Fo{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Oe(s)),Zt(s))for(let e=Yt;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=gi(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}wo(this._lView[1],this._lView)}onDestroy(t){Ui(this._lView[1],this._lView,null,t)}markForCheck(){so(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ao(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ge(!0);try{ao(t,e,n)}finally{Ge(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,No(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Lo extends Fo{constructor(t){super(t),this._view=t}detectChanges(){uo(this._view)}checkNoChanges(){!function(t){Ge(!0);try{uo(t)}finally{Ge(!1)}}(this._view)}get context(){return null}}let Vo,Uo,qo;function Bo(t,e,n){return Vo||(Vo=class extends t{}),new Vo(Ie(e,n))}function Ho(t,e,n,r){return Uo||(Uo=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ki(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ji(e,n,t),new Fo(n)}}),0===n.type?new Uo(r,n,Bo(e,n,r)):null}function zo(t,e,n,r){let i;qo||(qo=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Bo(e,this._hostTNode,this._hostView)}get injector(){return new Jn(this._hostTNode,this._hostView)}get parentInjector(){const t=Bn(this._hostTNode,this._hostView);if(Rn(t)){const e=Dn(t,this._hostView),n=Pn(t);return new Jn(e[1].data[n+8],e)}return new Jn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(vt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Zt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new qo(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Yt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Yt?(e[4]=n[i],St(n,Yt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=Yt+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return Ie(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return Zt(e)?t(-1,e):Oe(e)}}{const t=n[16],i=t[6],o=gi(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=Io(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,No(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),St(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=_o(this._lContainer,e);n&&(Et(this._lContainer[8],e),wo(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=_o(this._lContainer,e);return n&&null!=Et(this._lContainer[8],e)?new Fo(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Zt(o))i=o;else{let t;if(3===n.type)t=Oe(o);else if(t=r[11].createComment(""),re(r)){const e=r[11],i=Ie(n,r);Eo(e,Io(e,i),t,function(t,e){return Se(t)?t.nextSibling(e):e.nextSibling}(e,i))}else ko(r[1],r,t,n);r[n.index]=i=no(o,r,t,n),oo(r,i)}return new qo(i,n,r)}function Wo(t=!1){return function(t,e,n){if(!n&&te(t)){const n=Ae(t.index,e);return new Fo(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Fo(e[16],e):null}(ze(),qe(),t)}let Ko=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>$o(),t})();const $o=Wo,Qo=Function;function Go(t){return"function"==typeof t}const Yo=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|[^()]+\(arguments\))\)/,Jo=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Zo=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Xo=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class ts{constructor(t){this._reflect=t||W.Reflect}isReflectionEnabled(){return!0}factory(t){return(...e)=>new t(...e)}_zipTypesAndAnnotations(t,e){let n;n=Ot(void 0===t?e.length:t.length);for(let r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]&&t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}_ownParameters(t,e){if(n=t.toString(),Yo.test(n)||Xo.test(n)||Jo.test(n)&&!Zo.test(n))return null;var n;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==e.ctorParameters){const t="function"==typeof r?r():r,e=t.map(t=>t&&t.type),n=t.map(t=>t&&es(t.decorators));return this._zipTypesAndAnnotations(e,n)}const i=t.hasOwnProperty(l)&&t[l],o=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return o||i?this._zipTypesAndAnnotations(o,i):Ot(t.length)}parameters(t){if(!Go(t))return[];const e=ns(t);let n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]}_ownAnnotations(t,e){if(t.annotations&&t.annotations!==e.annotations){let e=t.annotations;return"function"==typeof e&&e.annotations&&(e=e.annotations),e}return t.decorators&&t.decorators!==e.decorators?es(t.decorators):t.hasOwnProperty(c)?t[c]:null}annotations(t){if(!Go(t))return[];const e=ns(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}_ownPropMetadata(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){let e=t.propMetadata;return"function"==typeof e&&e.propMetadata&&(e=e.propMetadata),e}if(t.propDecorators&&t.propDecorators!==e.propDecorators){const e=t.propDecorators,n={};return Object.keys(e).forEach(t=>{n[t]=es(e[t])}),n}return t.hasOwnProperty(h)?t[h]:null}propMetadata(t){if(!Go(t))return{};const e=ns(t),n={};if(e!==Object){const t=this.propMetadata(e);Object.keys(t).forEach(e=>{n[e]=t[e]})}const r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(t=>{const e=[];n.hasOwnProperty(t)&&e.push(...n[t]),e.push(...r[t]),n[t]=e}),n}ownPropMetadata(t){return Go(t)&&this._ownPropMetadata(t,ns(t))||{}}hasLifecycleHook(t,e){return t instanceof Qo&&e in t.prototype}guards(t){return{}}getter(t){return new Function("o","return o."+t+";")}setter(t){return new Function("o","v","return o."+t+" = v;")}method(t){return new Function("o","args",`if (!o.${t}) throw new Error('"${t}" is undefined');\n        return o.${t}.apply(o, args);`)}importUri(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+D(t)}resourceUri(t){return"./"+D(t)}resolveIdentifier(t,e,n,r){return r}resolveEnum(t,e){return t[e]}}function es(t){return t?t.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function ns(t){const e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}let rs=null;function is(){return rs=rs||new ts}function os(t){return ss(is().parameters(t))}function ss(t){const e=$();return t.map(t=>function(t,e){const n={token:null,host:!1,optional:!1,resolved:t.R3ResolvedDependencyType.Token,self:!1,skipSelf:!1};function r(e){n.resolved=t.R3ResolvedDependencyType.Token,n.token=e}if(Array.isArray(e)&&e.length>0)for(let i=0;i<e.length;i++){const o=e[i];if(void 0===o)continue;const s=Object.getPrototypeOf(o);if(o instanceof y||"Optional"===s.ngMetadataName)n.optional=!0;else if(o instanceof b||"SkipSelf"===s.ngMetadataName)n.skipSelf=!0;else if(o instanceof v||"Self"===s.ngMetadataName)n.self=!0;else if(o instanceof _||"Host"===s.ngMetadataName)n.host=!0;else if(o instanceof m)n.token=o.token;else if(o instanceof w){if(void 0===o.attributeName)throw new Error("Attribute name must be defined.");n.token=o.attributeName,n.resolved=t.R3ResolvedDependencyType.Attribute}else o===Ko?(n.token=o,n.resolved=t.R3ResolvedDependencyType.ChangeDetectorRef):r(o)}else void 0===e||Array.isArray(e)&&0===e.length?(n.token=void 0,n.resolved=K.Invalid):r(e);return n}(e,t))}const as=S({provide:String,useValue:S});function us(t){return void 0!==t.useClass}function cs(t){return void 0!==t.useFactory}function ls(t,e){const n=e||{providedIn:null},r={name:t.name,type:t,typeArgumentCount:0,providedIn:n.providedIn,userDeps:void 0};return(us(n)||cs(n))&&void 0!==n.deps&&(r.userDeps=ss(n.deps)),us(n)?r.useClass=V(n.useClass):function(t){return as in t}(n)?r.useValue=V(n.useValue):cs(n)?r.useFactory=n.useFactory:function(t){return void 0!==t.useExisting}(n)&&(r.useExisting=V(n.useExisting)),r}const hs=d("Injectable",void 0,void 0,void 0,(t,e)=>ds(t,e)),ds=function(t,e){let n=null,r=null;t.hasOwnProperty(A)||(Object.defineProperty(t,A,{get:()=>(null===n&&(n=$().compileInjectable(yt,`ng:///${t.name}/\u0275prov.js`,ls(t,e))),n)}),t.hasOwnProperty(N)||(t[N]=()=>t[A])),t.hasOwnProperty(X)||Object.defineProperty(t,X,{get:()=>{if(null===r){const n=ls(t,e),i=$();r=i.compileFactory(yt,`ng:///${t.name}/\u0275fac.js`,{name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:os(t),injectFn:"inject",target:i.R3FactoryTarget.Injectable})}return r},configurable:!0})},fs=new et("Set Injector scope."),ps={},gs={},ms=[];let ys=void 0;function vs(){return void 0===ys&&(ys=new mt),ys}function bs(t,e=null,n=null,r){return new _s(t,n,e||vs(),r)}class _s{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Ct(e,n=>this.processProvider(n,t,e)),Ct([t],t=>this.processInjectorType(t,[],i)),this.records.set(nt,Ss(void 0,this));const o=this.records.get(fs);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:D(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=rt,n=C.Default){this.assertNotDestroyed();const r=ct(this);try{if(!(n&C.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof et)&&I(t);e=n&&this.injectableDefInScope(n)?Ss(ws(t),ps):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&C.Self?vs():this.parent).get(t,e=n&C.Optional&&e===rt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(D(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ot]&&i.unshift(e[ot]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=D(e);if(Array.isArray(e))i=e.map(D).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):D(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(it,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{ct(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(D(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=V(t)))return!1;let r=k(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=k(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Ct(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Ct(r,t=>this.processProvider(t,n,r||ms))}}this.injectorDefTypes.add(o),this.records.set(o,Ss(r.factory,ps));const a=r.providers;if(null!=a&&!s){const e=t;Ct(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Os(t=V(t))?t:V(t&&t.provide);const i=function(t,e,n){return Es(t)?Ss(void 0,t.useValue):Ss(Cs(t),ps)}(t);if(Os(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ss(void 0,ps,!0),e.factory=()=>gt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ps&&(e.value=gs,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ws(t){const e=I(t),n=null!==e?e.factory:$t(t);if(null!==n)return n;const r=k(t);if(null!==r)return r.factory;if(t instanceof et)throw new Error(`Token ${D(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Ot(e,"?");throw new Error(`Can't resolve all parameters for ${D(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[A]||t[R]||t[N]&&t[N]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Cs(t,e,n){let r=void 0;if(Os(t)){const e=V(t);return $t(e)||ws(e)}if(Es(t))r=()=>V(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...gt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>dt(V(t.useExisting));else{const e=V(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return $t(e)||ws(e);r=()=>new e(...gt(t.deps))}var i;return r}function Ss(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Es(t){return null!==t&&"object"==typeof t&&st in t}function Os(t){return"function"==typeof t}const Ts=function(t,e,n){return function(t,e=null,n=null,r){const i=bs(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Is=(()=>{class t{static create(t,e){return Array.isArray(t)?Ts(t,e,""):Ts(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=rt,t.NULL=new mt,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>dt(nt)}),t.__NG_ELEMENT_ID__=-1,t})();const xs=new et("AnalyzeForEntryComponents");let ks=new Map;const As=new Set;function js(t){return!!(t.templateUrl&&!t.hasOwnProperty("template")||t.styleUrls&&t.styleUrls.length)}function Ns(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=M(i,t):2==o&&(r=M(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Rs(t,e){const n=je(t)[1],r=n.data.length-1;_n(n,{directiveStart:r,directiveEnd:r+1})}function Ps(t){return Object.getPrototypeOf(t.prototype).constructor}function Ds(t){let e=Ps(t.type),n=!0;const r=[t];for(;e;){let i=void 0;if(ne(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Ms(t.inputs),e.declaredInputs=Ms(t.declaredInputs),e.outputs=Ms(t.outputs);const n=i.hostBindings;n&&Vs(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Fs(t,o),s&&Ls(t,s),E(t.inputs,i.inputs),E(t.declaredInputs,i.declaredInputs),E(t.outputs,i.outputs),ne(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Ds&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=jn(i.hostAttrs,n=jn(n,i.hostAttrs))}}(r)}function Ms(t){return t===jt?{}:t===Nt?[]:t}function Fs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ls(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Vs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}const Us=["providersResolver"],qs=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function Bs(t){let e=Ps(t.type),n=void 0;n=ne(t)?e.\u0275cmp:e.\u0275dir;const r=t;for(const i of Us)r[i]=n[i];if(ne(n))for(const i of qs)r[i]=n[i]}let Hs=null;function zs(){if(!Hs){const t=W.Symbol;if(t&&t.iterator)Hs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Hs=n)}}}return Hs}class Ws{constructor(t){this.wrapped=t}static wrap(t){return new Ws(t)}static unwrap(t){return Ws.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ws}}function Ks(t){return!!$s(t)&&(Array.isArray(t)||!(t instanceof Map)&&zs()in t)}function $s(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Qs(t,e,n){return t[e]=n}function Gs(t,e){return t[e]}function Ys(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Js(t,e,n,r){const i=Ys(t,e,n);return Ys(t,e+1,r)||i}function Zs(t,e,n,r,i){const o=Js(t,e,n,r);return Ys(t,e+2,i)||o}function Xs(t,e,n,r,i,o){const s=Js(t,e,n,r);return Js(t,e+2,i,o)||s}function ta(t,e,n,r){const i=qe();return Ys(i,Xe(),e)&&(Be(),Xi(mn(),i,t,e,n,r)),ta}function ea(t,e){let n=!1,r=Je();for(let o=1;o<e.length;o+=2)n=Ys(t,r++,e[o])||n;if(Ze(r),!n)return pi;let i=e[0];for(let o=1;o<e.length;o+=2)i+=ie(e[o])+e[o+1];return i}function na(t,e,n,r){return Ys(t,Xe(),n)?e+ie(n)+r:pi}function ra(t,e,n,r,i,o){const s=Js(t,Je(),n,i);return tn(2),s?e+ie(n)+r+ie(i)+o:pi}function ia(t,e,n,r,i,o,s,a){const u=Zs(t,Je(),n,i,s);return tn(3),u?e+ie(n)+r+ie(i)+o+ie(s)+a:pi}function oa(t,e,n,r,i,o,s,a,u,c){const l=Xs(t,Je(),n,i,s,u);return tn(4),l?e+ie(n)+r+ie(i)+o+ie(s)+a+ie(u)+c:pi}function sa(t,e,n,r,i,o,s,a,u,c,l,h){const d=Je();let f=Xs(t,d,n,i,s,u);return f=Ys(t,d+4,l)||f,tn(5),f?e+ie(n)+r+ie(i)+o+ie(s)+a+ie(u)+c+ie(l)+h:pi}function aa(t,e,n,r,i,o,s,a,u,c,l,h,d,f){const p=Je();let g=Xs(t,p,n,i,s,u);return g=Js(t,p+4,l,d)||g,tn(6),g?e+ie(n)+r+ie(i)+o+ie(s)+a+ie(u)+c+ie(l)+h+ie(d)+f:pi}function ua(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g){const m=Je();let y=Xs(t,m,n,i,s,u);return y=Zs(t,m+4,l,d,p)||y,tn(7),y?e+ie(n)+r+ie(i)+o+ie(s)+a+ie(u)+c+ie(l)+h+ie(d)+f+ie(p)+g:pi}function ca(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y){const v=Je();let b=Xs(t,v,n,i,s,u);return b=Xs(t,v+4,l,d,p,m)||b,tn(8),b?e+ie(n)+r+ie(i)+o+ie(s)+a+ie(u)+c+ie(l)+h+ie(d)+f+ie(p)+g+ie(m)+y:pi}function la(t,e,n,r,i,o){const s=qe(),a=na(s,e,n,r);return a!==pi&&Xi(mn(),s,t,a,i,o),la}function ha(t,e,n,r,i,o,s,a){const u=qe(),c=ra(u,e,n,r,i,o);return c!==pi&&Xi(mn(),u,t,c,s,a),ha}function da(t,e,n,r,i,o,s,a,u,c){const l=qe(),h=ia(l,e,n,r,i,o,s,a);return h!==pi&&Xi(mn(),l,t,h,u,c),da}function fa(t,e,n,r,i,o,s,a,u,c,l,h){const d=qe(),f=oa(d,e,n,r,i,o,s,a,u,c);return f!==pi&&Xi(mn(),d,t,f,l,h),fa}function pa(t,e,n,r,i,o,s,a,u,c,l,h,d,f){const p=qe(),g=sa(p,e,n,r,i,o,s,a,u,c,l,h);return g!==pi&&Xi(mn(),p,t,g,d,f),pa}function ga(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g){const m=qe(),y=aa(m,e,n,r,i,o,s,a,u,c,l,h,d,f);return y!==pi&&Xi(mn(),m,t,y,p,g),ga}function ma(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y){const v=qe(),b=ua(v,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g);return b!==pi&&Xi(mn(),v,t,b,m,y),ma}function ya(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y,v,b){const _=qe(),w=ca(_,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y);return w!==pi&&Xi(mn(),_,t,w,v,b),ya}function va(t,e,n,r){const i=qe(),o=ea(i,e);return o!==pi&&Xi(mn(),i,t,o,n,r),va}function ba(t,e,n,r,i,o,s,a){const u=qe(),c=Be(),l=t+Gt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ai(e,t,0,s||null,Pe(c,a));Hi(e,n,l,Pe(c,u)),_n(e,l);const h=l.tViews=Vi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];We(h,!1);const d=u[11].createComment("");ko(c,u,d,h),ei(d,u),oo(u,u[l]=no(d,u,d,h)),ee(h)&&Mi(c,u,h),null!=s&&Fi(u,h,a)}function _a(t){return ke(Fe.lFrame.contextLView,t)}function wa(t,e=C.Default){const n=qe();return null===n?dt(t,e):zn(ze(),n,V(t),e)}function Ca(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(kn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ze(),t)}function Sa(){throw new Error("invalid")}function Ea(t,e,n){const r=qe();return Ys(r,Xe(),e)&&Bi(Be(),mn(),r,t,e,r[11],n,!1),Ea}function Oa(t,e,n,r,i){const o=i?"class":"style";go(t,n,e.inputs[o],o,r)}function Ta(t,e,n,r){const i=qe(),o=Be(),s=Gt+t,a=i[11],u=i[s]=xi(e,a,Fe.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ai(e,t,2,i,Pe(a,o));return Hi(e,n,u,Pe(a,s)),null!==u.attrs&&Ns(u,u.attrs,!1),null!==u.mergedAttrs&&Ns(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];We(c,!0);const l=c.mergedAttrs;null!==l&&xn(a,u,l);const h=c.classes;null!==h&&Mo(a,u,h);const d=c.styles;null!==d&&Do(a,u,d),ko(o,i,u,c),0===Fe.lFrame.elementDepthCount&&ei(u,i),Fe.lFrame.elementDepthCount++,ee(c)&&(Mi(o,i,c),Di(o,c,i)),null!==r&&Fi(i,c)}function Ia(){let t=ze();Ke()?$e():(t=t.parent,We(t,!1));const e=t;Fe.lFrame.elementDepthCount--;const n=Be();n.firstCreatePass&&(_n(n,t),Xt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Oa(n,e,qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Oa(n,e,qe(),e.stylesWithoutHost,!1)}function xa(t,e,n,r){Ta(t,e,n,r),Ia()}function ka(t,e,n){const r=qe(),i=Be(),o=t+Gt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Pe(o,r),a=Ai(e,t,3,"ng-container",s);return null!==s&&Ns(a,s,!0),Hi(e,n,a,Pe(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[o];We(s,!0);const a=r[o]=r[11].createComment("");ko(i,r,a,s),ei(a,r),ee(s)&&(Mi(i,r,s),Di(i,s,r)),null!=n&&Fi(r,s)}function Aa(){let t=ze();const e=Be();Ke()?$e():(t=t.parent,We(t,!1)),e.firstCreatePass&&(_n(e,t),Xt(t)&&e.queries.elementEnd(t))}function ja(t,e,n){ka(t,e,n),Aa()}function Na(){return qe()}function Ra(t){return!!t&&"function"==typeof t.then}function Pa(t){return!!t&&"function"==typeof t.subscribe}function Da(t,e,n=!1,r){const i=qe(),o=Be(),s=ze();return Fa(o,i,i[11],s,t,e,n,r),Da}function Ma(t,e,n=!1,r){const i=ze(),o=qe(),s=Be();return Fa(s,o,fo(rn(s.data),i,o),i,t,e,n,r),Ma}function Fa(t,e,n,r,i,o,s=!1,a){const u=ee(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=ho(e);let h=!0;if(2===r.type){const d=Ie(r,e),f=a?a(d):jt,p=f.target||d,g=l.length,m=a?t=>a(Oe(t[r.index])).target:r.index;if(Se(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Va(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Va(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}function La(t,e,n){try{return!1!==e(n)}catch(r){return po(t,r),!1}}function Va(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Ae(t.index,e):e;0==(32&e[2])&&so(s);let a=La(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=La(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ua(t=1){return function(t){return(Fe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Fe.lFrame.contextLView))[8]}(t)}function qa(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?li(t,o,!0):hi(r,o))return i}else n=i}return n}function Ba(t){const e=qe()[16][6];if(!e.projection){const n=e.projection=Ot(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?qa(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}let Ha=!1;function za(t){Ha=t}function Wa(t,e=0,n){const r=qe(),i=Be(),o=Ai(i,t,1,null,n||null);null===o.projection&&(o.projection=e),$e(),Ha||Ro(i,r,o)}function Ka(t,e,n){return $a(t,"",e,"",n),Ka}function $a(t,e,n,r,i){const o=qe(),s=na(o,e,n,r);return s!==pi&&Bi(Be(),mn(),o,t,s,o[11],i,!1),$a}function Qa(t,e,n,r,i,o,s){const a=qe(),u=ra(a,e,n,r,i,o);return u!==pi&&Bi(Be(),mn(),a,t,u,a[11],s,!1),Qa}function Ga(t,e,n,r,i,o,s,a,u){const c=qe(),l=ia(c,e,n,r,i,o,s,a);return l!==pi&&Bi(Be(),mn(),c,t,l,c[11],u,!1),Ga}function Ya(t,e,n,r,i,o,s,a,u,c,l){const h=qe(),d=oa(h,e,n,r,i,o,s,a,u,c);return d!==pi&&Bi(Be(),mn(),h,t,d,h[11],l,!1),Ya}function Ja(t,e,n,r,i,o,s,a,u,c,l,h,d){const f=qe(),p=sa(f,e,n,r,i,o,s,a,u,c,l,h);return p!==pi&&Bi(Be(),mn(),f,t,p,f[11],d,!1),Ja}function Za(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){const g=qe(),m=aa(g,e,n,r,i,o,s,a,u,c,l,h,d,f);return m!==pi&&Bi(Be(),mn(),g,t,m,g[11],p,!1),Za}function Xa(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){const y=qe(),v=ua(y,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g);return v!==pi&&Bi(Be(),mn(),y,t,v,y[11],m,!1),Xa}function tu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y,v){const b=qe(),_=ca(b,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y);return _!==pi&&Bi(Be(),mn(),b,t,_,b[11],v,!1),tu}function eu(t,e,n){const r=qe(),i=ea(r,e);return i!==pi&&Bi(Be(),mn(),r,t,i,r[11],n,!1),eu}const nu=[];function ru(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ci(o):Ei(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];iu(t[a],e)&&(u=!0,t[a+1]=r?Ti(n):Si(n)),a=r?Ci(n):Ei(n)}u&&(t[n+1]=r?Si(o):Ti(o))}function iu(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&xt(t,e)>=0}const ou={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function su(t){return t.substring(ou.key,ou.keyEnd)}function au(t){return t.substring(ou.value,ou.valueEnd)}function uu(t,e){const n=ou.textEnd;return n===e?-1:(e=ou.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ou.key=e,n),hu(t,e,n))}function cu(t,e){const n=ou.textEnd;let r=ou.key=hu(t,e,n);return n===r?-1:(r=ou.keyEnd=function(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=du(t,r,n),r=ou.value=hu(t,r,n),r=ou.valueEnd=function(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=fu(t,u,s,n):e===s-4&&85===o&&82===i&&76===r&&40===u?a=s=fu(t,41,s,n):u>32&&(a=s),o=i,i=r,r=-33&u}return a}(t,r,n),du(t,r,n))}function lu(t){ou.key=0,ou.keyEnd=0,ou.value=0,ou.valueEnd=0,ou.textEnd=t.length}function hu(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function du(t,e,n,r){return(e=hu(t,e,n))<n&&e++,e}function fu(t,e,n,r){let i=-1,o=n;for(;o<r;){const n=t.charCodeAt(o++);if(n==e&&92!==i)return o;i=92==n&&92===i?0:n}throw new Error}function pu(t,e,n){return _u(t,e,n,!1),pu}function gu(t,e){return _u(t,e,null,!0),gu}function mu(t){wu(Tu,yu,t,!1)}function yu(t,e){for(let n=function(t){return lu(t),cu(t,hu(t,0,ou.textEnd))}(e);n>=0;n=cu(e,n))Tu(t,su(e),au(e))}function vu(t){wu(Tt,bu,t,!0)}function bu(t,e){for(let n=function(t){return lu(t),uu(t,hu(t,0,ou.textEnd))}(e);n>=0;n=uu(e,n))Tt(t,su(e),!0)}function _u(t,e,n,r){const i=qe(),o=Be(),s=tn(2);o.firstUpdatePass&&Su(o,t,s,r),e!==pi&&Ys(i,s,e)&&Iu(o,o.data[pn()+Gt],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=D(lr(t)))),t}(e,n),r,s)}function wu(t,e,n,r){const i=Be(),o=tn(2);i.firstUpdatePass&&Su(i,null,o,r);const s=qe();if(n!==pi&&Ys(s,o,n)){const a=i.data[pn()+Gt];if(Au(a,r)&&!Cu(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=M(t,n||"")),Oa(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===pi&&(i=nu);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p=null,g=void 0;l===h?(u+=2,c+=2,d!==f&&(p=h,g=f)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,g=f),null!==p&&Iu(t,e,n,r,p,g,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return nu;const r=[],i=lr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Cu(t,e){return e>=t.expandoStartIndex}function Su(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[pn()+Gt],s=Cu(t,n);Au(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=rn(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ou(n=Eu(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Eu(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ei(r))return t[Ci(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Eu(null,t,e,n[1],r),n=Ou(n,e.attrs,r),function(t,e,n,r){t[Ci(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ou(r,t[o].hostAttrs,n);return Ou(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ci(s),u=Ei(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||xt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ci(t[a+1]);t[r+1]=wi(e,a),0!==e&&(t[e+1]=Oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=wi(a,0),0!==a&&(t[a+1]=Oi(t[a+1],r)),a=r;else t[r+1]=wi(u,0),0===a?a=r:t[u+1]=Oi(t[u+1],r),u=r;l&&(t[r+1]=Si(t[r+1])),ru(t,c,r,!0),ru(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&xt(o,e)>=0&&(n[r+1]=Ti(n[r+1]))}(e,c,t,r,o),s=wi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Eu(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ou(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ou(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tt(t,s,!!n||e[++o]))}return void 0===t?null:t}function Tu(t,e,n){Tt(t,e,lr(n))}function Iu(t,e,n,r,i,o,s,a){if(2!==e.type)return;const u=t.data,c=u[a+1];ku(1==(1&c)?xu(u,e,n,i,Ei(c),s):void 0)||(ku(o)||2==(2&c)&&(o=xu(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Se(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Te(pn(),n),i,o))}function xu(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===pi&&(l=c?nu:void 0);let h=c?It(l,r):u===r?l:void 0;if(o&&!ku(h)&&(h=It(e,r)),ku(h)&&(a=h,s))return a;const d=t[i+1];i=s?Ci(d):Ei(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=It(t,r))}return a}function ku(t){return void 0!==t}function Au(t,e){return 0!=(t.flags&(e?16:32))}function ju(t,e=""){const n=qe(),r=Be(),i=t+Gt,o=r.firstCreatePass?Ai(r,t,2,null,null):r.data[i],s=n[i]=vo(e,n[11]);ko(r,n,s,o),We(o,!1)}function Nu(t){return Ru("",t,""),Nu}function Ru(t,e,n){const r=qe(),i=na(r,t,e,n);return i!==pi&&mo(r,pn(),i),Ru}function Pu(t,e,n,r,i){const o=qe(),s=ra(o,t,e,n,r,i);return s!==pi&&mo(o,pn(),s),Pu}function Du(t,e,n,r,i,o,s){const a=qe(),u=ia(a,t,e,n,r,i,o,s);return u!==pi&&mo(a,pn(),u),Du}function Mu(t,e,n,r,i,o,s,a,u){const c=qe(),l=oa(c,t,e,n,r,i,o,s,a,u);return l!==pi&&mo(c,pn(),l),Mu}function Fu(t,e,n,r,i,o,s,a,u,c,l){const h=qe(),d=sa(h,t,e,n,r,i,o,s,a,u,c,l);return d!==pi&&mo(h,pn(),d),Fu}function Lu(t,e,n,r,i,o,s,a,u,c,l,h,d){const f=qe(),p=aa(f,t,e,n,r,i,o,s,a,u,c,l,h,d);return p!==pi&&mo(f,pn(),p),Lu}function Vu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){const g=qe(),m=ua(g,t,e,n,r,i,o,s,a,u,c,l,h,d,f,p);return m!==pi&&mo(g,pn(),m),Vu}function Uu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){const y=qe(),v=ca(y,t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m);return v!==pi&&mo(y,pn(),v),Uu}function qu(t){const e=qe(),n=ea(e,t);return n!==pi&&mo(e,pn(),n),qu}function Bu(t,e,n){wu(Tt,bu,na(qe(),t,e,n),!0)}function Hu(t,e,n,r,i){wu(Tt,bu,ra(qe(),t,e,n,r,i),!0)}function zu(t,e,n,r,i,o,s){wu(Tt,bu,ia(qe(),t,e,n,r,i,o,s),!0)}function Wu(t,e,n,r,i,o,s,a,u){wu(Tt,bu,oa(qe(),t,e,n,r,i,o,s,a,u),!0)}function Ku(t,e,n,r,i,o,s,a,u,c,l){wu(Tt,bu,sa(qe(),t,e,n,r,i,o,s,a,u,c,l),!0)}function $u(t,e,n,r,i,o,s,a,u,c,l,h,d){wu(Tt,bu,aa(qe(),t,e,n,r,i,o,s,a,u,c,l,h,d),!0)}function Qu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){wu(Tt,bu,ua(qe(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p),!0)}function Gu(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){wu(Tt,bu,ca(qe(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m),!0)}function Yu(t){wu(Tt,bu,ea(qe(),t),!0)}function Ju(t,e,n){mu(na(qe(),t,e,n))}function Zu(t,e,n,r,i){mu(ra(qe(),t,e,n,r,i))}function Xu(t,e,n,r,i,o,s){mu(ia(qe(),t,e,n,r,i,o,s))}function tc(t,e,n,r,i,o,s,a,u){mu(oa(qe(),t,e,n,r,i,o,s,a,u))}function ec(t,e,n,r,i,o,s,a,u,c,l){mu(sa(qe(),t,e,n,r,i,o,s,a,u,c,l))}function nc(t,e,n,r,i,o,s,a,u,c,l,h,d){mu(aa(qe(),t,e,n,r,i,o,s,a,u,c,l,h,d))}function rc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){mu(ua(qe(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p))}function ic(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){mu(ca(qe(),t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m))}function oc(t){mu(ea(qe(),t))}function sc(t,e,n,r,i){return _u(t,na(qe(),e,n,r),i,!1),sc}function ac(t,e,n,r,i,o,s){return _u(t,ra(qe(),e,n,r,i,o),s,!1),ac}function uc(t,e,n,r,i,o,s,a,u){return _u(t,ia(qe(),e,n,r,i,o,s,a),u,!1),uc}function cc(t,e,n,r,i,o,s,a,u,c,l){return _u(t,oa(qe(),e,n,r,i,o,s,a,u,c),l,!1),cc}function lc(t,e,n,r,i,o,s,a,u,c,l,h,d){return _u(t,sa(qe(),e,n,r,i,o,s,a,u,c,l,h),d,!1),lc}function hc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){return _u(t,aa(qe(),e,n,r,i,o,s,a,u,c,l,h,d,f),p,!1),hc}function dc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m){return _u(t,ua(qe(),e,n,r,i,o,s,a,u,c,l,h,d,f,p,g),m,!1),dc}function fc(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y,v){return _u(t,ca(qe(),e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,y),v,!1),fc}function pc(t,e,n){return _u(t,ea(qe(),e),n,!1),pc}function gc(t,e,n){const r=qe();return Ys(r,Xe(),e)&&Bi(Be(),mn(),r,t,e,r[11],n,!0),gc}function mc(t,e,n){const r=qe();if(Ys(r,Xe(),e)){const i=Be(),o=mn();Bi(i,o,r,t,e,fo(rn(i.data),o,r),n,!0)}return mc}const yc=void 0;var vc=["en",[["a","p"],["AM","PM"],yc],[["AM","PM"],yc,yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yc,"{1} 'at' {0}",yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let bc={};function _c(t,e,n){"string"!=typeof e&&(n=e,e=t[Oc.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),bc[e]=t,n&&(bc[e][Oc.ExtraData]=n)}function wc(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ec(e);if(n)return n;const r=e.split("-")[0];if(n=Ec(r),n)return n;if("en"===r)return vc;throw new Error(`Missing locale data for the locale "${t}".`)}function Cc(t){return wc(t)[Oc.CurrencyCode]||null}function Sc(t){return wc(t)[Oc.PluralCase]}function Ec(t){return t in bc||(bc[t]=W.ng&&W.ng.common&&W.ng.common.locales&&W.ng.common.locales[t]),bc[t]}var Oc=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Tc=["zero","one","two","few","many"],Ic="en-US",xc={marker:"element"},kc={marker:"comment"};let Ac=Ic;function jc(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ac=t.toLowerCase().replace(/_/g,"-"))}const Nc=[];let Rc=-1,Pc=0,Dc=0;function Mc(t,e,n,r){const i=r[11];let o=null,s=null;const a=[];for(let u=0;u<n.length;u++){const c=n[u];if("string"==typeof c){const e=vo(c,i),l=n[++u];s=o,o=Bc(t,r,l,2,e,null),a.push(l),$e()}else if("number"==typeof c)switch(7&c){case 1:const i=c>>>17;let l;l=i===e?r[6]:xe(t,i),s=Uc(t,o,l,s,r);break;case 0:const h=c>=0,d=(h?c:~c)>>>3;a.push(d),s=o,o=xe(t,d),o&&We(o,h);break;case 5:s=o=xe(t,c>>>3),We(o,!1);break;case 4:const f=n[++u],p=n[++u];Xi(xe(t,c>>>3),r,f,p,null,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case kc:const e=n[++u],l=n[++u],h=i.createComment(e);s=o,o=Bc(t,r,l,4,h,null),a.push(l),ei(h,r),$e();break;case xc:const d=n[++u],f=n[++u];s=o,o=Bc(t,r,f,2,i.createElement(d),d),a.push(f);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}}return $e(),a}function Fc(t,e,n,r,i,o){let s=!1;for(let a=0;a<r.length;a++){const u=r[a],c=r[++a];if(u&o){let o="";for(let u=a+1;u<=a+c;u++){const a=r[u];if("string"==typeof a)o+=a;else if("number"==typeof a)if(a<0)o+=ie(n[i-a]);else{const c=a>>>2;switch(3&a){case 1:const a=r[++u],l=r[++u];Bi(t,xe(t,c),n,a,o,n[11],l,!1);break;case 0:mo(n,c,o);break;case 2:s=Vc(t,e,r[++u],n,o);break;case 3:Lc(t,e,r[++u],i,n,s)}}}}a+=c}}function Lc(t,e,n,r,i,o){const s=e[n],a=i[s.currentCaseLViewIndex];null!==a&&Fc(t,e,i,s.update[a],r,o?-1:Pc)}function Vc(t,e,n,r,i){!function t(e,n,r,i){const o=n[r],s=i[o.currentCaseLViewIndex];if(null!==s){const r=o.remove[s];for(let o=0;o<r.length;o++){const s=r[o],a=s>>>3;switch(7&s){case 3:qc(e,i,a,!1);break;case 6:t(e,n,a,i)}}}}(t,e,n,r);let o=!1;const s=e[n],a=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=Sc(e)(parseInt(t,10)),r=Tc[n];return void 0!==r?r:"other"}(e,Ac);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return n}(s,i);return r[s.currentCaseLViewIndex]=-1!==a?a:null,a>-1&&(Mc(t,-1,s.create[a],r),o=!0),o}function Uc(t,e,n,r,i){const o=e.next;r||(r=n),r===n&&e!==n.child?(e.next=n.child,null===e.parent?t.firstChild=e:n.child=e):r!==n&&e!==r.next?(e.next=r.next,r.next=e):e.next=null,n!==i[6]&&(e.parent=n);let s=e.next;for(;s;)s.next===e&&(s.next=o),s=s.next;if(1===e.type)return Ro(t,i,e),e;ko(t,i,Ie(e,i),e);const a=i[e.index];return 0!==e.type&&Zt(a)&&ko(t,i,a[7],e),e}function qc(t,e,n,r){const i=xe(t,n),o=Te(n,e);o&&Ao(e[11],o);const s=ke(e,n);if(Zt(s)){const t=s;0!==i.type&&Ao(e[11],t[7])}r&&i&&(i.flags|=64)}function Bc(t,e,n,r,i,o){const s=ze();e[n+Gt]=i;const a=Ai(t,n,r,o,null);return s&&s.next===a&&(s.next=null),a}const Hc=/\ufffd(\d+):?\d*\ufffd/gi,zc=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,Wc=/\ufffd(\d+)\ufffd/,Kc=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/;let $c;const Qc=[],Gc=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Yc=/\ufffd(\/?[#*!]\d+):?\d*\ufffd/gi,Jc=/\uE500/g;function Zc(t,e,n,r=null){const i=[null,null],o=t.split(Hc);let s=0;for(let a=0;a<o.length;a++){const t=o[a];if(1&a){const e=parseInt(t,10);i.push(-1-e),s|=el(e)}else""!==t&&i.push(t)}return i.push(e<<2|(n?1:0)),n&&i.push(n,r),i[0]=s,i[1]=i.length-2,i}function Xc(t,e=0){let n;e|=el(t.mainBinding);for(let r=0;r<t.values.length;r++){const i=t.values[r];for(let t=0;t<i.length;t++){const r=i[t];if("string"==typeof r)for(;n=Hc.exec(r);)e|=el(parseInt(n[1],10));else e=Xc(r,e)}}return e}function tl(t){return t+$c++}function el(t){return 1<<Math.min(t,31)}function nl(t){return void 0===t}function rl(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Gc.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function il(t,e,n,r){const i=[],o=[],s=[],a=[],u=[],c=e.values;for(let l=0;l<c.length;l++){const e=c[l],h=[];for(let t=0;t<e.length;t++){const n=e[t];if("string"!=typeof n){const r=h.push(n)-1;e[t]=`\x3c!--\ufffd${r}\ufffd--\x3e`}}const d=sl(e.join(""),n,h,t,r);i.push(d.create),o.push(d.remove),s.push(d.update),a.push(d.vars),u.push(d.childIcus)}t.push({type:e.type,vars:a,currentCaseLViewIndex:Gt+r+1,childIcus:u,cases:e.cases,create:i,remove:o,update:s}),$c+=Math.max(...a)}function ol(t){const e=[],n=[];let r=1,i=0;const o=al(t=t.replace(Kc,(function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""})));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=al(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function sl(t,e,n,r,i){const o=Cr(Ce()).getInertBodyElement(t);if(!o)throw new Error("Unable to generate inert body element");const s={vars:1,childIcus:[],create:[],remove:[],update:[]};return function t(e,n,r,i,o,s){if(e){const a=[];for(;e;){const u=e.nextSibling,c=s+ ++n.vars;switch(e.nodeType){case Node.ELEMENT_NODE:const u=e,l=u.tagName.toLowerCase();if(Dr.hasOwnProperty(l)){n.create.push(xc,l,c,r<<17|1);const a=u.attributes;for(let t=0;t<a.length;t++){const e=a.item(t),r=e.name.toLowerCase();e.value.match(Hc)?Lr.hasOwnProperty(r)&&_t(Mr[r]?Zc(e.value,c,e.name,Ir):Fr[r]?Zc(e.value,c,e.name,xr):Zc(e.value,c,e.name),n.update):n.create.push(c<<3|4,e.name,e.value)}t(e.firstChild,n,c,i,o,s),n.remove.push(c<<3|3)}else n.vars--;break;case Node.TEXT_NODE:const h=e.textContent||"",d=h.match(Hc);n.create.push(d?"":h,c,r<<17|1),n.remove.push(c<<3|3),d&&_t(Zc(h,c),n.update);break;case Node.COMMENT_NODE:const f=Wc.exec(e.textContent||"");if(f){const t=parseInt(f[1],10);n.create.push(kc,"",c,r<<17|1),a.push([i[t],c])}else n.vars--;break;default:n.vars--}e=u}for(let t=0;t<a.length;t++){const e=a[t][0],r=a[t][1];il(o,e,r,s+n.vars);const i=o.length-1;n.vars+=Math.max(...o[i].vars),n.childIcus.push(i);const u=Xc(e);n.update.push(el(e.mainBinding),3,-1-e.mainBinding,r<<2|2,i,u,2,r<<2|3,i),n.remove.push(i<<3|6,r<<3|3)}}}((Kr(o)||o).firstChild,s,e,n,r,i),s}function al(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Kc.test(n)?r.push(ol(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}const ul=/\[(\ufffd.+?\ufffd?)\]/,cl=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,ll=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,hl=/{([A-Z0-9_]+)}/g,dl=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,fl=/\/\*/,pl=/\d+\:(\d+)/;function gl(t,e,n){const r=Be(),i=Pe(r.consts,e);!function(t){Nc[++Rc]=t}(t),za(!0),r.firstCreatePass&&null===r.data[t+Gt]&&function(t,e,n,r,i){const o=e.blueprint.length-Gt;$c=0;const s=ze(),a=Ke()?s:s&&s.parent;let u=a&&a!==t[6]?a.index-Gt:n,c=0;Qc[c]=u;const l=[];if(n>0&&s!==a){let t=s.index-Gt;Ke()||(t=~t),l.push(t<<3|0)}const h=[],d=[];if(""===r&&nl(i))l.push(r,tl(o),u<<17|1);else{const t=function(t,e){if(nl(e))return rl(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return rl(t.substring(n,r))}}(r,i),e=(f=t,f.replace(Jc," ")).split(Yc);for(let n=0;n<e.length;n++){let r=e[n];if(1&n)if("/"===r.charAt(0)){if("#"===r.charAt(1)){const t=parseInt(r.substr(2),10);u=Qc[--c],l.push(t<<3|5)}}else{const t=parseInt(r.substr(1),10),e="#"===r.charAt(0);l.push((e?t:~t)<<3|0,u<<17|1),e&&(Qc[++c]=u=t)}else{const e=al(r);for(let n=0;n<e.length;n++)if(1&n){const r=e[n];if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${t}" message.`);const i=tl(o);l.push(kc,"",i,u<<17|1);const s=Xc(r);il(d,r,i,i);const a=d.length-1;h.push(el(r.mainBinding),3,-1-r.mainBinding,i<<2|2,a,s,2,i<<2|3,a)}else if(""!==e[n]){const t=e[n],r=t.match(Hc),i=tl(o);l.push(r?"":t,i,u<<17|1),r&&_t(Zc(t,i),h)}}}}var f;$c>0&&function(t,e,n){if(n>0&&t.firstCreatePass){for(let r=0;r<n;r++)t.blueprint.push(null),t.data.push(null),e.push(null);t.expandoInstructions?t.expandoInstructions.push(n):t.expandoStartIndex+=n}}(e,t,$c),e.data[n+Gt]={vars:$c,create:l,update:h,icus:d.length?d:null}}(qe(),r,t,i,n)}function ml(){const t=qe();(function(t,e){const n=Nc[Rc--],r=t.data[n+Gt],i=ze(),o=Mc(t,n,r.create,e);let s=n+1;for(;null!==i&&s<=i.index-Gt;){-1===o.indexOf(s)&&qc(t,e,s,!0);const n=xe(t,s);!n||0!==n.type&&2!==n.type&&3!==n.type||null===n.localNames||(s+=n.localNames.length>>1),s++}})(Be(),t),za(!1)}function yl(t,e,n){gl(t,e,n),ml()}function vl(t,e){const n=qe(),r=Be();!function(t,e,n,r){const i=ze().index-Gt,o=[];for(let s=0;s<r.length;s+=2){const a=r[s],u=r[s+1].split(zc);for(let r=0;r<u.length;r++){const s=u[r];if(1&r)throw new Error("ICU expressions are not yet supported in attributes");if(""!==s)if(s.match(Hc))e.firstCreatePass&&null===e.data[n+Gt]&&_t(Zc(s,i,a),o);else{const n=xe(e,i);2===n.type&&Xi(n,t,a,s,null,null);const r=null!==n.inputs&&n.inputs[a];r&&go(e,t,r,a,s)}}}e.firstCreatePass&&null===e.data[n+Gt]&&(e.data[n+Gt]=o)}(n,r,t,Pe(r.consts,e))}function bl(t){return Ys(qe(),Xe(),t)&&(Pc|=1<<Dc),Dc++,bl}function _l(t){!function(t,e,n){if(Dc>0){const r=t.data[n+Gt];let i,o=null;Array.isArray(r)?i=r:(i=r.update,o=r.icus),Fc(t,o,e,i,Je()-Dc-1,Pc),Pc=0,Dc=0}}(Be(),qe(),t)}function wl(t,e={}){return function(t,e={}){let n=t;if(ul.test(t)){const t={},e=[0];n=n.replace(cl,(n,r,i)=>{const o=r||i,s=t[o]||[];if(s.length||(o.split("|").forEach(t=>{const e=t.match(pl),n=e?parseInt(e[1],10):0,r=fl.test(t);s.push([n,r,t])}),t[o]=s),!s.length)throw new Error("i18n postprocess: unmatched placeholder - "+o);const a=e[e.length-1];let u=0;for(let t=0;t<s.length;t++)if(s[t][0]===a){u=t;break}const[c,l,h]=s[u];return l?e.pop():a!==c&&e.push(c),s.splice(u,1),h})}return Object.keys(e).length?(n=n.replace(ll,(t,n,r,i,o,s)=>e.hasOwnProperty(r)?`${n}${e[r]}${s}`:t),n=n.replace(hl,(t,n)=>e.hasOwnProperty(n)?e[n]:t),n=n.replace(dl,(t,n)=>{if(e.hasOwnProperty(n)){const r=e[n];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${t} with key: ${n}`);return r.shift()}return t}),n):n}(t,e)}function Cl(t,e,n,r,i){if(t=V(t),Array.isArray(t))for(let o=0;o<t.length;o++)Cl(t[o],e,n,r,i);else{const o=Be(),s=qe();let a=Os(t)?t:V(t.provide),u=Cs(t);const c=ze(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Os(t)||!t.multi){const r=new In(u,i,wa),f=Ol(a,e,i?l:l+d,h);-1===f?(Hn(Vn(c,s),o,a),Sl(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Ol(a,e,l+d,h),p=Ol(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Hn(Vn(c,s),o,a);const l=function(t,e,n,r,i){const o=new In(t,n,wa);return o.multi=[],o.index=e,o.componentProviders=0,El(o,i,r&&!n),o}(i?Il:Tl,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Sl(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Sl(o,t,f>-1?f:p,El(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Sl(t,e,n,r){const i=Os(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function El(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ol(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Tl(t,e,n,r){return xl(this.multi,[])}function Il(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),xl(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],xl(i,o);return o}function xl(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function kl(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Be();if(r.firstCreatePass){const i=ne(t);Cl(n,r.data,r.blueprint,i,!0),Cl(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Al{}class jl{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${D(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Nl=(()=>{class t{}return t.NULL=new jl,t})(),Rl=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Pl(t),t})();const Pl=function(t){return Bo(t,ze(),qe())};class Dl{}var Ml=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Fl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ll(),t})();const Ll=function(){const t=qe(),e=Ae(ze().index,t);return function(t){const e=t[11];if(Se(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Jt(e)?e:t)};let Vl=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class Ul{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ql=new Ul("10.2.5");class Bl{constructor(){}supports(t){return Ks(t)}create(t){return new zl(t)}}const Hl=(t,e)=>e;class zl{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Hl}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ql(n,r,i)?e:n,s=Ql(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ks(t))throw new Error(`Error trying to diff '${D(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[zs()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Wl(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $l),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $l),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Wl{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Kl{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class $l{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Kl,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ql(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Gl{constructor(){}supports(t){return t instanceof Map||$s(t)}create(){return new Yl}}class Yl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||$s(t)))throw new Error(`Error trying to diff '${D(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Jl(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Jl{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Zl=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new b,new y]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>new t([new Bl])}),t})(),Xl=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new b,new y]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>new t([new Gl])}),t})();const th=[new Gl],eh=new Zl([new Bl]),nh=new Xl(th);let rh=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ih(t,Rl),t})();const ih=function(t,e){return Ho(t,e,ze(),qe())};let oh=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>sh(t,Rl),t})();const sh=function(t,e){return zo(t,e,ze(),qe())},ah={};class uh extends Nl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=zt(t);return new hh(e,this.ngModule)}}function ch(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const lh=new et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>se});class hh extends Al{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(fi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ch(this.componentDef.inputs)}get outputs(){return ch(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ah,i);return o!==ah||r===ah?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Dl,Ee),s=i.get(Vl,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Se(t))return t.selectRootElement(e,n===At.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):xi(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?ve:"math"===e?be:null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:se,clean:lo,playerHandler:null,flags:0},d=Vi(0,null,null,1,0,null,null,null,null,null),f=ki(null,d,h,l,null,null,o,a,s,i);let p,g;un(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ai(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ns(a,u,!0),null!==t&&(xn(i,t,u),null!==a.classes&&Mo(i,t,a.classes),null!==a.styles&&Do(i,t,a.styles)));const c=r.createRenderer(t,e),l=ki(n,Li(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Hn(Vn(a,n),s,e.type),Qi(s,a),Yi(a,n.length,1)),oo(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)xn(a,c,["ng-version",ql.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ui(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&xn(a,c,t),e&&e.length>0&&Mo(a,c,e.join(" "))}if(g=xe(d,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ze();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),$i(t,r,1),Ji(t,e,n));const i=Qn(e,t,e.length-1,r);ei(i,e);const o=Ie(r,e);return o&&ei(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ze();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){gn(a.index-Gt);const t=n[1];zi(t,e),Wi(t,n,e.hostVars),Ki(e,s)}return s}(t,this.componentDef,f,h,[Rs]),ji(d,f,null)}finally{fn()}return new dh(this.componentType,p,Bo(Rl,g,f),f,g)}}class dh extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Lo(r),this.componentType=t}get injector(){return new Jn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}function fh(t,e,n,r){return u(()=>{const i=t,o=i.prototype?Object.getPrototypeOf(i.prototype):null,s=o&&o.constructor;null!==e&&(void 0===i.decorators||s&&s.decorators===i.decorators?i.decorators=e:i.decorators.push(...e)),null!==n&&(i.ctorParameters=n),null!==r&&(i.propDecorators=void 0===i.propDecorators||s&&s.propDecorators===i.propDecorators?r:Object.assign(Object.assign({},i.propDecorators),r))})}const ph=new Map;class gh extends vt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uh(this);const n=Qt(t),r=t[Z]||null;r&&jc(r),this._bootstrapComponents=le(n.bootstrap),this._r3Injector=bs(t,e,[{provide:vt,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver}],D(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Is.THROW_IF_NOT_FOUND,n=C.Default){return t===Is||t===vt||t===nt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class mh extends bt{constructor(t){super(),this.moduleType=t,null!==Qt(t)&&function(t){const e=new Set;!function t(n){const r=Qt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${D(e)} vs ${D(e.name)}`)}(i,ph.get(i),n),ph.set(i,n));const o=le(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new gh(this.moduleType,t)}}function yh(t,e,n){const r=Ye()+t,i=qe();return i[r]===pi?Qs(i,r,n?e.call(n):e()):Gs(i,r)}function vh(t,e,n,r){return xh(qe(),Ye(),t,e,n,r)}function bh(t,e,n,r,i){return kh(qe(),Ye(),t,e,n,r,i)}function _h(t,e,n,r,i,o){return Ah(qe(),Ye(),t,e,n,r,i,o)}function wh(t,e,n,r,i,o,s){return jh(qe(),Ye(),t,e,n,r,i,o,s)}function Ch(t,e,n,r,i,o,s,a){const u=Ye()+t,c=qe(),l=Xs(c,u,n,r,i,o);return Ys(c,u+4,s)||l?Qs(c,u+5,a?e.call(a,n,r,i,o,s):e(n,r,i,o,s)):Gs(c,u+5)}function Sh(t,e,n,r,i,o,s,a,u){const c=Ye()+t,l=qe(),h=Xs(l,c,n,r,i,o);return Js(l,c+4,s,a)||h?Qs(l,c+6,u?e.call(u,n,r,i,o,s,a):e(n,r,i,o,s,a)):Gs(l,c+6)}function Eh(t,e,n,r,i,o,s,a,u,c){const l=Ye()+t,h=qe();let d=Xs(h,l,n,r,i,o);return Zs(h,l+4,s,a,u)||d?Qs(h,l+7,c?e.call(c,n,r,i,o,s,a,u):e(n,r,i,o,s,a,u)):Gs(h,l+7)}function Oh(t,e,n,r,i,o,s,a,u,c,l){const h=Ye()+t,d=qe(),f=Xs(d,h,n,r,i,o);return Xs(d,h+4,s,a,u,c)||f?Qs(d,h+8,l?e.call(l,n,r,i,o,s,a,u,c):e(n,r,i,o,s,a,u,c)):Gs(d,h+8)}function Th(t,e,n,r){return Nh(qe(),Ye(),t,e,n,r)}function Ih(t,e){const n=t[e];return n===pi?void 0:n}function xh(t,e,n,r,i,o){const s=e+n;return Ys(t,s,i)?Qs(t,s+1,o?r.call(o,i):r(i)):Ih(t,s+1)}function kh(t,e,n,r,i,o,s){const a=e+n;return Js(t,a,i,o)?Qs(t,a+2,s?r.call(s,i,o):r(i,o)):Ih(t,a+2)}function Ah(t,e,n,r,i,o,s,a){const u=e+n;return Zs(t,u,i,o,s)?Qs(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Ih(t,u+3)}function jh(t,e,n,r,i,o,s,a,u){const c=e+n;return Xs(t,c,i,o,s,a)?Qs(t,c+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):Ih(t,c+4)}function Nh(t,e,n,r,i,o){let s=e+n,a=!1;for(let u=0;u<i.length;u++)Ys(t,s++,i[u])&&(a=!0);return a?Qs(t,s,r.apply(o,i)):Ih(t,s)}function Rh(t,e){const n=Be();let r;const i=t+Gt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=$t(r.type)),s=lt(wa);try{const e=Fn(!1),r=o();return Fn(e),function(t,e,n,r){const i=n+Gt;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,qe(),t,r),r}finally{lt(s)}}function Ph(t,e,n){const r=qe(),i=ke(r,t);return Uh(r,Vh(r,t)?xh(r,Ye(),e,i.transform,n,i):i.transform(n))}function Dh(t,e,n,r){const i=qe(),o=ke(i,t);return Uh(i,Vh(i,t)?kh(i,Ye(),e,o.transform,n,r,o):o.transform(n,r))}function Mh(t,e,n,r,i){const o=qe(),s=ke(o,t);return Uh(o,Vh(o,t)?Ah(o,Ye(),e,s.transform,n,r,i,s):s.transform(n,r,i))}function Fh(t,e,n,r,i,o){const s=qe(),a=ke(s,t);return Uh(s,Vh(s,t)?jh(s,Ye(),e,a.transform,n,r,i,o,a):a.transform(n,r,i,o))}function Lh(t,e,n){const r=qe(),i=ke(r,t);return Uh(r,Vh(r,t)?Nh(r,Ye(),e,i.transform,n,i):i.transform.apply(i,n))}function Vh(t,e){return t[1].data[e+Gt].pure}function Uh(t,e){return Ws.isWrapped(e)&&(e=Ws.unwrap(e),t[Je()]=pi),e}const qh=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Bh(){return this._results[zs()]()}class Hh{constructor(){this.dirty=!0,this._results=[],this.changes=new qh,this.length=0;const t=zs(),e=Hh.prototype;e[t]||(e[t]=Bh)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=wt(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class zh{constructor(t){this.queryList=t,this.matches=null}clone(){return new zh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wh{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Wh(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ud(t,e).matches&&this.queries[e].setDirty()}}class Kh{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class $h{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new $h(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Qh{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Qh(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Gh(e,i)),this.matchTNodeWithReadOption(t,e,$n(e,t,i,!1,!1))}else n===rh?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,$n(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Rl||r===oh||r===rh&&0===e.type)this.addMatch(e.index,-2);else{const n=$n(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Gh(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Yh(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?Bo(Rl,t,e):0===t.type?Ho(rh,Rl,t,e):null}(e,t):-2===n?function(t,e,n){return n===Rl?Bo(Rl,e,t):n===rh?Ho(rh,Rl,e,t):n===oh?zo(oh,Rl,e,t):void 0}(t,e,r):Qn(t,t[1],n,e)}function Jh(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Yh(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Zh(t){const e=qe(),n=Be(),r=on();sn(r+1);const i=ud(n,r);if(t.dirty&&Ne(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Jh(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=Yt;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Jh(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Xh(t,e,n){ed(Be(),qe(),t,e,n,!0)}function td(t,e,n){ed(Be(),qe(),t,e,n,!1)}function ed(t,e,n,r,i,o){t.firstCreatePass&&(ad(t,new Kh(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),sd(t,e)}function nd(t,e,n,r){id(Be(),qe(),e,n,r,!1,ze(),t)}function rd(t,e,n,r){id(Be(),qe(),e,n,r,!0,ze(),t)}function id(t,e,n,r,i,o,s,a){t.firstCreatePass&&(ad(t,new Kh(n,r,o,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),o&&(t.staticContentQueries=!0)),sd(t,e)}function od(){return t=qe(),e=on(),t[19].queries[e].queryList;var t,e}function sd(t,e){const n=new Hh;Ui(t,e,n,n.destroy),null===e[19]&&(e[19]=new Wh),e[19].queries.push(new zh(n))}function ad(t,e,n){null===t.queries&&(t.queries=new $h),t.queries.track(new Qh(e,n))}function ud(t,e){return t.queries.getByIndex(e)}function cd(t,e){return Ho(rh,Rl,t,e)}function ld(t=C.Default){const e=Wo(!0);if(null!=e||t&C.Optional)return e;he("ChangeDetectorRef")}const hd=(()=>({"\u0275\u0275attribute":ta,"\u0275\u0275attributeInterpolate1":la,"\u0275\u0275attributeInterpolate2":ha,"\u0275\u0275attributeInterpolate3":da,"\u0275\u0275attributeInterpolate4":fa,"\u0275\u0275attributeInterpolate5":pa,"\u0275\u0275attributeInterpolate6":ga,"\u0275\u0275attributeInterpolate7":ma,"\u0275\u0275attributeInterpolate8":ya,"\u0275\u0275attributeInterpolateV":va,"\u0275\u0275defineComponent":Pt,"\u0275\u0275defineDirective":Bt,"\u0275\u0275defineInjectable":O,"\u0275\u0275defineInjector":T,"\u0275\u0275defineNgModule":Vt,"\u0275\u0275definePipe":Ht,"\u0275\u0275directiveInject":wa,"\u0275\u0275getFactoryOf":Zn,"\u0275\u0275getInheritedFactory":Xn,"\u0275\u0275inject":dt,"\u0275\u0275injectAttribute":Ca,"\u0275\u0275invalidFactory":Sa,"\u0275\u0275invalidFactoryDep":ft,"\u0275\u0275injectPipeChangeDetectorRef":ld,"\u0275\u0275templateRefExtractor":cd,"\u0275\u0275NgOnChangesFeature":fe,"\u0275\u0275ProvidersFeature":kl,"\u0275\u0275CopyDefinitionFeature":Bs,"\u0275\u0275InheritDefinitionFeature":Ds,"\u0275\u0275nextContext":Ua,"\u0275\u0275namespaceHTML":bn,"\u0275\u0275namespaceMathML":vn,"\u0275\u0275namespaceSVG":yn,"\u0275\u0275enableBindings":Ve,"\u0275\u0275disableBindings":Ue,"\u0275\u0275elementStart":Ta,"\u0275\u0275elementEnd":Ia,"\u0275\u0275element":xa,"\u0275\u0275elementContainerStart":ka,"\u0275\u0275elementContainerEnd":Aa,"\u0275\u0275elementContainer":ja,"\u0275\u0275pureFunction0":yh,"\u0275\u0275pureFunction1":vh,"\u0275\u0275pureFunction2":bh,"\u0275\u0275pureFunction3":_h,"\u0275\u0275pureFunction4":wh,"\u0275\u0275pureFunction5":Ch,"\u0275\u0275pureFunction6":Sh,"\u0275\u0275pureFunction7":Eh,"\u0275\u0275pureFunction8":Oh,"\u0275\u0275pureFunctionV":Th,"\u0275\u0275getCurrentView":Na,"\u0275\u0275restoreView":He,"\u0275\u0275listener":Da,"\u0275\u0275projection":Wa,"\u0275\u0275syntheticHostProperty":mc,"\u0275\u0275syntheticHostListener":Ma,"\u0275\u0275pipeBind1":Ph,"\u0275\u0275pipeBind2":Dh,"\u0275\u0275pipeBind3":Mh,"\u0275\u0275pipeBind4":Fh,"\u0275\u0275pipeBindV":Lh,"\u0275\u0275projectionDef":Ba,"\u0275\u0275hostProperty":gc,"\u0275\u0275property":Ea,"\u0275\u0275propertyInterpolate":Ka,"\u0275\u0275propertyInterpolate1":$a,"\u0275\u0275propertyInterpolate2":Qa,"\u0275\u0275propertyInterpolate3":Ga,"\u0275\u0275propertyInterpolate4":Ya,"\u0275\u0275propertyInterpolate5":Ja,"\u0275\u0275propertyInterpolate6":Za,"\u0275\u0275propertyInterpolate7":Xa,"\u0275\u0275propertyInterpolate8":tu,"\u0275\u0275propertyInterpolateV":eu,"\u0275\u0275pipe":Rh,"\u0275\u0275queryRefresh":Zh,"\u0275\u0275viewQuery":td,"\u0275\u0275staticViewQuery":Xh,"\u0275\u0275staticContentQuery":rd,"\u0275\u0275loadQuery":od,"\u0275\u0275contentQuery":nd,"\u0275\u0275reference":_a,"\u0275\u0275classMap":vu,"\u0275\u0275classMapInterpolate1":Bu,"\u0275\u0275classMapInterpolate2":Hu,"\u0275\u0275classMapInterpolate3":zu,"\u0275\u0275classMapInterpolate4":Wu,"\u0275\u0275classMapInterpolate5":Ku,"\u0275\u0275classMapInterpolate6":$u,"\u0275\u0275classMapInterpolate7":Qu,"\u0275\u0275classMapInterpolate8":Gu,"\u0275\u0275classMapInterpolateV":Yu,"\u0275\u0275styleMap":mu,"\u0275\u0275styleMapInterpolate1":Ju,"\u0275\u0275styleMapInterpolate2":Zu,"\u0275\u0275styleMapInterpolate3":Xu,"\u0275\u0275styleMapInterpolate4":tc,"\u0275\u0275styleMapInterpolate5":ec,"\u0275\u0275styleMapInterpolate6":nc,"\u0275\u0275styleMapInterpolate7":rc,"\u0275\u0275styleMapInterpolate8":ic,"\u0275\u0275styleMapInterpolateV":oc,"\u0275\u0275styleProp":pu,"\u0275\u0275stylePropInterpolate1":sc,"\u0275\u0275stylePropInterpolate2":ac,"\u0275\u0275stylePropInterpolate3":uc,"\u0275\u0275stylePropInterpolate4":cc,"\u0275\u0275stylePropInterpolate5":lc,"\u0275\u0275stylePropInterpolate6":hc,"\u0275\u0275stylePropInterpolate7":dc,"\u0275\u0275stylePropInterpolate8":fc,"\u0275\u0275stylePropInterpolateV":pc,"\u0275\u0275classProp":gu,"\u0275\u0275advance":bi,"\u0275\u0275template":ba,"\u0275\u0275text":ju,"\u0275\u0275textInterpolate":Nu,"\u0275\u0275textInterpolate1":Ru,"\u0275\u0275textInterpolate2":Pu,"\u0275\u0275textInterpolate3":Du,"\u0275\u0275textInterpolate4":Mu,"\u0275\u0275textInterpolate5":Fu,"\u0275\u0275textInterpolate6":Lu,"\u0275\u0275textInterpolate7":Vu,"\u0275\u0275textInterpolate8":Uu,"\u0275\u0275textInterpolateV":qu,"\u0275\u0275i18n":yl,"\u0275\u0275i18nAttributes":vl,"\u0275\u0275i18nExp":bl,"\u0275\u0275i18nStart":gl,"\u0275\u0275i18nEnd":ml,"\u0275\u0275i18nApply":_l,"\u0275\u0275i18nPostprocess":wl,"\u0275\u0275resolveWindow":ae,"\u0275\u0275resolveDocument":ue,"\u0275\u0275resolveBody":ce,"\u0275\u0275setComponentScope":Dt,"\u0275\u0275setNgModuleScope":Ut,"\u0275\u0275sanitizeHtml":Qr,"\u0275\u0275sanitizeStyle":Gr,"\u0275\u0275sanitizeResourceUrl":Jr,"\u0275\u0275sanitizeScript":Zr,"\u0275\u0275sanitizeUrl":Yr,"\u0275\u0275sanitizeUrlOrResourceUrl":Xr}))();const dd=[],fd=[];let pd=!1;function gd(t){return Array.isArray(t)?t.every(gd):!!V(t)}function md(t,e){const n=wt(e.declarations||dd),r=vd(t);n.forEach(e=>{e.hasOwnProperty(Q)?yd(zt(e),r):e.hasOwnProperty(G)||e.hasOwnProperty(Y)||(e.ngSelectorScope=t)})}function yd(t,e){t.directiveDefs=()=>Array.from(e.compilation.directives).map(t=>t.hasOwnProperty(Q)?zt(t):Wt(t)).filter(t=>!!t),t.pipeDefs=()=>Array.from(e.compilation.pipes).map(t=>Kt(t)),t.schemas=e.schemas,t.tView=null}function vd(t){if(!_d(t))throw new Error(t.name+" does not have a module def (\u0275mod property)");const e=Qt(t);if(null!==e.transitiveCompileScopes)return e.transitiveCompileScopes;const n={schemas:e.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return le(e.imports).forEach(t=>{const e=t;if(!_d(e))throw new Error(`Importing ${e.name} which does not have a \u0275mod property`);const r=vd(e);r.exported.directives.forEach(t=>n.compilation.directives.add(t)),r.exported.pipes.forEach(t=>n.compilation.pipes.add(t))}),le(e.declarations).forEach(t=>{Kt(t)?n.compilation.pipes.add(t):n.compilation.directives.add(t)}),le(e.exports).forEach(t=>{const e=t;if(_d(e)){const t=vd(e);t.exported.directives.forEach(t=>{n.compilation.directives.add(t),n.exported.directives.add(t)}),t.exported.pipes.forEach(t=>{n.compilation.pipes.add(t),n.exported.pipes.add(t)})}else Kt(e)?n.exported.pipes.add(e):n.exported.directives.add(e)}),e.transitiveCompileScopes=n,n}function bd(t){return function(t){return void 0!==t.ngModule}(t)?t.ngModule:t}function _d(t){return!!Qt(t)}let wd=0;function Cd(t,e){let n=null;Ed(t,e||{}),Object.defineProperty(t,G,{get:()=>{if(null===n){const r=Sd(t,e||{});n=$().compileDirective(hd,r.sourceMapUrl,r.metadata)}return n},configurable:!1})}function Sd(t,e){const n=t&&t.name,r=`ng:///${n}/\u0275dir.js`,i=$(),o=Td(t,e);return o.typeSourceSpan=i.createParseSourceSpan("Directive",n,r),o.usesInheritance&&Id(t),{metadata:o,sourceMapUrl:r}}function Ed(t,e){let n=null;Object.defineProperty(t,X,{get:()=>{if(null===n){const r=Sd(t,e),i=$();n=i.compileFactory(hd,`ng:///${t.name}/\u0275fac.js`,Object.assign(Object.assign({},r.metadata),{injectFn:"directiveInject",target:i.R3FactoryTarget.Directive}))}return n},configurable:!1})}function Od(t){return Object.getPrototypeOf(t.prototype)===Object.prototype}function Td(t,e){const n=is(),r=n.ownPropMetadata(t);return{name:t.name,type:t,typeArgumentCount:0,selector:void 0!==e.selector?e.selector:null,deps:os(t),host:e.host||jt,propMetadata:r,inputs:e.inputs||Nt,outputs:e.outputs||Nt,queries:kd(t,r,Ad),lifecycle:{usesOnChanges:n.hasLifecycleHook(t,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!Od(t),exportAs:(i=e.exportAs,void 0===i?null:Rd(i)),providers:e.providers||null,viewQueries:kd(t,r,jd)};var i}function Id(t){const e=Object.prototype;let n=Object.getPrototypeOf(t.prototype).constructor;for(;n&&n!==e;)Wt(n)||zt(n)||!Dd(n)||Cd(n,null),n=Object.getPrototypeOf(n)}function xd(t,e){return{propertyName:t,predicate:(n=e.selector,"string"==typeof n?Rd(n):V(n)),descendants:e.descendants,first:e.first,read:e.read?e.read:null,static:!!e.static};var n}function kd(t,e,n){const r=[];for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];o.forEach(e=>{if(n(e)){if(!e.selector)throw new Error(`Can't construct a query for the property "${i}" of "${oe(t)}" since the query selector wasn't defined.`);if(o.some(Nd))throw new Error("Cannot combine @Input decorators with query decorators");r.push(xd(i,e))}})}return r}function Ad(t){const e=t.ngMetadataName;return"ContentChild"===e||"ContentChildren"===e}function jd(t){const e=t.ngMetadataName;return"ViewChild"===e||"ViewChildren"===e}function Nd(t){return"Input"===t.ngMetadataName}function Rd(t){return t.split(",").map(t=>t.trim())}const Pd=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function Dd(t){const e=is();if(Pd.some(n=>e.hasLifecycleHook(t,n)))return!0;const n=e.propMetadata(t);for(const r in n){const t=n[r];for(let e=0;e<t.length;e++){const n=t[e],r=n.ngMetadataName;if(Nd(n)||Ad(n)||jd(n)||"Output"===r||"HostBinding"===r||"HostListener"===r)return!0}}return!1}const Md=d("Directive",(t={})=>t,void 0,void 0,(t,e)=>Bd(t,e)),Fd=d("Component",(t={})=>Object.assign({changeDetection:kt.Default},t),Md,void 0,(t,e)=>qd(t,e)),Ld=g("Input",t=>({bindingPropertyName:t})),Vd=g("Output",t=>({bindingPropertyName:t})),Ud=g("HostListener",(t,e)=>({eventName:t,args:e})),qd=function(t,e){let n=null;!function(t,e){js(e)&&(ks.set(t,e),As.add(t))}(t,e),Ed(t,e),Object.defineProperty(t,Q,{get:()=>{if(null===n){const r=$();if(js(e)){const n=[`Component '${t.name}' is not resolved:`];throw e.templateUrl&&n.push(" - templateUrl: "+e.templateUrl),e.styleUrls&&e.styleUrls.length&&n.push(" - styleUrls: "+JSON.stringify(e.styleUrls)),n.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(n.join("\n"))}const i=null;let o=e.preserveWhitespaces;void 0===o&&(o=null!==i&&void 0!==i.preserveWhitespaces&&i.preserveWhitespaces);let s=e.encapsulation;void 0===s&&(s=null!==i&&void 0!==i.defaultEncapsulation?i.defaultEncapsulation:At.Emulated);const a=e.templateUrl||`ng:///${t.name}/template.html`,u=Object.assign(Object.assign({},Td(t,e)),{typeSourceSpan:r.createParseSourceSpan("Component",t.name,a),template:e.template||"",preserveWhitespaces:o,styles:e.styles||Nt,animations:e.animations,directives:[],changeDetection:e.changeDetection,pipes:new Map,encapsulation:s,interpolation:e.interpolation,viewProviders:e.viewProviders||null});wd++;try{u.usesInheritance&&Id(t),n=r.compileComponent(hd,a,u)}finally{wd--}if(0===wd&&function(){if(!pd){pd=!0;try{for(let t=fd.length-1;t>=0;t--){const{moduleType:e,ngModule:n}=fd[t];n.declarations&&n.declarations.every(gd)&&(fd.splice(t,1),md(e,n))}}finally{pd=!1}}}(),void 0!==t.ngSelectorScope){const e=vd(t.ngSelectorScope);yd(n,e)}}return n},configurable:!1})},Bd=Cd,Hd=d("NgModule",t=>t,void 0,void 0,(t,e)=>zd(t,e)),zd=function(t,e={}){!function(t,e,n=!1){const r=wt(e.declarations||dd);let i=null;Object.defineProperty(t,J,{configurable:!0,get:()=>(null===i&&(i=$().compileNgModule(hd,`ng:///${t.name}/\u0275mod.js`,{type:t,bootstrap:wt(e.bootstrap||dd).map(V),declarations:r.map(V),imports:wt(e.imports||dd).map(V).map(bd),exports:wt(e.exports||dd).map(V).map(bd),schemas:e.schemas?wt(e.schemas):null,id:e.id||null}),i.schemas||(i.schemas=[])),i)});let o=null;Object.defineProperty(t,j,{get:()=>{if(null===o){const n={name:t.name,type:t,deps:os(t),providers:e.providers||dd,imports:[(e.imports||dd).map(V),(e.exports||dd).map(V)]};o=$().compileInjector(hd,`ng:///${t.name}/\u0275inj.js`,n)}return o},configurable:!1})}(t,e),function(t,e){fd.push({moduleType:t,ngModule:e})}(t,e)},Wd=new et("Application Initializer");let Kd=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ra(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(dt(Wd,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const $d=new et("AppId"),Qd={provide:$d,useFactory:function(){return`${Gd()}${Gd()}${Gd()}`},deps:[]};function Gd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Yd=new et("Platform Initializer"),Jd=new et("Platform ID"),Zd=new et("appBootstrapListener");let Xd=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const tf=new et("LocaleId"),ef=new et("DefaultCurrencyCode");class nf{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const rf=function(t){return new mh(t)},of=rf,sf=function(t){return Promise.resolve(rf(t))},af=function(t){const e=rf(t),n=le(Qt(t).declarations).reduce((t,e)=>{const n=zt(e);return n&&t.push(new hh(n)),t},[]);return new nf(e,n)},uf=af,cf=function(t){return Promise.resolve(af(t))};let lf=(()=>{class t{constructor(){this.compileModuleSync=of,this.compileModuleAsync=sf,this.compileModuleAndAllComponentsSync=uf,this.compileModuleAndAllComponentsAsync=cf}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const hf=(()=>Promise.resolve(0))();function df(t){"undefined"==typeof Zone?hf.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ff{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qh(!1),this.onMicrotaskEmpty=new qh(!1),this.onStable=new qh(!1),this.onError=new qh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=W.requestAnimationFrame,e=W.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(W,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yf(t),mf(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yf(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return vf(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),bf(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return vf(t),e.invoke(r,i,o,s,a)}finally{bf(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,yf(t),mf(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ff.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ff.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,gf,pf,pf);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function pf(){}const gf={};function mf(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function vf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bf(t){t._nesting--,mf(t)}class _f{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qh,this.onMicrotaskEmpty=new qh,this.onStable=new qh,this.onError=new qh}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let wf=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ff.assertNotInAngularZone(),df(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())df(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(dt(ff))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),Cf=(()=>{class t{constructor(){this._applications=new Map,Tf.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tf.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class Sf{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ef(t){Tf=t}let Of,Tf=new Sf;const If=new et("AllowMultipleToken");class xf{constructor(t,e){this.name=t,this.token=e}}function kf(t,e,n=[]){const r="Platform: "+e,i=new et(r);return(e=[])=>{let o=Af();if(!o||o.injector.get(If,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:fs,useValue:"platform"});!function(t){if(Of&&!Of.destroyed&&!Of.injector.get(If,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Of=t.get(jf);const e=t.get(Yd,null);e&&e.forEach(t=>t())}(Is.create({providers:t,name:r}))}return function(t){const e=Af();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Af(){return Of&&!Of.destroyed?Of:null}let jf=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new _f:("zone.js"===t?void 0:t)||new ff({enableLongStackTrace:_r(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:ff,useValue:n}];return n.run(()=>{const e=Is.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(rr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Pf(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Ra(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Kd);return t.runInitializers(),t.donePromise.then(()=>(jc(i.injector.get(tf,Ic)||Ic),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nf({},e);return function(t,e,n){const r=new mh(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Rf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${D(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(dt(Is))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Nf(t,e){return Array.isArray(e)?e.reduce(Nf,t):Object.assign(Object.assign({},t),e)}let Rf=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=_r(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ff.assertNotInAngularZone(),df(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ff.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Al?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(vt),i=n.create(Is.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(wf,null);return o&&i.injector.get(Cf).registerApplication(i.location.nativeElement,o),this._loadComponent(i),_r()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Pf(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Zd,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Pf(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(dt(ff),dt(Xd),dt(Is),dt(rr),dt(Nl),dt(Kd))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Pf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Df{}class Mf{}const Ff={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Lf=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ff}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Vf(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vf(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(dt(lf),dt(Mf,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Vf(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Uf=function(t){return null},qf=kf(null,"core",[{provide:Jd,useValue:"unknown"},{provide:jf,deps:[Is]},{provide:Cf,deps:[]},{provide:Xd,deps:[]}]),Bf=[{provide:Rf,useClass:Rf,deps:[ff,Xd,Is,rr,Nl,Kd]},{provide:lh,deps:[ff],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Kd,useClass:Kd,deps:[[new y,Wd]]},{provide:lf,useClass:lf,deps:[]},Qd,{provide:Zl,useFactory:function(){return eh},deps:[]},{provide:Xl,useFactory:function(){return nh},deps:[]},{provide:tf,useFactory:function(t){return jc(t=t||"undefined"!=typeof $localize&&$localize.locale||Ic),t},deps:[[new m(tf),new y,new b]]},{provide:ef,useValue:"USD"}];let Hf=(()=>{class t{constructor(t){}}return t.\u0275mod=Vt({type:t}),t.\u0275inj=T({factory:function(e){return new(e||t)(dt(Rf))},providers:Bf}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return I})),n.d(e,"c",(function(){return U})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return D})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return q})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return d})),n.d(e,"m",(function(){return W})),n.d(e,"n",(function(){return Y})),n.d(e,"o",(function(){return g})),n.d(e,"p",(function(){return P})),n.d(e,"q",(function(){return v})),n.d(e,"r",(function(){return b})),n.d(e,"s",(function(){return w})),n.d(e,"t",(function(){return F})),n.d(e,"u",(function(){return C})),n.d(e,"v",(function(){return m})),n.d(e,"w",(function(){return y})),n.d(e,"x",(function(){return E})),n.d(e,"y",(function(){return _})),n.d(e,"z",(function(){return O})),n.d(e,"A",(function(){return S})),n.d(e,"B",(function(){return R})),n.d(e,"C",(function(){return A})),n.d(e,"D",(function(){return L})),n.d(e,"E",(function(){return V})),n.d(e,"F",(function(){return M})),n.d(e,"G",(function(){return G})),n.d(e,"H",(function(){return Q})),n.d(e,"I",(function(){return j})),n.d(e,"J",(function(){return z})),n.d(e,"K",(function(){return K})),n.d(e,"L",(function(){return $}));var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){return u(t).replace(/\./g,"")},l=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function C(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S(){return g().indexOf("MSAppHost/")>=0}function E(){return!1}function O(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var T=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return Object(r.c)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new T(i,a,r);return u},t}();function x(t,e){return t.replace(k,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var k=/\{\$([^}]+)}/g;function A(t){return JSON.parse(t)}function j(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=A(l(o[0])||""),n=A(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function H(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e){return t+" failed: "+e+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e)+"must be a valid function.")}function $(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return C}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.u("angularfire2.app.options"),b=new u.u("angularfire2.app.nameOrConfig"),_=new u.V("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.bb)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:w,deps:[v,u.F,[new u.G,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.U.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)(u.Yb(u.I))},providers:[O]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.q)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.w)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.30",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyBiKlo7xI1716c8AvOdV7mgrmLTXSuSuN4",authDomain:"anime-reviews-4a3ca.firebaseapp.com",projectId:"anime-reviews-4a3ca",storageBucket:"anime-reviews-4a3ca.appspot.com",messagingSenderId:"90662178572",appId:"1:90662178572:web:8a638969eb58ff0236c329",measurementId:"G-R6KXZ2RWRK"};let o=null;function s(){return o}const a=new r.u("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Nb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Yb)(h)}const l=new r.u("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a))},t.\u0275prov=Object(r.Nb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(r.Yb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Nb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Yb)(a).location;return new _(Object(r.Yb)(u),e&&e.origin||"")}const b=new r.u("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(u),r.Yb(b,8))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(u),r.Yb(b,8))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.p,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(y),r.Yb(u))},t.normalizeQueryParams=m,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Nb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new C(Object(r.Yb)(y),Object(r.Yb)(u))}function E(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.sb;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.z))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.bb)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.W),r.Rb(r.R),r.Rb(r.x))},t.\u0275dir=r.Mb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.W),r.Rb(r.R))},t.\u0275dir=r.Mb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.Bb)(e)}'.`)}let D=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=M){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.y))},t.\u0275pipe=r.Qb({name:"keyvalue",type:t,pure:!1}),t})();function M(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),o=String(r);return i==o?0:i<o?-1:1}let F=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:x}]}),t})(),L=(()=>{class t{}return t.\u0275prov=Object(r.Nb)({token:t,providedIn:"root",factory:()=>new V(Object(r.Yb)(a),window,Object(r.Yb)(r.o))}),t})();class V{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=U(this.window.history)||U(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function U(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new q,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=H||(H=document.querySelector("base"),H)?H.getAttribute("href"):null;return null==e?null:(n=e,B||(B=document.createElement("a")),B.setAttribute("href",n),"/"===B.pathname.charAt(0)?B.pathname:"/"+B.pathname);var n}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let B,H=null;const z=new r.u("TRANSITION_ID"),W=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[z,a,r.v],multi:!0}];class K{static init(){Object(r.db)(new K)}addToWindow(t){r.ub.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ub.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ub.getAllAngularRootElements=()=>t.getAllRootElements(),r.ub.frameworkStabilizers||(r.ub.frameworkStabilizers=[]),r.ub.frameworkStabilizers.push(t=>{const e=r.ub.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const $=new r.u("EventManagerPlugins");let Q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb($),r.Yb(r.F))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();class G{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Y=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),J=(()=>{class t extends Y{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();const Z={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.X.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.X.Native:case r.X.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Q),r.Yb(J),r.Yb(r.c))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Z[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Z[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Z[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.M.DashCase?t.style.setProperty(e,n,i&r.M.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.M.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.X.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=tt(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends G{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends G{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();const dt=[{provide:r.I,useValue:"browser"},{provide:r.J,useValue:function(){q.makeCurrent(),K.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.Ab)(document),document},deps:[]}],ft=Object(r.Y)(r.cb,"browser",dt),pt=[[],{provide:r.fb,useValue:"root"},{provide:r.o,useFactory:function(){return new r.o},deps:[]},{provide:$,useClass:st,multi:!0,deps:[a,r.F,r.I]},{provide:$,useClass:ht,multi:!0,deps:[a]},[],{provide:nt,useClass:nt,deps:[Q,J,r.c]},{provide:r.L,useExisting:nt},{provide:Y,useExisting:J},{provide:J,useClass:J,deps:[a]},{provide:r.S,useClass:r.S,deps:[r.F]},{provide:Q,useClass:Q,deps:[$,r.F]},[]];let gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:z,useExisting:r.c},W]}}}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)(r.Yb(t,12))},providers:pt,imports:[F,r.f]}),t})();"undefined"!=typeof window&&window;var mt=n("LRne"),yt=n("Cfvw"),vt=n("XNiG"),bt=n("9ppp");class _t extends vt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new bt.a;return this._value}next(t){super.next(this._value=t)}}var wt=n("z+Ro"),Ct=n("DH7j"),St=n("7o/Q");class Et extends St.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ot extends St.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Tt=n("SeVD"),It=n("HDdC");function xt(t,e,n,r,i=new Ot(t,n,r)){if(!i.closed)return e instanceof It.a?e.subscribe(i):Object(Tt.a)(e)(i)}var kt=n("yCtX");const At={};class jt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Nt(t,this.resultSelector))}}class Nt extends Et{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(At),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(xt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===At?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Rt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Pt=n("EY2u");function Dt(t){return new It.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(yt.a)(n):Object(Pt.b)()).subscribe(e)})}var Mt=n("lJxs"),Ft=n("bHdf");function Lt(){return Object(Ft.a)(1)}function Vt(t,e){return function(n){return n.lift(new Ut(t,e))}}class Ut{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new qt(t,this.predicate,this.thisArg))}}class qt extends St.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Bt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ht(t){return function(e){return 0===t?Object(Pt.b)():e.lift(new zt(t))}}class zt{constructor(t){if(this.total=t,this.total<0)throw new Bt}call(t,e){return e.subscribe(new Wt(t,this.total))}}class Wt extends St.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Kt(t=Gt){return e=>e.lift(new $t(t))}class $t{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Qt(t,this.errorFactory))}}class Qt extends St.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(qb){t=qb}this.destination.error(t)}}}function Gt(){return new Rt}function Yt(t=null){return e=>e.lift(new Jt(t))}class Jt{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Zt(t,this.defaultValue))}}class Zt extends St.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Xt=n("SpAZ"),te=n("zx2A");function ee(t,e){return"function"==typeof e?n=>n.pipe(ee((n,r)=>Object(yt.a)(t(n,r)).pipe(Object(Mt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ne(t))}class ne{constructor(t){this.project=t}call(t,e){return e.subscribe(new re(t,this.project))}}class re extends te.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new te.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(te.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function ie(t){return e=>0===t?Object(Pt.b)():e.lift(new oe(t))}class oe{constructor(t){if(this.total=t,this.total<0)throw new Bt}call(t,e){return e.subscribe(new se(t,this.total))}}class se extends St.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ae(...t){return Lt()(Object(mt.a)(...t))}function ue(...t){const e=t[t.length-1];return Object(wt.a)(e)?(t.pop(),n=>ae(t,n,e)):e=>ae(t,e)}function ce(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new le(t,e,n))}}class le{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new he(t,this.accumulator,this.seed,this.hasSeed))}}class he extends St.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function de(t){return function(e){const n=new fe(t),r=e.lift(n);return n.caught=r}}class fe{constructor(t){this.selector=t}call(t,e){return e.subscribe(new pe(t,this.selector,this.caught))}}class pe extends te.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new te.a(this);this.add(r);const i=Object(te.c)(n,r);i!==r&&this.add(i)}}}var ge=n("5+tZ");function me(t,e){return Object(ge.a)(t,e,1)}function ye(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vt((e,n)=>t(e,n,r)):Xt.a,ie(1),n?Yt(e):Kt(()=>new Rt))}var ve=n("vkgz"),be=n("quSY");class _e{constructor(t){this.callback=t}call(t,e){return e.subscribe(new we(t,this.callback))}}class we extends St.a{constructor(t,e){super(t),this.add(new be.a(e))}}class Ce{constructor(t,e){this.id=t,this.url=e}}class Se extends Ce{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ee extends Ce{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oe extends Ce{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Te extends Ce{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ie extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Ce{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ae extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Re{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pe{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class De{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ve="primary";class Ue{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qe(t){return new Ue(t)}function Be(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function He(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!We(t[i],e[i]))return!1;return!0}function We(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ke(t){return Array.prototype.concat.apply([],t)}function $e(t){return t.length>0?t[t.length-1]:null}function Qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ge(t){return Object(r.wb)(t)?t:Object(r.xb)(t)?Object(yt.a)(Promise.resolve(t)):Object(mt.a)(t)}function Ye(t,e,n){return n?function(t,e){return ze(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!tn(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>We(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!tn(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!tn(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!tn(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class Je{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return on.serialize(this)}}class Ze{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Qe(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sn(this)}}class Xe{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qe(this.parameters)),this._parameterMap}toString(){return dn(this)}}function tn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function en(t,e){let n=[];return Qe(t.children,(t,r)=>{r===Ve&&(n=n.concat(e(t,r)))}),Qe(t.children,(t,r)=>{r!==Ve&&(n=n.concat(e(t,r)))}),n}class nn{}class rn{parse(t){const e=new yn(t);return new Je(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return sn(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return Qe(e.children,(e,n)=>{n!==Ve&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=en(e,(n,r)=>r===Ve?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${sn(e)}/${n[0]}`:`${sn(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${un(e)}=${un(t)}`).join("&"):`${un(e)}=${un(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const on=new rn;function sn(t){return t.segments.map(t=>dn(t)).join("/")}function an(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function un(t){return an(t).replace(/%3B/gi,";")}function cn(t){return an(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ln(t){return decodeURIComponent(t)}function hn(t){return ln(t.replace(/\+/g,"%20"))}function dn(t){return`${cn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${cn(t)}=${cn(e[t])}`).join("")}`;var e}const fn=/^[^\/()?;=#]+/;function pn(t){const e=t.match(fn);return e?e[0]:""}const gn=/^[^=?&#]+/,mn=/^[^?&#]+/;class yn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ze(t,e)),n}parseSegment(){const t=pn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Xe(ln(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=pn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=pn(this.remaining);t&&(n=t,this.capture(n))}t[ln(e)]=ln(n)}parseQueryParam(t){const e=function(t){const e=t.match(gn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(mn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=hn(e),i=hn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=pn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ve);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ze([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class vn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=bn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=bn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=_n(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return _n(t,this._root).map(t=>t.value)}}function bn(t,e){if(t===e.value)return e;for(const n of e.children){const e=bn(t,n);if(e)return e}return null}function _n(t,e){if(t===e.value)return[e];for(const n of e.children){const r=_n(t,n);if(r.length)return r.unshift(e),r}return[]}class wn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Cn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Sn extends vn{constructor(t,e){super(t),this.snapshot=e,kn(this,t)}toString(){return this.snapshot.toString()}}function En(t,e){const n=function(t,e){const n=new In([],{},{},"",{},Ve,e,null,t.root,-1,{});return new xn("",new wn(n,[]))}(t,e),r=new _t([new Xe("",{})]),i=new _t({}),o=new _t({}),s=new _t({}),a=new _t(""),u=new On(r,i,s,a,o,Ve,e,n.root);return u.snapshot=n.root,new Sn(new wn(u,[]),n)}class On{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Mt.a)(t=>qe(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Mt.a)(t=>qe(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class In{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xn extends vn{constructor(t,e){super(e),this.url=t,kn(this,e)}toString(){return An(this._root)}}function kn(t,e){e.value._routerState=t,e.children.forEach(e=>kn(t,e))}function An(t){const e=t.children.length>0?` { ${t.children.map(An).join(", ")} } `:"";return`${t.value}${e}`}function jn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Nn(t,e){return ze(t.params,e.params)&&function(t,e){return tn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Nn(t.parent,e.parent))}function Rn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pn(t){return"object"==typeof t&&null!=t&&t.outlets}function Dn(t,e,n,r,i){let o={};return r&&Qe(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Je(n.root===t?e:function t(e,n,r){const i={};return Qe(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Ze(e.segments,i)}(n.root,t,e),o,i)}class Mn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Pn);if(r&&r!==$e(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ln(t,e,n){if(t||(t=new Ze([],{})),0===t.segments.length&&t.hasChildren())return Vn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Pn(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Hn(a,u,e))return o;r+=2}else{if(!Hn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ze(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ze(t.segments.slice(r.pathIndex),t.children),Vn(e,0,i)}return r.match&&0===i.length?new Ze(t.segments,{}):r.match&&!t.hasChildren()?Un(t,e,n):r.match?Vn(t,0,i):Un(t,e,n)}function Vn(t,e,n){if(0===n.length)return new Ze(t.segments,{});{const r=function(t){return Pn(t[0])?t[0].outlets:{[Ve]:t}}(n),i={};return Qe(r,(n,r)=>{null!==n&&(i[r]=Ln(t.children[r],e,n))}),Qe(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ze(t.segments,i)}}function Un(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Pn(o)){const t=qn(o.outlets);return new Ze(r,t)}if(0===i&&Rn(n[0])){r.push(new Xe(t.segments[e].path,n[0])),i++;continue}const s=Pn(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Rn(a)?(r.push(new Xe(s,Bn(a))),i+=2):(r.push(new Xe(s,{})),i++)}return new Ze(r,{})}function qn(t){const e={};return Qe(t,(t,n)=>{null!==t&&(e[n]=Un(new Ze([],{}),0,t))}),e}function Bn(t){const e={};return Qe(t,(t,n)=>e[n]=""+t),e}function Hn(t,e,n){return t==n.path&&ze(e,n.parameters)}class zn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),jn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Cn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Qe(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Cn(t),i=t.value.component?n.children:e;Qe(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Cn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Fe(t.value.snapshot))}),t.children.length&&this.forwardEvent(new De(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(jn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Wn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Wn(t){jn(t.value),t.children.forEach(Wn)}class Kn{constructor(t,e){this.routes=t,this.module=e}}function $n(t){return"function"==typeof t}function Qn(t){return t instanceof Je}const Gn=Symbol("INITIAL_VALUE");function Yn(){return ee(t=>function(...t){let e=void 0,n=void 0;return Object(wt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Ct.a)(t[0])&&(t=t[0]),Object(kt.a)(t,n).lift(new jt(e))}(...t.map(t=>t.pipe(ie(1),ue(Gn)))).pipe(ce((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Gn)return t;if(r===Gn&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Qn(r))return r}return t},t)},Gn),Vt(t=>t!==Gn),Object(Mt.a)(t=>Qn(t)?t:!0===t),ie(1)))}class Jn{constructor(t){this.segmentGroup=t||null}}class Zn{constructor(t){this.urlTree=t}}function Xn(t){return new It.a(e=>e.error(new Jn(t)))}function tr(t){return new It.a(e=>e.error(new Zn(t)))}function er(t){return new It.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class nr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.D)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Ve).pipe(Object(Mt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(de(t=>{if(t instanceof Zn)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Jn)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ve).pipe(Object(Mt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(de(t=>{if(t instanceof Jn)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ze([],{[Ve]:t}):t;return new Je(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Mt.a)(t=>new Ze([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(mt.a)({});const n=[],r=[],i={};return Qe(t,(t,o)=>{const s=e(o,t).pipe(Object(Mt.a)(t=>i[o]=t));o===Ve?n.push(s):r.push(s)}),mt.a.apply(null,n.concat(r)).pipe(Lt(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vt((e,n)=>t(e,n,r)):Xt.a,Ht(1),n?Yt(e):Kt(()=>new Rt))}(),Object(Mt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(mt.a)(...n).pipe(me(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(de(t=>{if(t instanceof Jn)return Object(mt.a)(null);throw t}))),ye(t=>!!t),de((t,n)=>{if(t instanceof Rt||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(mt.a)(new Ze([],{}));throw new Jn(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return sr(r)!==o?Xn(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Xn(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?tr(i):this.lineralizeSegments(n,i).pipe(Object(ge.a)(n=>{const i=new Ze(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=rr(e,r,i);if(!s)return Xn(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?tr(l):this.lineralizeSegments(r,l).pipe(Object(ge.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Mt.a)(t=>(n._loadedConfig=t,new Ze(r,{})))):Object(mt.a)(new Ze(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=rr(e,n,r);if(!i)return Xn(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(ge.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>or(t,e,n)&&sr(n)!==Ve)}(t,n,r)?{segmentGroup:ir(new Ze(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&sr(r)!==Ve&&(n[sr(r)]=new Ze([],{}));return n}(r,new Ze(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>or(t,e,n))}(t,n,r)?{segmentGroup:ir(new Ze(t.segments,function(t,e,n,r){const i={};for(const o of n)or(t,e,o)&&!r[sr(o)]&&(i[sr(o)]=new Ze([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Mt.a)(t=>new Ze(o,t))):0===r.length&&0===s.length?Object(mt.a)(new Ze(o,{})):this.expandSegment(n,i,r,s,Ve,!0).pipe(Object(Mt.a)(t=>new Ze(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(mt.a)(new Kn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(mt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ge.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Mt.a)(t=>(e._loadedConfig=t,t))):function(t){return new It.a(e=>e.error(Be(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(mt.a)(new Kn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(mt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&$n(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!$n(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ge(o)});return Object(mt.a)(i).pipe(Yn(),Object(ve.a)(t=>{if(!Qn(t))return;const e=Be(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Mt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(mt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return er(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Je(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Qe(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Qe(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ze(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function rr(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||He)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function ir(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ze(t.segments.concat(e.segments),e.children)}return t}function or(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function sr(t){return t.outlet||Ve}class ar{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ur{constructor(t,e){this.component=t,this.route=e}}function cr(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Cn(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!tn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!tn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nn(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Nn(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new ar(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new ur(u.outlet.component,a))}else a&&hr(n,u,o),o.canActivateChecks.push(new ar(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),Qe(s,(t,e)=>hr(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function lr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function hr(t,e,n){const r=Cn(t),i=t.value;Qe(r,(t,r)=>{hr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ur(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function dr(t,e){return null!==t&&e&&e(new Me(t)),Object(mt.a)(!0)}function fr(t,e){return null!==t&&e&&e(new Pe(t)),Object(mt.a)(!0)}function pr(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(mt.a)(!0);const i=r.map(r=>Dt(()=>{const i=lr(r,e,n);let o;if(function(t){return t&&$n(t.canActivate)}(i))o=Ge(i.canActivate(e,t));else{if(!$n(i))throw new Error("Invalid CanActivate guard");o=Ge(i(e,t))}return o.pipe(ye())}));return Object(mt.a)(i).pipe(Yn())}function gr(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Dt(()=>{const i=e.guards.map(i=>{const o=lr(i,e.node,n);let s;if(function(t){return t&&$n(t.canActivateChild)}(o))s=Ge(o.canActivateChild(r,t));else{if(!$n(o))throw new Error("Invalid CanActivateChild guard");s=Ge(o(r,t))}return s.pipe(ye())});return Object(mt.a)(i).pipe(Yn())}));return Object(mt.a)(i).pipe(Yn())}class mr{}class yr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=_r(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ve),n=new In([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ve,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wn(n,e),i=new xn(this.url,r);return this.inheritParamsAndData(i._root),Object(mt.a)(i)}catch(qb){return new It.a(e=>e.error(qb))}}inheritParamsAndData(t){const e=t.value,n=Tn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=en(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Ve?-1:e.value.outlet===Ve?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(qb){if(!(qb instanceof mr))throw qb}if(this.noLeftoversInUrl(e,n,r))return[];throw new mr}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new mr;if((t.outlet||Ve)!==r)throw new mr;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?$e(n).parameters:{};i=new In(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sr(t),r,t.component,t,vr(e),br(e)+n.length,Er(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new mr;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||He)(n,t,e);if(!r)throw new mr;const i={};Qe(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new In(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sr(t),r,t.component,t,vr(e),br(e)+o.length,Er(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=_r(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new wn(i,t)]}if(0===a.length&&0===c.length)return[new wn(i,[])];const l=this.processSegment(a,u,c,Ve);return[new wn(i,l)]}}function vr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function br(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function _r(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>wr(t,e,n)&&Cr(n)!==Ve)}(t,n,r)){const i=new Ze(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Cr(o)!==Ve){const n=new Ze([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Cr(o)]=n}return i}(t,e,r,new Ze(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>wr(t,e,n))}(t,n,r)){const o=new Ze(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(wr(t,n,a)&&!i[Cr(a)]){const n=new Ze([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Cr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ze(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function wr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Cr(t){return t.outlet||Ve}function Sr(t){return t.data||{}}function Er(t){return t.resolve||{}}function Or(t){return function(e){return e.pipe(ee(e=>{const n=t(e);return n?Object(yt.a)(n).pipe(Object(Mt.a)(()=>e)):Object(yt.a)([e])}))}}class Tr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let Ir=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Lb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Sb(0,"router-outlet")},directives:function(){return[qr]},encapsulation:2}),t})();function xr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];kr(r,Ar(e,r))}}function kr(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Ve)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&xr(t.children,e)}function Ar(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function jr(t){const e=t.children&&t.children.map(jr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ve&&(n.component=Ir),n}const Nr=new r.u("ROUTES");class Rr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Mt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Kn(Ke(r.injector.get(Nr)).map(jr),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(yt.a)(this.loader.load(t)):Ge(t()).pipe(Object(ge.a)(t=>t instanceof r.B?Object(mt.a)(t):Object(yt.a)(this.compiler.compileModuleAsync(t))))}}class Pr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dr,this.attachRef=null}}class Dr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Pr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Mr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Fr(t){throw t}function Lr(t,e,n){return e.parse("/")}function Vr(t,e){return Object(mt.a)(null)}let Ur=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new vt.a,this.errorHandler=Fr,this.malformedUriErrorHandler=Lr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Vr,afterPreactivation:Vr},this.urlHandlingStrategy=new Mr,this.routeReuseStrategy=new Tr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.D),this.console=o.get(r.eb);const c=o.get(r.F);this.isNgZoneEnabled=c instanceof r.F,this.resetConfig(u),this.currentUrlTree=new Je(new Ze([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rr(s,a,t=>this.triggerEvent(new Ne(t)),t=>this.triggerEvent(new Re(t))),this.routerState=En(this.currentUrlTree,this.rootComponentType),this.transitions=new _t({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Vt(t=>0!==t.id),Object(Mt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),ee(t=>{let n=!1,r=!1;return Object(mt.a)(t).pipe(Object(ve.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ee(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(mt.a)(t).pipe(ee(t=>{const n=this.transitions.getValue();return e.next(new Se(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Pt.a:[t]}),ee(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(ee(t=>function(t,e,n,r,i){return new nr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Mt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(ve.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(ge.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new yr(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Mt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ve.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(ve.a)(t=>{const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Se(n,this.serializeUrl(r),i,o);e.next(a);const u=En(r,this.rootComponentType).snapshot;return Object(mt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Pt.a}),Or(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ve.a)(t=>{const e=new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Mt.a)(t=>Object.assign(Object.assign({},t),{guards:cr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(ge.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(mt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(yt.a)(t).pipe(Object(ge.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(mt.a)(!0);const s=o.map(o=>{const s=lr(o,e,i);let a;if(function(t){return t&&$n(t.canDeactivate)}(s))a=Ge(s.canDeactivate(t,e,n,r));else{if(!$n(s))throw new Error("Invalid CanDeactivate guard");a=Ge(s(t,e,n,r))}return a.pipe(ye())});return Object(mt.a)(s).pipe(Yn())}(t.component,t.route,n,e,r)),ye(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ge.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(yt.a)(e).pipe(me(e=>Object(yt.a)([fr(e.route.parent,r),dr(e.route,r),gr(t,e.path,n),pr(t,e.route,n)]).pipe(Lt(),ye(t=>!0!==t,!0))),ye(t=>!0!==t,!0))}(r,o,t,e):Object(mt.a)(n)),Object(Mt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ve.a)(t=>{if(Qn(t.guardsResult)){const e=Be(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(ve.a)(t=>{const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Vt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Oe(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Or(t=>{if(t.guards.canActivateChecks.length)return Object(mt.a)(t).pipe(Object(ve.a)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),ee(t=>{let n=!1;return Object(mt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(ge.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(mt.a)(t);let o=0;return Object(yt.a)(n).pipe(me(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(mt.a)({});const o={};return Object(yt.a)(i).pipe(Object(ge.a)(i=>function(t,e,n,r){const i=lr(t,e,r);return Ge(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ve.a)(t=>{o[i]=t}))),Ht(1),Object(ge.a)(()=>Object.keys(o).length===i.length?Object(mt.a)(o):Pt.a))}(t._resolve,t,e,r).pipe(Object(Mt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Tn(t,n).resolve),null)))}(t.route,e,r,i)),Object(ve.a)(()=>o++),Ht(1),Object(ge.a)(e=>o===n.length?Object(mt.a)(t):Pt.a))}))}),Object(ve.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Oe(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ve.a)(t=>{const e=new je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Or(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Mt.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new wn(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new On(new _t((i=n.value).url),new _t(i.params),new _t(i.queryParams),new _t(i.fragment),new _t(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new wn(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Sn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ve.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Mt.a)(t=>(new zn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(ve.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Oe(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new _e(i))),de(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Qn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Oe(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Te(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(lh){t.reject(lh)}}var i;return Pt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xr(t),this.config=t.map(jr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.bb)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Dn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Mn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Qe(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Mn(n,e,r)}(n);if(o.toRoot())return Dn(e.root,new Ze([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Fn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Fn(t,t===e.root,0)}const r=Rn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Fn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Vn(s.segmentGroup,s.index,o.commands):Ln(s.segmentGroup,s.index,o.commands);return Dn(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.bb)()&&this.isNgZoneEnabled&&!r.F.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Qn(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(qb){e=this.malformedUriErrorHandler(qb,this.urlSerializer,t)}return e}isActive(t,e){if(Qn(t))return Ye(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ye(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.T),r.Yb(nn),r.Yb(Dr),r.Yb(C),r.Yb(r.v),r.Yb(r.C),r.Yb(r.i),r.Yb(void 0))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),qr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.p,this.deactivateEvents=new r.p,this.name=i||Ve,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Br(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Dr),r.Rb(r.W),r.Rb(r.k),r.Zb("name"),r.Rb(r.h))},t.\u0275dir=r.Mb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Br{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===On?this.route:t===Dr?this.childContexts:this.parent.get(t,e)}}class Hr{}class zr{preload(t,e){return Object(mt.a)(null)}}let Wr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Rr(e,n,e=>t.triggerEvent(new Ne(e)),e=>t.triggerEvent(new Re(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vt(t=>t instanceof Ee),me(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.D);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(yt.a)(n).pipe(Object(Ft.a)(),Object(Mt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(ge.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Ur),r.Yb(r.C),r.Yb(r.i),r.Yb(r.v),r.Yb(Hr))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),Kr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Se?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ee&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Le&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Le(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Ur),r.Yb(L),r.Yb(void 0))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();const $r=new r.u("ROUTER_CONFIGURATION"),Qr=new r.u("ROUTER_FORROOT_GUARD"),Gr=[C,{provide:nn,useClass:rn},{provide:Ur,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Ur(null,t,e,n,r,i,o,Ke(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[nn,Dr,C,r.v,r.C,r.i,Nr,$r,[class{},new r.G],[class{},new r.G]]},Dr,{provide:On,useFactory:function(t){return t.routerState.root},deps:[Ur]},{provide:r.C,useClass:r.Q},Wr,zr,class{preload(t,e){return e().pipe(de(()=>Object(mt.a)(null)))}},{provide:$r,useValue:{enableTracing:!1}}];function Yr(){return new r.E("Router",Ur)}let Jr=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Gr,ei(e),{provide:Qr,useFactory:ti,deps:[[Ur,new r.G,new r.P]]},{provide:$r,useValue:n||{}},{provide:y,useFactory:Xr,deps:[u,[new r.s(b),new r.G],$r]},{provide:Kr,useFactory:Zr,deps:[Ur,L,$r]},{provide:Hr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:zr},{provide:r.E,multi:!0,useFactory:Yr},[ni,{provide:r.d,multi:!0,useFactory:ri,deps:[ni]},{provide:oi,useFactory:ii,deps:[ni]},{provide:r.b,multi:!0,useExisting:oi}]]}}static forChild(e){return{ngModule:t,providers:[ei(e)]}}}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)(r.Yb(Qr,8),r.Yb(Ur,8))}}),t})();function Zr(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Kr(t,e,n)}function Xr(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function ti(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ei(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Nr,multi:!0,useValue:t}]}let ni=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new vt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ur),r=this.injector.get($r);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(mt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get($r),n=this.injector.get(Wr),i=this.injector.get(Kr),o=this.injector.get(Ur),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();function ri(t){return t.appInitializer.bind(t)}function ii(t){return t.bootstrapListener.bind(t)}const oi=new r.u("Router Initializer"),si=[];let ai=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},imports:[[Jr.forRoot(si)],Jr]}),t})();var ui=n("mrSG");class ci{}class li{constructor(t,e){this.open=t,this.close=e||t}isManual(){return"manual"===this.open||"manual"===this.close}}const hi={hover:["mouseover","mouseout"],focus:["focusin","focusout"]},di="undefined"!=typeof window&&window||{};let fi;function pi(){return void 0===di||(void 0===di.__theme?(fi||(fi=function(){if("undefined"==typeof document)return null;const t=document.createElement("span");t.innerText="test bs version",document.body.appendChild(t),t.classList.add("d-none");const e=t.getBoundingClientRect();return document.body.removeChild(t),e&&0===e.top?"bs4":"bs3"}()),"bs3"===fi):"bs4"!==di.__theme)}"undefined"==typeof console||console;var gi=n("VRyK"),mi=n("n6bG");function yi(t,e,n,r){return Object(mi.a)(n)&&(r=n,n=void 0),r?yi(t,e,n).pipe(Object(Mt.a)(t=>Object(Ct.a)(t)?r(...t):r(t))):new It.a(r=>{!function t(e,n,r,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,o),s=()=>t.removeEventListener(n,r,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,r,i,o)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}var vi=n("3N8a");class bi extends vi.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}var _i=n("IjjT");class wi extends _i.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const Ci=new wi(bi);function Si(t,e){if(1!==t.nodeType)return[];const n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function Ei(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function Oi(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}const{overflow:e,overflowX:n,overflowY:r}=Si(t);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(n))?t:Oi(Ei(t))}const Ti="undefined"!=typeof window&&"undefined"!=typeof document,Ii=Ti&&!(!window.MSInputMethodContext||!document.documentMode),xi=Ti&&!(!window.MSInputMethodContext||!/MSIE 10/.test(navigator.userAgent));function ki(t){return 11===t?Ii:10===t?xi:Ii||xi}function Ai(t){if(!t)return document.documentElement;const e=ki(10)?document.body:null;let n,r=t.offsetParent||null;for(;r===e&&t.nextElementSibling&&n!==t.nextElementSibling;)n=t.nextElementSibling,r=n.offsetParent;const i=r&&r.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===Si(r,"position")?Ai(r):r:n?n.ownerDocument.documentElement:document.documentElement}function ji(t){return null!==t.parentNode?ji(t.parentNode):t}function Ni(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;const n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);const{commonAncestorContainer:s}=o;if(t!==s&&e!==s||r.contains(i))return function(t){const{nodeName:e}=t;return"BODY"!==e&&("HTML"===e||Ai(t.firstElementChild)===t)}(s)?s:Ai(s);const a=ji(t);return a.host?Ni(a.host,e):Ni(t,ji(e).host)}function Ri(t,e){const n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t[`border${n}Width`])+parseFloat(t[`border${r}Width`])}function Pi(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],ki(10)?parseInt(n["offset"+t],10)+parseInt(r["margin"+("Height"===t?"Top":"Left")],10)+parseInt(r["margin"+("Height"===t?"Bottom":"Right")],10):0)}function Di(t){const e=t.body,n=t.documentElement,r=ki(10)&&getComputedStyle(n);return{height:Pi("Height",e,n,r),width:Pi("Width",e,n,r)}}function Mi(t,e="top"){const n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){const e=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||e)[n]}return t[n]}function Fi(t){return Object.assign(Object.assign({},t),{right:t.left+t.width,bottom:t.top+t.height})}function Li(t){let e={};try{if(ki(10)){e=t.getBoundingClientRect();const n=Mi(t,"top"),r=Mi(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(qb){return}const n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?Di(t.ownerDocument):{};let i=t.offsetWidth-(r.width||t.clientWidth||n.right-n.left),o=t.offsetHeight-(r.height||t.clientHeight||n.bottom-n.top);if(i||o){const e=Si(t);i-=Ri(e,"x"),o-=Ri(e,"y"),n.width-=i,n.height-=o}return Fi(n)}function Vi(t,e,n=!1){const r=ki(10),i="HTML"===e.nodeName,o=Li(t),s=Li(e),a=Oi(t),u=Si(e),c=parseFloat(u.borderTopWidth),l=parseFloat(u.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));let h=Fi({top:o.top-s.top-c,left:o.left-s.left-l,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){const t=parseFloat(u.marginTop),e=parseFloat(u.marginLeft);h.top-=c-t,h.bottom-=c-t,h.left-=l-e,h.right-=l-e,h.marginTop=t,h.marginLeft=e}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(h=function(t,e,n=!1){const r=Mi(e,"top"),i=Mi(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}(h,e)),h}function Ui(t){if(!t||!t.parentElement||ki())return document.documentElement;let e=t.parentElement;for(;e&&"none"===Si(e,"transform");)e=e.parentElement;return e||document.documentElement}function qi(t,e,n=0,r,i=!1){let o={top:0,left:0};const s=i?Ui(t):Ni(t,e);if("viewport"===r)o=function(t,e=!1){const n=t.ownerDocument.documentElement,r=Vi(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:Mi(n),a=e?0:Mi(n,"left");return Fi({top:s-Number(r.top)+Number(r.marginTop),left:a-Number(r.left)+Number(r.marginLeft),width:i,height:o})}(s,i);else{let n;"scrollParent"===r?(n=Oi(Ei(e)),"BODY"===n.nodeName&&(n=t.ownerDocument.documentElement)):n="window"===r?t.ownerDocument.documentElement:r;const a=Vi(n,s,i);if("HTML"!==n.nodeName||function t(e){const n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===Si(e,"position")||t(Ei(e)))}(s))o=a;else{const{height:e,width:n}=Di(t.ownerDocument);o.top+=a.top-a.marginTop,o.bottom=Number(e)+Number(a.top),o.left+=a.left-a.marginLeft,o.right=Number(n)+Number(a.left)}}return o.left+=n,o.top+=n,o.right-=n,o.bottom-=n,o}function Bi({width:t,height:e}){return t*e}function Hi(t,e,n,r,i=["top","bottom","right","left"],o="viewport",s=0){if(-1===t.indexOf("auto"))return t;const a=qi(n,r,s,o),u={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},c=Object.keys(u).map(t=>Object.assign(Object.assign({key:t},u[t]),{area:Bi(u[t])})).sort((t,e)=>e.area-t.area);let l=c.filter(({width:t,height:e})=>t>=n.clientWidth&&e>=n.clientHeight);l=l.filter(t=>i.some(e=>e===t.key));const h=l.length>0?l[0].key:c[0].key,d=t.split(" ")[1];return n.className=n.className.replace(/bs-tooltip-auto/g,"bs-tooltip-"+h),h+(d?"-"+d:"")}function zi(t){const e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:Number(t.offsetWidth)+r,height:Number(t.offsetHeight)+n}}function Wi(t,e,n=null){return Vi(e,n?Ui(t):Ni(t,e),n)}function Ki(t,e,n){const r=n.split(" ")[0],i=zi(t),o={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(r),a=s?"top":"left",u=s?"left":"top",c=s?"height":"width",l=s?"width":"height";return o[a]=e[a]+e[c]/2-i[c]/2,o[u]=r===u?e[u]-i[l]:e[function(t){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,t=>e[t])}(u)],o}function $i(t,e){return t&&t.modifiers&&t.modifiers[e]&&t.modifiers[e].enabled}function Qi(t,e,n){Object.keys(e).forEach(r=>{let i="";var o;-1!==["width","height","top","right","bottom","left"].indexOf(r)&&""!==(o=e[r])&&!isNaN(parseFloat(o))&&isFinite(o)&&(i="px"),n?n.setStyle(t,r,`${String(e[r])}${i}`):t.style[r]=String(e[r])+i})}function Gi(t){let e=t.offsets.target;const n=t.instance.target.querySelector(".arrow");if(!n)return t;const r=-1!==["left","right"].indexOf(t.placement.split(" ")[0]),i=r?"height":"width",o=r?"Top":"Left",s=o.toLowerCase(),a=r?"left":"top",u=r?"bottom":"right",c=zi(n)[i],l=t.placement.split(" ")[1];t.offsets.host[u]-c<e[s]&&(e[s]-=e[s]-(t.offsets.host[u]-c)),Number(t.offsets.host[s])+Number(c)>e[u]&&(e[s]+=Number(t.offsets.host[s])+Number(c)-Number(e[u])),e=Fi(e);const h=Si(t.instance.target),d=parseFloat(h["margin"+o]),f=parseFloat(h[`border${o}Width`]);let p;if(l){const e=parseFloat(h.borderRadius),n=Number(d+f+e);p=s===l?Number(t.offsets.host[s])+n:Number(t.offsets.host[s])+Number(t.offsets.host[i]-n)}else p=Number(t.offsets.host[s])+Number(t.offsets.host[i]/2-c/2);let g=p-e[s]-d-f;return g=Math.max(Math.min(e[i]-c,g),0),t.offsets.arrow={[s]:Math.round(g),[a]:""},t.instance.arrow=n,t}function Yi(t){if(t.offsets.target=Fi(t.offsets.target),!$i(t.options,"flip"))return t.offsets.target=Object.assign(Object.assign({},t.offsets.target),Ki(t.instance.target,t.offsets.host,t.placement)),t;const e=qi(t.instance.target,t.instance.host,0,"viewport",!1);let n=t.placement.split(" ")[0],r=t.placement.split(" ")[1]||"";const i=Hi("auto",t.offsets.host,t.instance.target,t.instance.host,t.options.allowedPositions),o=[n,i];return o.forEach((i,s)=>{if(n!==i||o.length===s+1)return t;n=t.placement.split(" ")[0];const a="left"===n&&Math.floor(t.offsets.target.right)>Math.floor(t.offsets.host.left)||"right"===n&&Math.floor(t.offsets.target.left)<Math.floor(t.offsets.host.right)||"top"===n&&Math.floor(t.offsets.target.bottom)>Math.floor(t.offsets.host.top)||"bottom"===n&&Math.floor(t.offsets.target.top)<Math.floor(t.offsets.host.bottom),u=Math.floor(t.offsets.target.left)<Math.floor(e.left),c=Math.floor(t.offsets.target.right)>Math.floor(e.right),l=Math.floor(t.offsets.target.top)<Math.floor(e.top),h=Math.floor(t.offsets.target.bottom)>Math.floor(e.bottom),d="left"===n&&u||"right"===n&&c||"top"===n&&l||"bottom"===n&&h,f=-1!==["top","bottom"].indexOf(n),p=f&&"left"===r&&u||f&&"right"===r&&c||!f&&"left"===r&&l||!f&&"right"===r&&h;(a||d||p)&&((a||d)&&(n=o[s+1]),p&&(r=function(t){return"right"===t?"left":"left"===t?"right":t}(r)),t.placement=n+(r?" "+r:""),t.offsets.target=Object.assign(Object.assign({},t.offsets.target),Ki(t.instance.target,t.offsets.host,t.placement)))}),t}function Ji(t){if(!$i(t.options,"preventOverflow"))return t;const e="transform",n=t.instance.target.style,{top:r,left:i,[e]:o}=n;n.top="",n.left="",n[e]="";const s=qi(t.instance.target,t.instance.host,0,"scrollParent",!1);n.top=r,n.left=i,n[e]=o;const a={primary(e){let n=t.offsets.target[e];return t.offsets.target[e]<s[e]&&(n=Math.max(t.offsets.target[e],s[e])),{[e]:n}},secondary(e){const n="right"===e?"left":"top";let r=t.offsets.target[n];return t.offsets.target[e]>s[e]&&(r=Math.min(t.offsets.target[n],s[e]-("right"===e?t.offsets.target.width:t.offsets.target.height))),{[n]:r}}};let u;return["left","right","top","bottom"].forEach(e=>{u=-1!==["left","top"].indexOf(e)?"primary":"secondary",t.offsets.target=Object.assign(Object.assign({},t.offsets.target),a[u](e))}),t}function Zi(t){const e=t.placement,n=e.split(" ")[0],r=e.split(" ")[1];if(r){const{host:e,target:i}=t.offsets,o=-1!==["bottom","top"].indexOf(n),s=o?"left":"top",a=o?"width":"height",u={start:{[s]:e[s]},end:{[s]:e[s]+e[a]-i[a]}};t.offsets.target=Object.assign(Object.assign({},i),{[s]:s===r?u.start[s]:u.end[s]})}return t}class Xi{position(t,e,n=!0){return this.offset(t,e,!1)}offset(t,e,n=!0){return Wi(e,t)}positionElements(t,e,n,r,i){return[Yi,Zi,Ji,Gi].reduce((t,e)=>e(t),function(t,e,n,r){const i=Wi(t,e);n.match(/^(auto)*\s*(left|right|top|bottom)*$/)||n.match(/^(left|right|top|bottom)*(?: (left|right|top|bottom))?\s*(start|end)*$/)||(n="auto");const o=!!n.match(/auto/g);let s=n.match(/auto\s(left|right|top|bottom)/)?n.split(" ")[1]||"auto":n;const a=s.match(/^(left|right|top|bottom)* ?(?!\1)(left|right|top|bottom)?/);a&&(s=a[1]+(a[2]?" "+a[2]:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(s)&&(s="auto");const u=Ki(t,i,s);return s=Hi(s,i,t,e,r?r.allowedPositions:void 0),{options:r,instance:{target:t,host:e,arrow:null},offsets:{target:u,host:i,arrow:null},positionFixed:!1,placement:s,placementAuto:o}}(e,t,n,i))}}const to=new Xi;let eo=(()=>{class t{constructor(t,e,n){this.update$$=new vt.a,this.positionElements=new Map,this.isDisabled=!1,function(t){return"browser"===t}(n)&&t.runOutsideAngular(()=>{this.triggerEvent$=Object(gi.a)(yi(window,"scroll",{passive:!0}),yi(window,"resize",{passive:!0}),Object(mt.a)(0,Ci),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(t=>{!function(t,e,n,r,i,o){const s=to.positionElements(t,e,n,r,i),a=function(t){return{width:t.offsets.target.width,height:t.offsets.target.height,left:Math.floor(t.offsets.target.left),top:Math.round(t.offsets.target.top),bottom:Math.round(t.offsets.target.bottom),right:Math.floor(t.offsets.target.right)}}(s);Qi(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${a.left}px, ${a.top}px, 0px)`},o),s.instance.arrow&&Qi(s.instance.arrow,s.offsets.arrow,o),function(t,e){const n=t.instance.target;let r=n.className;t.placementAuto&&(r=r.replace(/bs-popover-auto/g,"bs-popover-"+t.placement),r=r.replace(/bs-tooltip-auto/g,"bs-tooltip-"+t.placement),r=r.replace(/\sauto/g," "+t.placement),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom/g,""+t.placement.split(" ")[0]),e?e.setAttribute(n,"class",r):n.className=r}(s,o)}(no(t.target),no(t.element),t.attachment,t.appendToBody,this.options,e.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(no(t.element),t)}calcPosition(){this.update$$.next()}deletePositionElement(t){this.positionElements.delete(no(t))}setOptions(t){this.options=t}}return t.\u0275fac=function(e){return new(e||t)(Object(r.Yb)(r.F),Object(r.Yb)(r.L),Object(r.Yb)(r.I))},t.\u0275prov=Object(r.Nb)({token:t,factory:t.\u0275fac}),t})();function no(t){return"string"==typeof t?document.querySelector(t):t instanceof r.n?t.nativeElement:t}class ro{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}class io{constructor(t,e,n,i,o,s,a,u){this._viewContainerRef=t,this._renderer=e,this._elementRef=n,this._injector=i,this._componentFactoryResolver=o,this._ngZone=s,this._applicationRef=a,this._posService=u,this.onBeforeShow=new r.p,this.onShown=new r.p,this.onBeforeHide=new r.p,this.onHidden=new r.p,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(t){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(t),this}to(t){return this.container=t||this.container,this}position(t){return this.attachment=t.attachment||this.attachment,this._elementRef=t.target||this._elementRef,this}provide(t){return this._providers.push(t),this}show(t={}){if(this._subscribePositioning(),this._innerComponent=null,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(t.content,t.context,t.initialState);const e=r.v.create({providers:this._providers,parent:this._injector});this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,t),this.container instanceof r.n&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document&&(document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector)).appendChild(this._componentRef.location.nativeElement),!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const t=this._componentRef.location.nativeElement;return t.parentNode.removeChild(t),this._contentRef.componentRef&&this._contentRef.componentRef.destroy(),this._componentRef.destroy(),this._viewContainerRef&&this._contentRef.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._contentRef=null,this._componentRef=null,this._removeGlobalListener(),this.onHidden.emit(),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(t){this.triggers=t.triggers||this.triggers,this._listenOpts.outsideClick=t.outsideClick,this._listenOpts.outsideEsc=t.outsideEsc,t.target=t.target||this._elementRef.nativeElement;const e=this._listenOpts.hide=()=>t.hide?t.hide():void this.hide(),n=this._listenOpts.show=e=>{t.show?t.show(e):this.show(e),e()};return this._unregisterListenersFn=function(t,e){const n=function(t,e=hi){const n=(t||"").trim();if(0===n.length)return[];const r=n.split(/\s+/).map(t=>t.split(":")).map(t=>{const n=e[t[0]]||t;return new li(n[0],n[1])}),i=r.filter(t=>t.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===n.length&&n[0].isManual())return Function.prototype;const i=[],o=[],s=()=>{o.forEach(t=>i.push(t())),o.length=0};return n.forEach(n=>{const a=n.open===n.close,u=a?e.toggle:e.show;a||o.push(()=>t.listen(r,n.close,e.hide)),i.push(t.listen(r,n.open,()=>u(s)))}),()=>{i.forEach(t=>t())}}(this._renderer,{target:t.target,triggers:t.triggers,show:n,hide:e,toggle:t=>{this.isShown?e():n(t)}}),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=null)}attachInline(t,e){return this._inlineViewRef=t.createEmbeddedView(e),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const t=this._componentRef.location.nativeElement;setTimeout(()=>{var e;this._globalListener=(e={targets:[t,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide()}).outsideClick?this._renderer.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(e=>e.contains(t.target))||e.hide()}):Function.prototype})}var t;this._listenOpts.outsideEsc&&(this._globalListener=(t={targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide()}).outsideEsc?this._renderer.listen("document","keyup.esc",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(t=>t.contains(e.target))||t.hide()}):Function.prototype)}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){!this._zoneSubscription&&this.attachment&&(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=null)}_getContentRef(t,e,n){if(!t)return new ro([]);if(t instanceof r.R){if(this._viewContainerRef){const n=this._viewContainerRef.createEmbeddedView(t,e);return n.markForCheck(),new ro([n.rootNodes],n)}const n=t.createEmbeddedView({});return this._applicationRef.attachView(n),new ro([n.rootNodes],n)}if("function"==typeof t){const e=this._componentFactoryResolver.resolveComponentFactory(t),i=r.v.create({providers:this._providers,parent:this._injector}),o=e.create(i);return Object.assign(o.instance,n),this._applicationRef.attachView(o.hostView),new ro([[o.location.nativeElement]],o.hostView,o)}return new ro([[this._renderer.createText(""+t)]])}}let oo=(()=>{class t{constructor(t,e,n,r,i){this._componentFactoryResolver=t,this._ngZone=e,this._injector=n,this._posService=r,this._applicationRef=i}createLoader(t,e,n){return new io(e,n,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return t.\u0275fac=function(e){return new(e||t)(Object(r.Yb)(r.k),Object(r.Yb)(r.F),Object(r.Yb)(r.v),Object(r.Yb)(eo),Object(r.Yb)(r.g))},t.\u0275prov=Object(r.Nb)({token:t,factory:t.\u0275fac}),t})(),so=(()=>{class t{constructor(){this.hide=Function,this.setClass=Function}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Nb)({token:t,factory:t.\u0275fac}),t})(),ao=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Nb)({token:t,factory:t.\u0275fac}),t})();const uo={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{}},co=new r.u("override-default-config"),lo="modal-open",ho="show",fo=["*"];let po=(()=>{class t{constructor(t,e,n){this._element=e,this._renderer=n,this.isShown=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,pi()?"in":ho)},this.isAnimated?150:0),document&&document.body&&(1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,lo)),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.bsModalService.setDismissReason("backdrop-click"),this.hide())}onPopState(){this.hide()}onEsc(t){this.isShown&&(27!==t.keyCode&&"Escape"!==t.key||t.preventDefault(),this.config.keyboard&&this.level===this.bsModalService.getModalsCount()&&(this.bsModalService.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this.hide()}hide(){!this.isModalHiding&&this.isShown&&(this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,pi()?"in":ho),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.bsModalService.getModalsCount()&&this._renderer.removeClass(document.body,lo),this.bsModalService.hide(this.level),this.isModalHiding=!1},this.isAnimated?300:0))}}return t.\u0275fac=function(e){return new(e||t)(Object(r.Rb)(ao),Object(r.Rb)(r.n),Object(r.Rb)(r.K))},t.\u0275cmp=Object(r.Lb)({type:t,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,e){1&t&&Object(r.bc)("mousedown",(function(t){return e.onClickStarted(t)}))("mouseup",(function(t){return e.onClickStop(t)}))("popstate",(function(){return e.onPopState()}),!1,r.kc)("keydown.esc",(function(t){return e.onEsc(t)}),!1,r.kc),2&t&&Object(r.Hb)("aria-modal",!0)("aria-labelledby",e.config.ariaLabelledBy)("aria-describedby",e.config.ariaDescribedby)},ngContentSelectors:fo,decls:3,vars:2,consts:[["role","document"],[1,"modal-content"]],template:function(t,e){1&t&&(Object(r.hc)(),Object(r.Ub)(0,"div",0),Object(r.Ub)(1,"div",1),Object(r.gc)(2),Object(r.Tb)(),Object(r.Tb)()),2&t&&Object(r.Ib)("modal-dialog"+(e.config.class?" "+e.config.class:""))},encapsulation:2}),t})(),go=(()=>{class t{constructor(t,e){this._isShown=!1,this.element=t,this.renderer=e}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),pi()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class{static reflow(t){}static getStyles(t){let e=t.ownerDocument.defaultView;return e&&e.opener||(e=di),e.getComputedStyle(t)}}.reflow(this.element.nativeElement)),this.isShown=!0}}return t.\u0275fac=function(e){return new(e||t)(Object(r.Rb)(r.n),Object(r.Rb)(r.K))},t.\u0275cmp=Object(r.Lb)({type:t,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),mo=(()=>{class t{constructor(t,e,n){this.clf=e,this.onShow=new r.p,this.onShown=new r.p,this.onHide=new r.p,this.onHidden=new r.p,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastDismissReason="",this.loaders=[],this._backdropLoader=this.clf.createLoader(null,null,null),this._renderer=t.createRenderer(null,null),this.config=n?Object.assign({},uo,n):uo}show(t,e){return this.modalsCount++,this._createLoaders(),this.config=Object.assign({},this.config,e),this._showBackdrop(),this.lastDismissReason=null,this._showModal(t)}hide(t){1===this.modalsCount&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=this.config.backdrop||"static"===this.config.backdrop,e=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&e&&(this._backdropLoader.attach(go).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){const e=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const i of this.config.providers)e.provide(i);const n=new so,r=e.provide({provide:ao,useValue:this.config}).provide({provide:so,useValue:n}).attach(po).to("body").show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this});return r.instance.level=this.getModalsCount(),n.hide=()=>{setTimeout(()=>r.instance.hide(),this.config.animated?300:0)},n.content=e.getInnerComponent()||null,n.setClass=t=>{r.instance.config.class=t},n}_hideModal(t){const e=this.loaders[t-1];e&&e.hide()}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._backdropLoader.hide(),this.backdropRef=null}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){document&&(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=this.originalBodyPadding+this.scrollbarWidth+"px"))}resetScrollbar(){document.body.style.paddingRight=this.originalBodyPadding+"px"}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const e=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),e}_createLoaders(){const t=this.clf.createLoader(null,null,null);this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){this.loaders.splice(t-1,1),this.loaders.forEach((t,e)=>{t.instance.level=e+1})}copyEvent(t,e){t.subscribe(()=>{e.emit(this.lastDismissReason)})}}return t.\u0275fac=function(e){return new(e||t)(Object(r.Yb)(r.L),Object(r.Yb)(oo),Object(r.Yb)(co,8))},t.\u0275prov=Object(r.Nb)({token:t,factory:t.\u0275fac}),t})(),yo=(()=>{class t{static forRoot(){return{ngModule:t,providers:[mo,oo,eo]}}static forChild(){return{ngModule:t,providers:[mo,oo,eo]}}}return t.\u0275mod=Object(r.Pb)({type:t}),t.\u0275inj=Object(r.Ob)({factory:function(e){return new(e||t)}}),t})();var vo=n("D0XW");function bo(){return t=>t.lift(new _o)}class _o{call(t,e){return e.subscribe(new wo(t))}}class wo extends St.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Co(t,e){return n=>n.lift(new So(t,e))}class So{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Eo(t,this.compare,this.keySelector))}}class Eo extends St.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Oo=n("pxpQ"),To=n("spgP"),Io=n("Jgta"),xo=n("zIRd"),ko=n("qOnz"),Ao=n("q/0M"),jo=function(t,e){return(jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function No(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ro,Po="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Do=Do||{},Mo=Po||self;function Fo(){}function Lo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Uo="closure_uid_"+(1e9*Math.random()>>>0),qo=0;function Bo(t,e,n){return t.call.apply(t.bind,arguments)}function Ho(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function zo(t,e,n){return(zo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bo:Ho).apply(null,arguments)}function Wo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ko(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function $o(){this.s=this.s,this.o=this.o}var Qo={};$o.prototype.s=!1,$o.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Uo)&&t[Uo]||(t[Uo]=++qo)}(this);delete Qo[t]}},$o.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Go=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Yo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Jo(t){return Array.prototype.concat.apply([],arguments)}function Zo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Xo(t){return/^[\s\xa0]*$/.test(t)}var ts,es=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ns(t,e){return-1!=t.indexOf(e)}function rs(t,e){return t<e?-1:t>e?1:0}t:{var is=Mo.navigator;if(is){var os=is.userAgent;if(os){ts=os;break t}}ts=""}function ss(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function as(t){var e={};for(var n in t)e[n]=t[n];return e}var us="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<us.length;o++)n=us[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ls(t){return ls[" "](t),t}ls[" "]=Fo;var hs,ds,fs=ns(ts,"Opera"),ps=ns(ts,"Trident")||ns(ts,"MSIE"),gs=ns(ts,"Edge"),ms=gs||ps,ys=ns(ts,"Gecko")&&!(ns(ts.toLowerCase(),"webkit")&&!ns(ts,"Edge"))&&!(ns(ts,"Trident")||ns(ts,"MSIE"))&&!ns(ts,"Edge"),vs=ns(ts.toLowerCase(),"webkit")&&!ns(ts,"Edge");function bs(){var t=Mo.document;return t?t.documentMode:void 0}t:{var _s="",ws=(ds=ts,ys?/rv:([^\);]+)(\)|;)/.exec(ds):gs?/Edge\/([\d\.]+)/.exec(ds):ps?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ds):vs?/WebKit\/(\S+)/.exec(ds):fs?/(?:Version)[ \/]?(\S+)/.exec(ds):void 0);if(ws&&(_s=ws?ws[1]:""),ps){var Cs=bs();if(null!=Cs&&Cs>parseFloat(_s)){hs=String(Cs);break t}}hs=_s}var Ss={};var Es=Mo.document&&ps&&(bs()||parseInt(hs,10))||void 0,Os=function(){if(!Mo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Mo.addEventListener("test",Fo,e),Mo.removeEventListener("test",Fo,e)}catch(n){}return t}();function Ts(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Is(t,e){if(Ts.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ys){t:{try{ls(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xs[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Is.Z.h.call(this)}}Ts.prototype.h=function(){this.defaultPrevented=!0},Ko(Is,Ts);var xs={2:"touch",3:"pen",4:"mouse"};Is.prototype.h=function(){Is.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),As=0;function js(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++As,this.ca=this.fa=!1}function Ns(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Rs(t){this.src=t,this.g={},this.h=0}function Ps(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Go(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ns(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ds(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Rs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ds(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new js(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Ms="closure_lm_"+(1e6*Math.random()|0),Fs={};function Ls(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ws(r),e&&e[ks]?e.O(n,r,Vo(i)?!!i.capture:!!i,o):Vs(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ls(t,e[o],n,r,i);return null}return n=Ws(n),t&&t[ks]?t.N(e,n,Vo(r)?!!r.capture:!!r,i):Vs(t,e,n,!1,r,i)}function Vs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Vo(i)?!!i.capture:!!i,a=Hs(t);if(a||(t[Ms]=a=new Rs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Bs;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Os||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Us(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ks])Ps(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hs(e))?(Ps(n,t),0==n.h&&(n.src=null,e[Ms]=null)):Ns(t)}}}function qs(t){return t in Fs?Fs[t]:Fs[t]="on"+t}function Bs(t,e){if(t.ca)t=!0;else{e=new Is(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Us(t),t=n.call(r,e)}return t}function Hs(t){return(t=t[Ms])instanceof Rs?t:null}var zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ws(t){return"function"==typeof t?t:(t[zs]||(t[zs]=function(e){return t.handleEvent(e)}),t[zs])}function Ks(){$o.call(this),this.i=new Rs(this),this.P=this,this.I=null}function $s(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ts(e,t);else if(e instanceof Ts)e.target=e.target||t;else{var i=e;cs(e=new Ts(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Qs(s,r,!0,e)&&i}if(i=Qs(s=e.g=t,r,!0,e)&&i,i=Qs(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Qs(s=e.g=n[o],r,!1,e)&&i}function Qs(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Ps(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ko(Ks,$o),Ks.prototype[ks]=!0,Ks.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Vo(i)?!!i.capture:!!i,r=Ws(r),e&&e[ks]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=Ds(s=e.g[n],r,i,o))&&(Ns(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.g[n],e.h--))):e&&(e=Hs(e))&&(n=e.g[n.toString()],e=-1,n&&(e=Ds(n,r,i,o)),(r=-1<e?n[e]:null)&&Us(r))}(this,t,e,n,r)},Ks.prototype.M=function(){if(Ks.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ns(n[r]);delete e.g[t],e.h--}}this.I=null},Ks.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ks.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Gs=Mo.JSON.stringify;function Ys(){var t=ia,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Js,Zs=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Xs.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Xs=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())((function(){return new ta}),(function(t){return t.reset()})),ta=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function ea(t){Mo.setTimeout((function(){throw t}),0)}function na(t,e){Js||function(){var t=Mo.Promise.resolve(void 0);Js=function(){t.then(oa)}}(),ra||(Js(),ra=!0),ia.add(t,e)}var ra=!1,ia=new Zs;function oa(){for(var t;t=Ys();){try{t.h.call(t.g)}catch(n){ea(n)}var e=Xs;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ra=!1}function sa(t,e){Ks.call(this),this.h=t||1,this.g=e||Mo,this.j=zo(this.kb,this),this.l=Date.now()}function aa(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ua(t,e,n){if("function"==typeof t)n&&(t=zo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=zo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Mo.setTimeout(t,e||0)}function ca(t){t.g=ua((function(){t.g=null,t.i&&(t.i=!1,ca(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Ko(sa,Ks),(Ro=sa.prototype).da=!1,Ro.S=null,Ro.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$s(this,"tick"),this.da&&(aa(this),this.start()))}},Ro.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ro.M=function(){sa.Z.M.call(this),aa(this),delete this.g};var la=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}jo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ca(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Mo.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}($o);function ha(t){$o.call(this),this.h=t,this.g={}}Ko(ha,$o);var da=[];function fa(t,e,n,r){Array.isArray(n)||(n&&(da[0]=n.toString()),n=da);for(var i=0;i<n.length;i++){var o=Ls(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function pa(t){ss(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Us(t)}),t),t.g={}}function ga(){this.g=!0}function ma(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Gs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}ha.prototype.M=function(){ha.Z.M.call(this),pa(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ga.prototype.Aa=function(){this.g=!1},ga.prototype.info=function(){};var ya={},va=null;function ba(){return va=va||new Ks}function _a(t){Ts.call(this,ya.Ma,t)}function wa(t){var e=ba();$s(e,new _a(e,t))}function Ca(t,e){Ts.call(this,ya.STAT_EVENT,t),this.stat=e}function Sa(t){var e=ba();$s(e,new Ca(e,t))}function Ea(t,e){Ts.call(this,ya.Na,t),this.size=e}function Oa(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Mo.setTimeout((function(){t()}),e)}ya.Ma="serverreachability",Ko(_a,Ts),ya.STAT_EVENT="statevent",Ko(Ca,Ts),ya.Na="timingevent",Ko(Ea,Ts);var Ta={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ia={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xa(){}function ka(){}xa.prototype.h=null;var Aa,ja={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Na(){Ts.call(this,"d")}function Ra(){Ts.call(this,"c")}function Pa(){}function Da(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ha(this),this.P=Fa,this.W=new sa(t=ms?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ma}function Ma(){this.i=null,this.g="",this.h=!1}Ko(Na,Ts),Ko(Ra,Ts),Ko(Pa,xa),Pa.prototype.g=function(){return new XMLHttpRequest},Pa.prototype.i=function(){return{}},Aa=new Pa;var Fa=45e3,La={},Va={};function Ua(t,e,n){t.K=1,t.v=cu(ru(e)),t.s=n,t.U=!0,qa(t,null)}function qa(t,e){t.F=Date.now(),Wa(t),t.A=ru(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Cu(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ma,t.g=Sc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new la(zo(t.Ia,t,t.g),t.O)),fa(t.V,t.g,"readystatechange",t.gb),e=t.H?as(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),wa(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ba(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ha(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=za(t,n))==Va){4==e&&(t.o=4,Sa(14),i=!1),ma(t.j,t.m,null,"[Incomplete Response]");break}if(r==La){t.o=4,Sa(15),ma(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ma(t.j,t.m,r,null),Ya(t,r)}Ba(t)&&r!=Va&&r!=La&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Sa(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),gc(e),e.L=!0,Sa(11))):(ma(t.j,t.m,n,"[Invalid Chunked Response]"),Ga(t),Qa(t))}function za(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Va:(n=Number(e.substring(n,r)),isNaN(n)?La:(r+=1)+n>e.length?Va:(e=e.substr(r,n),t.C=r+n,e))}function Wa(t){t.Y=Date.now()+t.P,Ka(t,t.P)}function Ka(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Oa(zo(t.eb,t),e)}function $a(t){t.B&&(Mo.clearTimeout(t.B),t.B=null)}function Qa(t){0==t.l.G||t.I||vc(t.l,t)}function Ga(t){$a(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,aa(t.W),pa(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ya(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ku(n.i,t)))if(n.I=t.N,!t.J&&ku(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;yc(n),sc(n)}pc(n),Sa(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Oa(zo(n.ab,n),6e3));if(1>=xu(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else _c(n,11)}else if((t.J||n.g==t)&&yc(n),!Xo(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ns(l,"spdy")||ns(l,"quic")||ns(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Au(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,uu(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=Cc(r,r.H?r.la:null,r.W),f.J){ju(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&($a(p),Wa(p)),r.g=f}else fc(r);0<n.l.length&&cc(n)}else"stop"!=o[0]&&"close"!=o[0]||_c(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?_c(n,7):oc(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}wa(4)}catch(o){}}function Ja(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Lo(t)||"string"==typeof t)Yo(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Lo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Lo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Za(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Za)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xa(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];tu(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)tu(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function tu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ro=Da.prototype).setTimeout=function(t){this.P=t},Ro.gb=function(t){t=t.target;var e=this.L;e&&3==tc(t)?e.l():this.Ia(t)},Ro.Ia=function(t){try{if(t==this.g)t:{var e=tc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||ms||this.g&&(this.h.h||this.g.ga()||ec(this.g)))){this.I||4!=e||7==n||wa(8==n||0>=r?3:2),$a(this);var i=this.g.ba();this.N=i;e:if(Ba(this)){var o=ec(this.g);t="";var s=o.length,a=4==tc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ga(this),Qa(this);var u="";break e}this.h.i=new Mo.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xo(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Sa(12),Ga(this),Qa(this);break t}ma(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ya(this,i)}this.U?(Ha(this,e,u),ms&&this.i&&3==e&&(fa(this.V,this.W,"tick",this.fb),this.W.start())):(ma(this.j,this.m,u,null),Ya(this,u)),4==e&&Ga(this),this.i&&!this.I&&(4==e?vc(this.l,this):(this.i=!1,Wa(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Sa(12)):(this.o=0,Sa(13)),Ga(this),Qa(this)}}}catch(e){}},Ro.fb=function(){if(this.g){var t=tc(this.g),e=this.g.ga();this.C<e.length&&($a(this),Ha(this,t,e),this.i&&4!=t&&Wa(this))}},Ro.cancel=function(){this.I=!0,Ga(this)},Ro.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(wa(3),Sa(17)),Ga(this),this.o=2,Qa(this)):Ka(this,this.Y-t)},(Ro=Za.prototype).R=function(){Xa(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Ro.T=function(){return Xa(this),this.g.concat()},Ro.get=function(t,e){return tu(this.h,t)?this.h[t]:e},Ro.set=function(t,e){tu(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Ro.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var eu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function nu(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof nu){this.g=void 0!==e?e:t.g,iu(this,t.j),this.s=t.s,ou(this,t.i),su(this,t.m),this.l=t.l,e=t.h;var n=new vu;n.i=e.i,e.g&&(n.g=new Za(e.g),n.h=e.h),au(this,n),this.o=t.o}else t&&(n=String(t).match(eu))?(this.g=!!e,iu(this,n[1]||"",!0),this.s=lu(n[2]||""),ou(this,n[3]||"",!0),su(this,n[4]),this.l=lu(n[5]||"",!0),au(this,n[6]||"",!0),this.o=lu(n[7]||"")):(this.g=!!e,this.h=new vu(null,this.g))}function ru(t){return new nu(t)}function iu(t,e,n){t.j=n?lu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ou(t,e,n){t.i=n?lu(e,!0):e}function su(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function au(t,e,n){e instanceof vu?(t.h=e,function(t,e){e&&!t.j&&(bu(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(_u(this,e),Cu(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=hu(e,mu)),t.h=new vu(e,t.g))}function uu(t,e,n){t.h.set(e,n)}function cu(t){return uu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function lu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,du),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function du(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}nu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hu(e,fu,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(hu(e,fu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(hu(n,"/"==n.charAt(0)?gu:pu,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hu(n,yu)),t.join("")};var fu=/[#\/\?@]/g,pu=/[#\?:]/g,gu=/[#\?]/g,mu=/[#\?@]/g,yu=/#/g;function vu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function bu(t){t.g||(t.g=new Za,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function _u(t,e){bu(t),e=Su(t,e),tu(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,tu((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Xa(t)))}function wu(t,e){return bu(t),e=Su(t,e),tu(t.g.h,e)}function Cu(t,e,n){_u(t,e),0<n.length&&(t.i=null,t.g.set(Su(t,e),Zo(n)),t.h+=n.length)}function Su(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ro=vu.prototype).add=function(t,e){bu(this),this.i=null,t=Su(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ro.forEach=function(t,e){bu(this),this.g.forEach((function(n,r){Yo(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ro.T=function(){bu(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ro.R=function(t){bu(this);var e=[];if("string"==typeof t)wu(this,t)&&(e=Jo(e,this.g.get(Su(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Jo(e,t[n])}return e},Ro.set=function(t,e){return bu(this),this.i=null,wu(this,t=Su(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ro.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Ro.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Eu=function(){return function(t,e){this.h=t,this.g=e}}();function Ou(t){this.l=t||Tu,t=Mo.PerformanceNavigationTiming?0<(t=Mo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Mo.g&&Mo.g.Ea&&Mo.g.Ea()&&Mo.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Tu=10;function Iu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xu(t){return t.h?1:t.g?t.g.size:0}function ku(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Au(t,e){t.g?t.g.add(e):t.h=e}function ju(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Nu(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=No(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Zo(t.i)}function Ru(){}function Pu(){this.g=new Ru}function Du(t,e,n){var r=n||"";try{Ja(t,(function(t,n){var i=t;Vo(t)&&(i=Gs(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(qb){throw e.push(r+"type="+encodeURIComponent("_badmap")),qb}}function Mu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Fu(t){this.l=t.$b||null,this.j=t.ib||!1}function Lu(t,e){Ks.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Vu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ou.prototype.cancel=function(){var t,e;if(this.i=Nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=No(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ru.prototype.stringify=function(t){return Mo.JSON.stringify(t,void 0)},Ru.prototype.parse=function(t){return Mo.JSON.parse(t,void 0)},Ko(Fu,xa),Fu.prototype.g=function(){return new Lu(this.l,this.j)},Fu.prototype.i=function(t){return function(){return t}}({}),Ko(Lu,Ks);var Vu=0;function Uu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function qu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Bu(t)}function Bu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ro=Lu.prototype).open=function(t,e){if(this.readyState!=Vu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Bu(this)},Ro.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Mo).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ro.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qu(this)),this.readyState=Vu},Ro.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Bu(this)),this.g&&(this.readyState=3,Bu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mo.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ro.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qu(this):Bu(this),3==this.readyState&&Uu(this)}},Ro.Ua=function(t){this.g&&(this.response=this.responseText=t,qu(this))},Ro.Ta=function(t){this.g&&(this.response=t,qu(this))},Ro.ha=function(){this.g&&qu(this)},Ro.setRequestHeader=function(t,e){this.v.append(t,e)},Ro.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ro.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Lu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Hu=Mo.JSON.parse;function zu(t){Ks.call(this),this.headers=new Za,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wu,this.K=this.L=!1}Ko(zu,Ks);var Wu="",Ku=/^https?$/i,$u=["POST","PUT"];function Qu(t){return"content-type"==t.toLowerCase()}function Gu(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Yu(t),Zu(t)}function Yu(t){t.D||(t.D=!0,$s(t,"complete"),$s(t,"error"))}function Ju(t){if(t.h&&void 0!==Do&&(!t.C[1]||4!=tc(t)||2!=t.ba()))if(t.v&&4==tc(t))ua(t.Fa,0,t);else if($s(t,"readystatechange"),4==tc(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(eu)[1]||null;if(!o&&Mo.self&&Mo.self.location){var s=Mo.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ku.test(o?o.toLowerCase():"")}e=i}if(e)$s(t,"complete"),$s(t,"success");else{t.m=6;try{var a=2<tc(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Yu(t)}}finally{Zu(t)}}}function Zu(t,e){if(t.g){Xu(t);var n=t.g,r=t.C[0]?Fo:null;t.g=null,t.C=null,e||$s(t,"ready");try{n.onreadystatechange=r}catch(qb){}}}function Xu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Mo.clearTimeout(t.A),t.A=null)}function tc(t){return t.g?t.g.readyState:0}function ec(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Wu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ss(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):uu(t,e,n))}function rc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ic(t){this.za=0,this.l=[],this.h=new ga,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rc("baseRetryDelayMs",5e3,t),this.$a=rc("retryDelaySeedMs",1e4,t),this.Ya=rc("forwardChannelMaxRetries",2,t),this.ra=rc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ou(t&&t.concurrentRequestLimit),this.Ca=new Pu,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function oc(t){if(ac(t),3==t.G){var e=t.V++,n=ru(t.F);uu(n,"SID",t.J),uu(n,"RID",e),uu(n,"TYPE","terminate"),hc(t,n),(e=new Da(t,t.h,e,void 0)).K=2,e.v=cu(ru(n)),n=!1,Mo.navigator&&Mo.navigator.sendBeacon&&(n=Mo.navigator.sendBeacon(e.v.toString(),"")),!n&&Mo.Image&&((new Image).src=e.v,n=!0),n||(e.g=Sc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wa(e)}wc(t)}function sc(t){t.g&&(gc(t),t.g.cancel(),t.g=null)}function ac(t){sc(t),t.u&&(Mo.clearTimeout(t.u),t.u=null),yc(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Mo.clearTimeout(t.m),t.m=null)}function uc(t,e){t.l.push(new Eu(t.Za++,e)),3==t.G&&cc(t)}function cc(t){Iu(t.i)||t.m||(t.m=!0,na(t.Ha,t),t.C=0)}function lc(t,e){var n;n=e?e.m:t.V++;var r=ru(t.F);uu(r,"SID",t.J),uu(r,"RID",n),uu(r,"AID",t.U),hc(t,r),t.o&&t.s&&nc(r,t.o,t.s),n=new Da(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=dc(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Au(t.i,n),Ua(n,r,e)}function hc(t,e){t.j&&Ja({},(function(t,n){uu(e,n,t)}))}function dc(t,e,n){n=Math.min(t.l.length,n);var r=t.j?zo(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Du(l,s,"req"+c+"_")}catch(el){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function fc(t){t.g||t.u||(t.Y=1,na(t.Ga,t),t.A=0)}function pc(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Oa(zo(t.Ga,t),bc(t,t.A)),t.A++,0))}function gc(t){null!=t.B&&(Mo.clearTimeout(t.B),t.B=null)}function mc(t){t.g=new Da(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ru(t.oa);uu(e,"RID","rpc"),uu(e,"SID",t.J),uu(e,"CI",t.N?"0":"1"),uu(e,"AID",t.U),hc(t,e),uu(e,"TYPE","xmlhttp"),t.o&&t.s&&nc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=cu(ru(e)),n.s=null,n.U=!0,qa(n,t)}function yc(t){null!=t.v&&(Mo.clearTimeout(t.v),t.v=null)}function vc(t,e){var n=null;if(t.g==e){yc(t),gc(t),t.g=null;var r=2}else{if(!ku(t.i,e))return;n=e.D,ju(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;$s(r=ba(),new Ea(r,n,e,i)),cc(t)}else fc(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(xu(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Oa(zo(t.Ha,t,e),bc(t,t.C)),t.C++,0)))}(t,e)||2==r&&pc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:_c(t,5);break;case 4:_c(t,10);break;case 3:_c(t,6);break;default:_c(t,2)}}function bc(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function _c(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=zo(t.jb,t);n||(n=new nu("//www.google.com/images/cleardot.gif"),Mo.location&&"http"==Mo.location.protocol||iu(n,"https"),cu(n)),function(t,e){var n=new ga;if(Mo.Image){var r=new Image;r.onload=Wo(Mu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wo(Mu,n,r,"TestLoadImage: error",!1,e),r.onabort=Wo(Mu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wo(Mu,n,r,"TestLoadImage: timeout",!1,e),Mo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Sa(2);t.G=0,t.j&&t.j.va(e),wc(t),ac(t)}function wc(t){t.G=0,t.I=-1,t.j&&(0==Nu(t.i).length&&0==t.l.length||(t.i.i.length=0,Zo(t.l),t.l.length=0),t.j.ua())}function Cc(t,e,n){var r=function(t){return t instanceof nu?ru(t):new nu(t,void 0)}(n);if(""!=r.i)e&&ou(r,e+"."+r.i),su(r,r.m);else{var i=Mo.location;r=function(t,e,n,r){var i=new nu(null,void 0);return t&&iu(i,t),e&&ou(i,e),n&&su(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ss(t.aa,(function(t,e){uu(r,e,t)})),n=t.sa,(e=t.D)&&n&&uu(r,e,n),uu(r,"VER",t.ma),hc(t,r),r}function Sc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zu(n&&t.Ba&&!t.qa?new Fu({ib:!0}):t.qa)).L=t.H,e}function Ec(){}function Oc(){if(ps&&!(10<=Number(Es)))throw Error("Environmental error: no available transport.")}function Tc(t,e){Ks.call(this),this.g=new ic(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Xo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xo(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new kc(this)}function Ic(t){Na.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function xc(){Ra.call(this),this.status=1}function kc(t){this.g=t}(Ro=zu.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Aa.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Aa),this.g.onreadystatechange=zo(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Gu(this,o)}t=n||"";var i=new Za(this.headers);r&&Ja(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Qu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Mo.FormData&&t instanceof Mo.FormData,!(0<=Go($u,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xu(this),0<this.B&&((this.K=function(t){return ps&&function(){return t=Ss,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=es(String(hs)).split("."),n=es("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rs(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rs(0==o[2].length,0==s[2].length)||rs(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zo(this.pa,this)):this.A=ua(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Gu(this,o)}},Ro.pa=function(){void 0!==Do&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$s(this,"timeout"),this.abort(8))},Ro.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$s(this,"complete"),$s(this,"abort"),Zu(this))},Ro.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zu(this,!0)),zu.Z.M.call(this)},Ro.Fa=function(){this.s||(this.F||this.v||this.l?Ju(this):this.cb())},Ro.cb=function(){Ju(this)},Ro.ba=function(){try{return 2<tc(this)?this.g.status:-1}catch(ds){return-1}},Ro.ga=function(){try{return this.g?this.g.responseText:""}catch(ds){return""}},Ro.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Hu(e)}},Ro.Da=function(){return this.m},Ro.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ro=ic.prototype).ma=8,Ro.G=1,Ro.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Ro.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Da(this,this.h,t,void 0),n=this.s;if(this.P&&(n?cs(n=as(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=dc(this,e,r),uu(i=ru(this.F),"RID",t),uu(i,"CVER",22),this.D&&uu(i,"X-HTTP-Session-Id",this.D),hc(this,i),this.o&&n&&nc(i,this.o,n),Au(this.i,e),this.Ra&&uu(i,"TYPE","init"),this.ja?(uu(i,"$req",r),uu(i,"SID","null"),e.$=!0,Ua(e,i,null)):Ua(e,i,r),this.G=2}}else 3==this.G&&(t?lc(this,t):0==this.l.length||Iu(this.i)||lc(this))},Ro.Ga=function(){if(this.u=null,mc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Oa(zo(this.bb,this),t)}},Ro.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Sa(10),sc(this),mc(this))},Ro.ab=function(){null!=this.v&&(this.v=null,sc(this),pc(this),Sa(19))},Ro.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Sa(2)):(this.h.info("Failed to ping google.com"),Sa(1))},(Ro=Ec.prototype).xa=function(){},Ro.wa=function(){},Ro.va=function(){},Ro.ua=function(){},Ro.Oa=function(){},Oc.prototype.g=function(t,e){return new Tc(t,e)},Ko(Tc,Ks),Tc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),na(zo(t.hb,t,e))),Sa(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Cc(t,null,t.W),cc(t)},Tc.prototype.close=function(){oc(this.g)},Tc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,uc(this.g,e)}else this.v?((e={}).__data__=Gs(t),uc(this.g,e)):uc(this.g,t)},Tc.prototype.M=function(){this.g.j=null,delete this.j,oc(this.g),delete this.g,Tc.Z.M.call(this)},Ko(Ic,Na),Ko(xc,Ra),Ko(kc,Ec),kc.prototype.xa=function(){$s(this.g,"a")},kc.prototype.wa=function(t){$s(this.g,new Ic(t))},kc.prototype.va=function(t){$s(this.g,new xc(t))},kc.prototype.ua=function(){$s(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,Tc.prototype.send=Tc.prototype.u,Tc.prototype.open=Tc.prototype.m,Tc.prototype.close=Tc.prototype.close,Ta.NO_ERROR=0,Ta.TIMEOUT=8,Ta.HTTP_ERROR=6,Ia.COMPLETE="complete",ka.EventType=ja,ja.OPEN="a",ja.CLOSE="b",ja.ERROR="c",ja.MESSAGE="d",Ks.prototype.listen=Ks.prototype.N,zu.prototype.listenOnce=zu.prototype.O,zu.prototype.getLastError=zu.prototype.La,zu.prototype.getLastErrorCode=zu.prototype.Da,zu.prototype.getStatus=zu.prototype.ba,zu.prototype.getResponseJson=zu.prototype.Qa,zu.prototype.getResponseText=zu.prototype.ga,zu.prototype.send=zu.prototype.ea;var Ac=Ta,jc=Ia,Nc=ya,Rc=Fu,Pc=ka,Dc=zu,Mc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Mc.o=-1;var Fc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ui.c)(e,t),e}(Error),Vc=new Ao.b("@firebase/firestore");function Uc(){return Vc.logLevel}function qc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vc.logLevel<=Ao.a.DEBUG){var r=e.map(zc);Vc.debug.apply(Vc,Object(ui.f)(["Firestore (8.10.1): "+t],r))}}function Bc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vc.logLevel<=Ao.a.ERROR){var r=e.map(zc);Vc.error.apply(Vc,Object(ui.f)(["Firestore (8.10.1): "+t],r))}}function Hc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vc.logLevel<=Ao.a.WARN){var r=e.map(zc);Vc.warn.apply(Vc,Object(ui.f)(["Firestore (8.10.1): "+t],r))}}function zc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(qb){return t}}function Wc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Bc(e),new Error(e)}function Kc(t,e){t||Wc()}function $c(t,e){return t}function Qc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Gc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Qc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Yc(t,e){return t<e?-1:t>e?1:0}function Jc(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Zc(t){return t+"\0"}var Xc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Lc(Fc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Lc(Fc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Lc(Fc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lc(Fc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Yc(this.nanoseconds,t.nanoseconds):Yc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),tl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function el(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var il=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Wc(),void 0===n?n=t.length-e:n>t.length-e&&Wc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(il),sl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return sl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Lc(Fc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Lc(Fc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Lc(Fc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(il),ul=function(){function t(t){this.fields=t,t.sort(al.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Jc(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),cl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Yc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();cl.EMPTY_BYTE_STRING=new cl("");var ll=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(t){if(Kc(!!t),"string"==typeof t){var e=0,n=ll.exec(t);if(Kc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dl(t.seconds),nanos:dl(t.nanos)}}function dl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fl(t){return"string"==typeof t?cl.fromBase64String(t):cl.fromUint8Array(t)}function pl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gl(t){var e=hl(t.mapValue.fields.__local_write_time__.timestampValue);return new Xc(e.seconds,e.nanos)}function ml(t){return null==t}function yl(t){return 0===t&&1/t==-1/0}function vl(t){return"number"==typeof t&&Number.isInteger(t)&&!yl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ol.fromString(e))},t.fromName=function(e){return new t(ol.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ol.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ol.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ol(e.slice()))},t}();function _l(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pl(t)?4:10:Wc()}function wl(t,e){var n=_l(t);if(n!==_l(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=hl(t.timestampValue),r=hl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return fl(t.bytesValue).isEqual(fl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return dl(t.geoPointValue.latitude)===dl(e.geoPointValue.latitude)&&dl(t.geoPointValue.longitude)===dl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return dl(t.integerValue)===dl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=dl(t.doubleValue),r=dl(e.doubleValue);return n===r?yl(n)===yl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Jc(t.arrayValue.values||[],e.arrayValue.values||[],wl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(el(n)!==el(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wl(n[i],r[i])))return!1;return!0}(t,e);default:return Wc()}}function Cl(t,e){return void 0!==(t.values||[]).find((function(t){return wl(t,e)}))}function Sl(t,e){var n=_l(t),r=_l(e);if(n!==r)return Yc(n,r);switch(n){case 0:return 0;case 1:return Yc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=dl(t.integerValue||t.doubleValue),r=dl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return El(t.timestampValue,e.timestampValue);case 4:return El(gl(t),gl(e));case 5:return Yc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=fl(t),r=fl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Yc(n[i],r[i]);if(0!==o)return o}return Yc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Yc(dl(t.latitude),dl(e.latitude));return 0!==n?n:Yc(dl(t.longitude),dl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Sl(n[i],r[i]);if(o)return o}return Yc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Yc(r[s],o[s]);if(0!==a)return a;var u=Sl(n[r[s]],i[o[s]]);if(0!==u)return u}return Yc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Wc()}}function El(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Yc(t,e);var n=hl(t),r=hl(e),i=Yc(n.seconds,r.seconds);return 0!==i?i:Yc(n.nanos,r.nanos)}function Ol(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=hl(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?fl(e.bytesValue).toBase64():"referenceValue"in e?bl.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Wc();var n}(t)}function Tl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Il(t){return!!t&&"integerValue"in t}function xl(t){return!!t&&"arrayValue"in t}function kl(t){return!!t&&"nullValue"in t}function Al(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}function Nl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return nl(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Nl(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Nl(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Rl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!jl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nl(e)},t.prototype.setAll=function(t){var e=this,n=al.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Nl(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());jl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wl(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){nl(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Nl(this.value))},t}();function Pl(t){var e=[];return nl(t.fields,(function(t,n){var r=new al([t]);if(jl(n)){var i=Pl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new ul(e)}var Dl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,tl.min(),Rl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Rl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Rl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Rl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Rl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ml=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Fl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ml(t,e,n,r,i,o,s)}function Ll(t){var e=$c(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ol(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Jl(e.startAt)),e.endAt&&(n+="|ub:",n+=Jl(e.endAt)),e.h=n}return e.h}function Vl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!wl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eh(t.startAt,e.startAt)&&eh(t.endAt,e.endAt)}function Ul(t){return bl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ql=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ui.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Bl(t,n,r):"array-contains"===n?new Kl(t,r):"in"===n?new $l(t,r):"not-in"===n?new Ql(t,r):"array-contains-any"===n?new Gl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Hl(t,n):new zl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Sl(e,this.value)):null!==e&&_l(this.value)===_l(e)&&this.m(Sl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Bl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bl.fromName(r.referenceValue),i}return Object(ui.c)(e,t),e.prototype.matches=function(t){var e=bl.comparator(t.key,this.key);return this.m(e)},e}(ql),Hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Wl(0,n),r}return Object(ui.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ql),zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Wl(0,n),r}return Object(ui.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ql);function Wl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return bl.fromName(t.referenceValue)}))}var Kl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ui.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return xl(e)&&Cl(e.arrayValue,this.value)},e}(ql),$l=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ui.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Cl(this.value.arrayValue,e)},e}(ql),Ql=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ui.c)(e,t),e.prototype.matches=function(t){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Cl(this.value.arrayValue,e)},e}(ql),Gl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ui.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!xl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Cl(e.value.arrayValue,t)}))},e}(ql),Yl=function(t,e){this.position=t,this.before=e};function Jl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ol(t)})).join(",")}var Zl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function th(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?bl.comparator(bl.fromName(s.referenceValue),n.key):Sl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function eh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wl(t.position[n],e.position[n]))return!1;return!0}var nh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function rh(t,e,n,r,i,o,s,a){return new nh(t,e,n,r,i,o,s,a)}function ih(t){return new nh(t)}function oh(t){return!ml(t.limit)&&"F"===t.limitType}function sh(t){return!ml(t.limit)&&"L"===t.limitType}function ah(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function uh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ch(t){return null!==t.collectionGroup}function lh(t){var e=$c(t);if(null===e.p){e.p=[];var n=uh(e),r=ah(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Zl(n)),e.p.push(new Zl(al.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Zl(al.keyField(),u))}}}return e.p}function hh(t){var e=$c(t);if(!e.T)if("F"===e.limitType)e.T=Fl(e.path,e.collectionGroup,lh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=lh(e);r<i.length;r++){var o=i[r];n.push(new Zl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Yl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Yl(e.startAt.position,!e.startAt.before):null;e.T=Fl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function dh(t,e,n){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fh(t,e){return Vl(hh(t),hh(e))&&t.limitType===e.limitType}function ph(t){return Ll(hh(t))+"|lt:"+t.limitType}function gh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ol(e.value);var e})).join(", ")+"]"),ml(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Jl(t.startAt)),t.endAt&&(e+=", endAt: "+Jl(t.endAt)),"Target("+e+")"}(hh(t))+"; limitType="+t.limitType+")"}function mh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!th(t.startAt,lh(t),e)||t.endAt&&th(t.endAt,lh(t),e))}(t,e)}function yh(t){return function(e,n){for(var r=!1,i=0,o=lh(t);i<o.length;i++){var s=o[i],a=vh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function vh(t,e,n){var r=t.field.isKeyField()?bl.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Sl(r,i):Wc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wc()}}function bh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(e)?"-0":e}}function _h(t){return{integerValue:""+t}}function wh(t,e){return vl(e)?_h(e):bh(t,e)}var Ch=function(){this._=void 0};function Sh(t,e,n){return t instanceof Th?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ih?xh(t,e):t instanceof kh?Ah(t,e):function(t,e){var n=Oh(t,e),r=Nh(n)+Nh(t.A);return Il(n)&&Il(t.A)?_h(r):bh(t.R,r)}(t,e)}function Eh(t,e,n){return t instanceof Ih?xh(t,e):t instanceof kh?Ah(t,e):n}function Oh(t,e){return t instanceof jh?Il(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Th=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e}(Ch),Ih=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ui.c)(e,t),e}(Ch);function xh(t,e){for(var n=Rh(e),r=function(t){n.some((function(e){return wl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var kh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ui.c)(e,t),e}(Ch);function Ah(t,e){for(var n=Rh(e),r=function(t){n=n.filter((function(e){return!wl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(ui.c)(e,t),e}(Ch);function Nh(t){return dl(t.integerValue||t.doubleValue)}function Rh(t){return xl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ph=function(t,e){this.field=t,this.transform=e},Dh=function(t,e){this.version=t,this.transformResults=e},Mh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Lh=function(){};function Vh(t,e,n){t instanceof zh?function(t,e,n){var r=t.value.clone(),i=$h(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Wh?function(t,e,n){if(Fh(t.precondition,e)){var r=$h(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Kh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Uh(t,e,n){t instanceof zh?function(t,e,n){if(Fh(t.precondition,e)){var r=t.value.clone(),i=Qh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Hh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Wh?function(t,e,n){if(Fh(t.precondition,e)){var r=Qh(t.fieldTransforms,n,e),i=e.data;i.setAll(Kh(t)),i.setAll(r),e.convertToFoundDocument(Hh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Fh(t.precondition,e)&&e.convertToNoDocument(tl.min())}(t,e)}function qh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Oh(o.transform,s||null);null!=a&&(null==n&&(n=Rl.empty()),n.set(o.field,a))}return n||null}function Bh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Jc(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ih&&e instanceof Ih||t instanceof kh&&e instanceof kh?Jc(t.elements,e.elements,wl):t instanceof jh&&e instanceof jh?wl(t.A,e.A):t instanceof Th&&e instanceof Th}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Hh(t){return t.isFoundDocument()?t.version:tl.min()}var zh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(ui.c)(e,t),e}(Lh),Wh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(ui.c)(e,t),e}(Lh);function Kh(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function $h(t,e,n){var r=new Map;Kc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Eh(s,a,n[i]))}return r}function Qh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Sh(a,u,e))}return r}var Gh,Yh,Jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(ui.c)(e,t),e}(Lh),Zh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(ui.c)(e,t),e}(Lh),Xh=function(t){this.count=t};function td(t){switch(t){case Fc.OK:return Wc();case Fc.CANCELLED:case Fc.UNKNOWN:case Fc.DEADLINE_EXCEEDED:case Fc.RESOURCE_EXHAUSTED:case Fc.INTERNAL:case Fc.UNAVAILABLE:case Fc.UNAUTHENTICATED:return!1;case Fc.INVALID_ARGUMENT:case Fc.NOT_FOUND:case Fc.ALREADY_EXISTS:case Fc.PERMISSION_DENIED:case Fc.FAILED_PRECONDITION:case Fc.ABORTED:case Fc.OUT_OF_RANGE:case Fc.UNIMPLEMENTED:case Fc.DATA_LOSS:return!0;default:return Wc()}}function ed(t){if(void 0===t)return Bc("GRPC error has no .code"),Fc.UNKNOWN;switch(t){case Gh.OK:return Fc.OK;case Gh.CANCELLED:return Fc.CANCELLED;case Gh.UNKNOWN:return Fc.UNKNOWN;case Gh.DEADLINE_EXCEEDED:return Fc.DEADLINE_EXCEEDED;case Gh.RESOURCE_EXHAUSTED:return Fc.RESOURCE_EXHAUSTED;case Gh.INTERNAL:return Fc.INTERNAL;case Gh.UNAVAILABLE:return Fc.UNAVAILABLE;case Gh.UNAUTHENTICATED:return Fc.UNAUTHENTICATED;case Gh.INVALID_ARGUMENT:return Fc.INVALID_ARGUMENT;case Gh.NOT_FOUND:return Fc.NOT_FOUND;case Gh.ALREADY_EXISTS:return Fc.ALREADY_EXISTS;case Gh.PERMISSION_DENIED:return Fc.PERMISSION_DENIED;case Gh.FAILED_PRECONDITION:return Fc.FAILED_PRECONDITION;case Gh.ABORTED:return Fc.ABORTED;case Gh.OUT_OF_RANGE:return Fc.OUT_OF_RANGE;case Gh.UNIMPLEMENTED:return Fc.UNIMPLEMENTED;case Gh.DATA_LOSS:return Fc.DATA_LOSS;default:return Wc()}}(Yh=Gh||(Gh={}))[Yh.OK=0]="OK",Yh[Yh.CANCELLED=1]="CANCELLED",Yh[Yh.UNKNOWN=2]="UNKNOWN",Yh[Yh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yh[Yh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yh[Yh.NOT_FOUND=5]="NOT_FOUND",Yh[Yh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yh[Yh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yh[Yh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yh[Yh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yh[Yh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yh[Yh.ABORTED=10]="ABORTED",Yh[Yh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yh[Yh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yh[Yh.INTERNAL=13]="INTERNAL",Yh[Yh.UNAVAILABLE=14]="UNAVAILABLE",Yh[Yh.DATA_LOSS=15]="DATA_LOSS";var nd=function(){function t(t,e){this.comparator=t,this.root=e||id.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new rd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new rd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!0)},t}(),rd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),id=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Wc();if(this.right.isRed())throw Wc();var t=this.left.check();if(t!==this.right.check())throw Wc();return t+(this.isRed()?0:1)},t}();id.EMPTY=null,id.RED=!0,id.BLACK=!1,id.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Wc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Wc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Wc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Wc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Wc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new id(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var od=function(){function t(t){this.comparator=t,this.data=new nd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new sd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new sd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),sd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ad=new nd(bl.comparator);function ud(){return ad}var cd=new nd(bl.comparator);function ld(){return cd}var hd=new nd(bl.comparator);function dd(){return hd}var fd=new od(bl.comparator);function pd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=fd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var gd=new od(Yc);function md(){return gd}var yd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(tl.min(),r,md(),ud(),pd())},t}(),vd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(cl.EMPTY_BYTE_STRING,n,pd(),pd(),pd())},t}(),bd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},_d=function(t,e){this.targetId=t,this.V=e},wd=function(t,e,n,r){void 0===n&&(n=cl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Cd=function(){function t(){this.S=0,this.D=Od(),this.C=cl.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=pd(),e=pd(),n=pd();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wc()}})),new vd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Od()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Sd=function(){function t(t){this.W=t,this.G=new Map,this.H=ud(),this.J=Ed(),this.Y=new od(Yc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Wc()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ul(i))if(0===n){var o=new bl(i.path);this.tt(e,o,Dl.newNoDocument(o,tl.min()))}else Kc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ul(o.target)){var s=new bl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Dl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=pd();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new yd(t,n,this.Y,this.H,r);return this.H=ud(),this.J=Ed(),this.Y=new od(Yc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Cd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new od(Yc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||qc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Cd),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ed(){return new nd(bl.comparator)}function Od(){return new nd(bl.comparator)}var Td={asc:"ASCENDING",desc:"DESCENDING"},Id={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xd=function(t,e){this.databaseId=t,this.I=e};function kd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ad(t,e){return t.I?e.toBase64():e.toUint8Array()}function jd(t,e){return kd(t,e.toTimestamp())}function Nd(t){return Kc(!!t),tl.fromTimestamp(function(t){var e=hl(t);return new Xc(e.seconds,e.nanos)}(t))}function Rd(t,e){return function(t){return new ol(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Pd(t){var e=ol.fromString(t);return Kc(rf(e)),e}function Dd(t,e){return Rd(t.databaseId,e.path)}function Md(t,e){var n=Pd(e);if(n.get(1)!==t.databaseId.projectId)throw new Lc(Fc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Lc(Fc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bl(Ud(n))}function Fd(t,e){return Rd(t.databaseId,e)}function Ld(t){var e=Pd(t);return 4===e.length?ol.emptyPath():Ud(e)}function Vd(t){return new ol(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ud(t){return Kc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function qd(t,e,n){return{name:Dd(t,e),fields:n.value.mapValue.fields}}function Bd(t,e,n){var r=Md(t,e.name),i=Nd(e.updateTime),o=new Rl({mapValue:{fields:e.fields}}),s=Dl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Hd(t,e){var n;if(e instanceof zh)n={update:qd(t,e.key,e.value)};else if(e instanceof Jh)n={delete:Dd(t,e.key)};else if(e instanceof Wh)n={update:qd(t,e.key,e.data),updateMask:nf(e.fieldMask)};else{if(!(e instanceof Zh))return Wc();n={verify:Dd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Th)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ih)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Wc()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:jd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wc()}(t,e.precondition)),n}function zd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Mh.updateTime(Nd(t.updateTime)):void 0!==t.exists?Mh.exists(t.exists):Mh.none()}(e.currentDocument):Mh.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(Kc("REQUEST_TIME"===e.setToServerValue),n=new Th):"appendMissingElements"in e?n=new Ih(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new kh(e.removeAllFromArray.values||[]):"increment"in e?n=new jh(t,e.increment):Wc();var r=al.fromServerFormat(e.fieldPath);return new Ph(r,n)}(t,e)})):[];if(e.update){var i=Md(t,e.update.name),o=new Rl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new ul((t.fieldPaths||[]).map((function(t){return al.fromServerFormat(t)})))}(e.updateMask);return new Wh(i,o,s,n,r)}return new zh(i,o,n,r)}if(e.delete){var a=Md(t,e.delete);return new Jh(a,n)}if(e.verify){var u=Md(t,e.verify);return new Zh(u,n)}return Wc()}function Wd(t,e){return{documents:[Fd(t,e.path)]}}function Kd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Al(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NAN"}};if(kl(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Al(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NOT_NAN"}};if(kl(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zd(t.field),op:Jd(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Zd(t.field),direction:Yd(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ml(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Qd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Qd(e.endAt)),n}function $d(t){var e=Ld(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[ef(e)]:void 0!==e.fieldFilter?[tf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Wc():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Zl(Xd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ml(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Gd(n.startAt));var l=null;return n.endAt&&(l=Gd(n.endAt)),rh(e,i,a,s,u,"F",c,l)}function Qd(t){return{before:t.before,values:t.position}}function Gd(t){return new Yl(t.values||[],!!t.before)}function Yd(t){return Td[t]}function Jd(t){return Id[t]}function Zd(t){return{fieldPath:t.canonicalString()}}function Xd(t){return al.fromServerFormat(t.fieldPath)}function tf(t){return ql.create(Xd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Wc()}}(t.fieldFilter.op),t.fieldFilter.value)}function ef(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xd(t.unaryFilter.field);return ql.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xd(t.unaryFilter.field);return ql.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xd(t.unaryFilter.field);return ql.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xd(t.unaryFilter.field);return ql.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Wc()}}function nf(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function rf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function of(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=af(e)),e=sf(t.get(n),e);return af(e)}function sf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function af(t){return t+"\x01\x01"}function uf(t){var e=t.length;if(Kc(e>=2),2===e)return Kc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ol.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Wc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Wc()}o=s+2}return new ol(r)}var cf=function(t,e){this.seconds=t,this.nanoseconds=e},lf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};lf.store="owner",lf.key="owner";var hf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hf.store="mutationQueues",hf.keyPath="userId";var df=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};df.store="mutations",df.keyPath="batchId",df.userMutationsIndex="userMutationsIndex",df.userMutationsKeyPath=["userId","batchId"];var ff=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,of(e)]},t.key=function(t,e,n){return[t,of(e),n]},t}();ff.store="documentMutations",ff.PLACEHOLDER=new ff;var pf=function(t,e){this.path=t,this.readTime=e},gf=function(t,e){this.path=t,this.version=e},mf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};mf.store="remoteDocuments",mf.readTimeIndex="readTimeIndex",mf.readTimeIndexPath="readTime",mf.collectionReadTimeIndex="collectionReadTimeIndex",mf.collectionReadTimeIndexPath=["parentPath","readTime"];var yf=function(t){this.byteSize=t};yf.store="remoteDocumentGlobal",yf.key="remoteDocumentGlobalKey";var vf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vf.store="targets",vf.keyPath="targetId",vf.queryTargetsIndexName="queryTargetsIndex",vf.queryTargetsKeyPath=["canonicalId","targetId"];var bf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};bf.store="targetDocuments",bf.keyPath=["targetId","path"],bf.documentTargetsIndex="documentTargetsIndex",bf.documentTargetsKeyPath=["path","targetId"];var _f=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};_f.key="targetGlobalKey",_f.store="targetGlobal";var wf=function(t,e){this.collectionId=t,this.parent=e};wf.store="collectionParents",wf.keyPath=["collectionId","parent"];var Cf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Cf.store="clientMetadata",Cf.keyPath="clientId";var Sf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Sf.store="bundles",Sf.keyPath="bundleId";var Ef=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ef.store="namedQueries",Ef.keyPath="name";var Of=Object(ui.f)(Object(ui.f)([],Object(ui.f)(Object(ui.f)([],Object(ui.f)(Object(ui.f)([],Object(ui.f)(Object(ui.f)([],[hf.store,df.store,ff.store,mf.store,vf.store,lf.store,_f.store,bf.store]),[Cf.store])),[yf.store])),[wf.store])),[Sf.store,Ef.store]),Tf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",If=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),xf=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},kf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Wc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Af=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Rf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Lf(e.target.error);n.ft.reject(new Rf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Rf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(qc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Df(e)},t}(),jf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(ko.o)())&&Bc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return qc("SimpleDb","Removing database:",t),Mf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(ko.o)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(qc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Rf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Lc(Fc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Rf(t,n))},i.onupgradeneeded=function(t){qc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){qc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ui.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(ui.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ui.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Af.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),kf.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return qc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Nf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Mf(this.Pt.delete())},t}(),Rf=function(t){function e(e,n){var r=this;return(r=t.call(this,Fc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ui.c)(e,t),e}(Lc);function Pf(t){return"IndexedDbTransactionError"===t.name}var Df=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(qc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(qc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Mf(n)},t.prototype.add=function(t){return qc("SimpleDb","ADD",this.store.name,t,t),Mf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Mf(this.store.get(t)).next((function(n){return void 0===n&&(n=null),qc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return qc("SimpleDb","DELETE",this.store.name,t),Mf(this.store.delete(t))},t.prototype.count=function(){return qc("SimpleDb","COUNT",this.store.name),Mf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){qc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new kf((function(n,r){e.onerror=function(t){var e=Lf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new kf((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Nf(i),s=e(i.primaryKey,i.value,o);if(s instanceof kf){var a=s.catch((function(t){return o.done(),kf.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return kf.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Mf(t){return new kf((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Lf(t.target.error);n(e)}}))}var Ff=!1;function Lf(t){var e=jf._t(Object(ko.o)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Lc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ff||(Ff=!0,setTimeout((function(){throw r}),0)),r}}return t}var Vf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(ui.c)(e,t),e}(If);function Uf(t,e){var n=$c(t);return jf.It(n.Mt,e)}var qf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Uh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Uh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(tl.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),pd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Jc(this.mutations,t.mutations,(function(t,e){return Bh(t,e)}))&&Jc(this.baseMutations,t.baseMutations,(function(t,e){return Bh(t,e)}))},t}(),Bf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Kc(e.mutations.length===r.length);for(var i=dd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Hf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=tl.min()),void 0===o&&(o=tl.min()),void 0===s&&(s=cl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),zf=function(t){this.Lt=t};function Wf(t,e){if(e.document)return Bd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bl.fromSegments(e.noDocument.path),r=Yf(e.noDocument.readTime),i=Dl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=bl.fromSegments(e.unknownDocument.path);return r=Yf(e.unknownDocument.version),Dl.newUnknownDocument(o,r)}return Wc()}function Kf(t,e,n){var r=$f(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Dd(t,e.key),fields:e.data.value.mapValue.fields,updateTime:kd(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new mf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Gf(e.version);return s=e.hasCommittedMutations,new mf(null,new pf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Gf(e.version);return new mf(new gf(c,l),null,null,!0,r,i)}return Wc()}function $f(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Qf(t){var e=new Xc(t[0],t[1]);return tl.fromTimestamp(e)}function Gf(t){var e=t.toTimestamp();return new cf(e.seconds,e.nanoseconds)}function Yf(t){var e=new Xc(t.seconds,t.nanoseconds);return tl.fromTimestamp(e)}function Jf(t,e){for(var n=(e.baseMutations||[]).map((function(e){return zd(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return zd(t.Lt,e)})),o=Xc.fromMillis(e.localWriteTimeMs);return new qf(e.batchId,o,n,i)}function Zf(t){var e,n,r=Yf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Yf(t.lastLimboFreeSnapshotVersion):tl.min();return void 0!==t.query.documents?(Kc(1===(n=t.query).documents.length),e=hh(ih(Ld(n.documents[0])))):e=function(t){return hh($d(t))}(t.query),new Hf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cl.fromBase64String(t.resumeToken))}function Xf(t,e){var n,r=Gf(e.snapshotVersion),i=Gf(e.lastLimboFreeSnapshotVersion);n=Ul(e.target)?Wd(t.Lt,e.target):Kd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new vf(e.targetId,Ll(e.target),r,o,e.sequenceNumber,i,n)}function tp(t){var e=$d({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?dh(e,e.limit,"L"):e}var ep=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return np(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Yf(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return np(t).put({bundleId:(n=e).id,createTime:Gf(Nd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return rp(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:tp(e.bundledQuery),readTime:Yf(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return rp(t).put(function(t){return{name:t.name,readTime:Gf(Nd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function np(t){return Uf(t,Sf.store)}function rp(t){return Uf(t,Ef.store)}var ip=function(){function t(){this.Bt=new op}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),kf.resolve()},t.prototype.getCollectionParents=function(t,e){return kf.resolve(this.Bt.getEntries(e))},t}(),op=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new od(ol.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new od(ol.comparator)).toArray()},t}(),sp=function(){function t(){this.qt=new op}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:of(i)};return ap(t).put(o)}return kf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Zc(e),""],!1,!0);return ap(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(uf(o.parent))}return n}))},t}();function ap(t){return Uf(t,wf.store)}var up={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function lp(t,e,n){var r=t.store(df.store),i=t.store(ff.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Kc(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ff.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return kf.waitFor(o).next((function(){return c}))}function hp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Wc();e=t.noDocument}return JSON.stringify(e).length}cp.DEFAULT_COLLECTION_PERCENTILE=10,cp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cp.DEFAULT=new cp(41943040,cp.DEFAULT_COLLECTION_PERCENTILE,cp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cp.DISABLED=new cp(-1,0,0);var dp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Kc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pp(t).$t({index:df.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=gp(t),s=pp(t);return s.add({}).next((function(a){Kc("number"==typeof a);for(var u=new qf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Hd(t.Lt,e)})),i=n.mutations.map((function(e){return Hd(t.Lt,e)}));return new df(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new od((function(t,e){return Yc(t.canonicalString(),e.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],g=ff.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,ff.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),kf.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return pp(t).get(e).next((function(t){return t?(Kc(t.userId===n.userId),Jf(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?kf.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pp(t).$t({index:df.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Kc(e.batchId>=r),o=Jf(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pp(t).$t({index:df.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pp(t).Nt(df.userMutationsIndex,n).next((function(t){return t.map((function(t){return Jf(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ff.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return gp(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[2],c=uf(r[1]);if(a===n.userId&&e.path.isEqual(c))return pp(t).get(u).next((function(t){if(!t)throw Wc();Kc(t.userId===n.userId),o.push(Jf(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(Yc),i=[];return e.forEach((function(e){var o=ff.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=gp(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[2],u=uf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),kf.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ff.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new od(Yc);return gp(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[2],c=uf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(pp(t).get(e).next((function(t){if(null===t)throw Wc();Kc(t.userId===n.userId),r.push(Jf(n.R,t))})))})),kf.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return lp(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),kf.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return kf.resolve();var r=IDBKeyRange.lowerBound(ff.prefixForUser(e.userId)),i=[];return gp(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=uf(t[1]);i.push(o)}else r.done()})).next((function(){Kc(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return fp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return mp(t).get(this.userId).next((function(t){return t||new hf(e.userId,-1,"")}))},t}();function fp(t,e,n){var r=ff.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return gp(t).$t({range:o,Ft:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function pp(t){return Uf(t,df.store)}function gp(t){return Uf(t,ff.store)}function mp(t){return Uf(t,hf.store)}var yp=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),vp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new yp(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return tl.fromTimestamp(new Xc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return bp(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Kc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return bp(t).$t((function(s,a){var u=Zf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return kf.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return bp(t).$t((function(t,n){var r=Zf(n);e(r)}))},t.prototype.Xt=function(t){return _p(t).get(_f.key).next((function(t){return Kc(null!==t),t}))},t.prototype.Zt=function(t,e){return _p(t).put(_f.key,e)},t.prototype.te=function(t,e){return bp(t).put(Xf(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ll(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bp(t).$t({range:r,index:vf.queryTargetsIndexName},(function(t,n,r){var o=Zf(n);Vl(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=wp(t);return e.forEach((function(e){var s=of(e.path);i.push(o.put(new bf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),kf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=wp(t);return kf.forEach(e,(function(e){var o=of(e.path);return kf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=wp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=wp(t),i=pd();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=uf(t[1]),o=new bl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=of(e.path),r=IDBKeyRange.bound([n],[Zc(n)],!1,!0),i=0;return wp(t).$t({index:bf.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return bp(t).get(e).next((function(t){return t?Zf(t):null}))},t}();function bp(t){return Uf(t,vf.store)}function _p(t){return Uf(t,_f.store)}function wp(t){return Uf(t,bf.store)}function Cp(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){if(t.code!==Fc.FAILED_PRECONDITION||t.message!==Tf)throw t;return qc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Sp(t,e){var n=t[1],r=e[1],i=Yc(t[0],e[0]);return 0===i?Yc(n,r):i}var Ep=function(){function t(t){this.ne=t,this.buffer=new od(Sp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Sp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Op=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;qc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(ui.b)(e,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Pf(e=n.sent())?(qc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Cp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Tp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return kf.resolve(Mc.o);var r=new Ep(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(qc("LruGarbageCollector","Garbage collection skipped; disabled"),kf.resolve(up)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(qc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),up):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(qc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Uc()<=Ao.a.DEBUG&&qc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),kf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Ip=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Tp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return xp(t,n)},t.prototype.removeReference=function(t,e,n){return xp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return xp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return mp(t).Ot((function(r){return fp(t,r,e).next((function(t){return t&&(n=!0),kf.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),wp(t).delete([0,of(s.path)])}))}));i.push(u)}})).next((function(){return kf.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return xp(t,e)},t.prototype.we=function(t,e){var n,r=wp(t),i=Mc.o;return r.$t({index:bf.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Mc.o&&e(new bl(uf(n)),i),i=s,n=o):i=Mc.o})).next((function(){i!==Mc.o&&e(new bl(uf(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function xp(t,e){return wp(t).put(function(t,e){return new bf(0,of(t.path),e)}(e,t.currentSequenceNumber))}var kp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){nl(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return rl(this.inner)},t}(),Ap=function(){function t(){this.changes=new kp((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:tl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Dl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?kf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),jp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Pp(t).put(Dp(e),n)},t.prototype.removeEntry=function(t,e){var n=Pp(t),r=Dp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Pp(t).get(Dp(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Pp(t).get(Dp(e)).next((function(t){return{document:n.ye(e,t),size:hp(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ud();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ud(),i=new nd(bl.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,hp(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return kf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Pp(t).$t({range:r},(function(t,e,r){for(var s=bl.fromSegments(t);o&&bl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ud(),o=e.path.length+1,s={};if(n.isEqual(tl.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=$f(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=mf.collectionReadTimeIndex}return Pp(t).$t(s,(function(t,n,s){if(t.length===o){var a=Wf(r.R,n);e.path.isPrefixOf(a.key.path)?mh(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Np(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Rp(t).get(yf.key).next((function(t){return Kc(!!t),t}))},t.prototype.me=function(t,e){return Rp(t).put(yf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Wf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(tl.min()))return n}return Dl.newInvalidDocument(t)},t}(),Np=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new kp((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(ui.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new od((function(t,e){return Yc(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Kf(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=hp(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Kf(e.Ie.R,Dl.newNoDocument(o,tl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),kf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Ap);function Rp(t){return Uf(t,yf.store)}function Pp(t){return Uf(t,mf.store)}function Dp(t){return t.path.toArray()}var Mp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Kc(n<r&&n>=0&&r<=11);var o=new Af("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(lf.store)}(t),function(t){t.createObjectStore(hf.store,{keyPath:hf.keyPath}),t.createObjectStore(df.store,{keyPath:df.keyPath,autoIncrement:!0}).createIndex(df.userMutationsIndex,df.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ff.store)}(t),Fp(t),function(t){t.createObjectStore(mf.store)}(t));var s=kf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(bf.store),t.deleteObjectStore(vf.store),t.deleteObjectStore(_f.store)}(t),Fp(t)),s=s.next((function(){return function(t){var e=t.store(_f.store),n=new _f(0,0,tl.min().toTimestamp(),0);return e.put(_f.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(df.store).Nt().next((function(n){t.deleteObjectStore(df.store),t.createObjectStore(df.store,{keyPath:df.keyPath,autoIncrement:!0}).createIndex(df.userMutationsIndex,df.userMutationsKeyPath,{unique:!0});var r=e.store(df.store),i=n.map((function(t){return r.put(t)}));return kf.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Cf.store,{keyPath:Cf.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(yf.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mf.store);e.createIndex(mf.readTimeIndex,mf.readTimeIndexPath,{unique:!1}),e.createIndex(mf.collectionReadTimeIndex,mf.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Sf.store,{keyPath:Sf.keyPath})}(t),function(t){t.createObjectStore(Ef.store,{keyPath:Ef.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(mf.store).$t((function(t,n){e+=hp(n)})).next((function(){var n=new yf(e);return t.store(yf.store).put(yf.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(hf.store),r=t.store(df.store);return n.Nt().next((function(n){return kf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(df.userMutationsIndex,i).next((function(r){return kf.forEach(r,(function(r){Kc(r.userId===n.userId);var i=Jf(e.R,r);return lp(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(bf.store),n=t.store(mf.store);return t.store(_f.store).get(_f.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new ol(n),s=function(t){return[0,of(t)]}(o);r.push(e.get(s).next((function(n){return n?kf.resolve():function(n){return e.put(new bf(0,of(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return kf.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(wf.store,{keyPath:wf.keyPath});var n=e.store(wf.store),r=new op,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:of(i)})}};return e.store(mf.store).$t({Ft:!0},(function(t,e){var n=new ol(t);return i(n.popLast())})).next((function(){return e.store(ff.store).$t({Ft:!0},(function(t,e){var n=uf(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(vf.store);return n.$t((function(t,r){var i=Zf(r),o=Xf(e.R,i);return n.put(o)}))},t}();function Fp(t){t.createObjectStore(bf.store,{keyPath:bf.keyPath}).createIndex(bf.documentTargetsIndex,bf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vf.store,{keyPath:vf.keyPath}).createIndex(vf.queryTargetsIndexName,vf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(_f.store)}var Lp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Lc(Fc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ip(this,i),this.Le=n+"main",this.R=new zf(u),this.Be=new jf(this.Le,11,new Mp(this.R)),this.qe=new vp(this.referenceDelegate,this.R),this.Ut=new sp,this.Ue=function(t,e){return new jp(t,e)}(this.R,this.Ut),this.Ke=new ep,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Bc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Lc(Fc.FAILED_PRECONDITION,Lp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Mc(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(ui.b)(e,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(ui.b)(e,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(ui.b)(e,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return qp(e).put(new Cf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Pf(e))return qc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return qc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Up(t).get(lf.key).next((function(t){return kf.resolve(e.tn(t))}))},t.prototype.en=function(t){return qp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Uf(t,Cf.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return kf.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?kf.resolve(!0):Up(t).get(lf.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Lc(Fc.FAILED_PRECONDITION,Lp);return!1}}return!(!e.networkEnabled||!e.inForeground)||qp(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&qc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t=this;return Object(ui.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[lf.store,Cf.store],(function(e){var n=new Vf(e,Mc.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return qp(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return dp.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return qc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Of,(function(o){return r=new Vf(o,i.Ne?i.Ne.next():Mc.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Bc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Lc(Fc.FAILED_PRECONDITION,Tf);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Up(t).get(lf.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Lc(Fc.FAILED_PRECONDITION,Lp)}))},t.prototype.Ze=function(t){var e=new lf(this.clientId,this.allowTabSynchronization,Date.now());return Up(t).put(lf.key,e)},t.yt=function(){return jf.yt()},t.prototype.Xe=function(t){var e=this,n=Up(t);return n.get(lf.key).next((function(t){return e.tn(t)?(qc("IndexedDbPersistence","Releasing primary lease."),n.delete(lf.key)):kf.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Bc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(ko.z)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return qc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Bc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Bc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Up(t){return Uf(t,lf.store)}function qp(t){return Uf(t,Cf.store)}function Bp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Hp=function(t,e){this.progress=t,this.wn=e},zp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ch(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bl(e)).next((function(t){var e=ld();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ld();return this.Ut.getCollectionParents(t,i).next((function(s){return kf.forEach(s,(function(s){var a=function(t,e){return new nh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Dl.newInvalidDocument(c),r=r.insert(c,l)),Uh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){mh(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=pd(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Wh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Wp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=pd(),i=pd(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Kp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(tl.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(oh(e)||sh(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Uc()<=Ao.a.DEBUG&&qc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new od(yh(t));return e.forEach((function(e,r){mh(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Uc()<=Ao.a.DEBUG&&qc("QueryEngine","Using full collection scan to execute query:",gh(e)),this.Sn.getDocumentsMatchingQuery(t,e,tl.min())},t}(),$p=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new nd(Yc),this.Fn=new kp((function(t){return Ll(t)}),Vl),this.$n=tl.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new zp(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Qp(t,e,n,r){return new $p(t,e,n,r)}function Gp(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ui.d)(this,(function(s){switch(s.label){case 0:return n=$c(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new zp(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=pd(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Yp(t,e){var n=$c(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=kf.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Kc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Jp(t){var e=$c(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Zp(t,e){var n=$c(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Kc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=ud();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Xp(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(tl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return kf.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function Xp(t,e,n,r,i){var o=pd();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ud();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(tl.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):qc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function tg(t,e){var n=$c(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function eg(t,e){var n=$c(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?kf.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new Hf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function ng(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:r=$c(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Pf(s=a.sent()))throw s;return qc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function rg(t,e,n){var r=$c(t),i=tl.min(),o=pd();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=$c(t),i=r.Fn.get(n);return void 0!==i?kf.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,hh(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:tl.min(),n?o:pd())})).next((function(t){return{documents:t,Bn:o}}))}))}function ig(t,e){var n=$c(t),r=$c(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function og(t){var e=$c(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=$c(t),i=ud(),o=$f(n),s=Pp(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:mf.readTimeIndex,range:a},(function(t,e){var n=Wf(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Qf(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn;return e.$n=t.readTime,n}))}function sg(t){return Object(ui.b)(this,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){return[2,(e=$c(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Pp(t),n=tl.min();return e.$t({index:mf.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Qf(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function ag(t,e,n,r){return Object(ui.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,d,f;return Object(ui.d)(this,(function(p){switch(p.label){case 0:for(i=$c(t),o=pd(),s=ud(),a=dd(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,eg(i,function(t){return hh(ih(ol.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Xp(t,d,s,tl.min(),a).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next((function(){return i.qe.addMatchingKeys(t,o,f.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function ug(t,e,n){return void 0===n&&(n=pd()),Object(ui.b)(this,void 0,void 0,(function(){var r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return[4,eg(t,hh(tp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=$c(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Nd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(cl.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var cg=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return kf.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Nd(n.createTime)}),kf.resolve()},t.prototype.getNamedQuery=function(t,e){return kf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:tp(t.bundledQuery),readTime:Nd(t.readTime)}}(e)),kf.resolve()},t}(),lg=function(){function t(){this.Wn=new od(hg.Gn),this.zn=new od(hg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new hg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new hg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new bl(new ol([])),r=new hg(n,t),i=new hg(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bl(new ol([])),n=new hg(e,t),r=new hg(e,t+1),i=pd();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new hg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),hg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bl.comparator(t.key,e.key)||Yc(t.ns,e.ns)},t.Hn=function(t,e){return Yc(t.ns,e.ns)||bl.comparator(t.key,e.key)},t}(),dg=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new od(hg.Gn)}return t.prototype.checkEmpty=function(t){return kf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new qf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new hg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return kf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return kf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return kf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return kf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return kf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new hg(e,0),i=new hg(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),kf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(Yc);return e.forEach((function(t){var e=new hg(t,0),i=new hg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),kf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bl.isDocumentKey(i)||(i=i.child(""));var o=new hg(new bl(i),0),s=new od(Yc);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),kf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Kc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return kf.forEach(e.mutations,(function(i){var o=new hg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new hg(e,0),r=this.rs.firstAfterOrEqual(n);return kf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return kf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),fg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new nd(bl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return kf.resolve(n?n.document.clone():Dl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ud();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Dl.newInvalidDocument(t))})),kf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ud(),i=new bl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||mh(e,u)&&(r=r.insert(u.key,u.clone()))}return kf.resolve(r)},t.prototype.fs=function(t,e){return kf.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new pg(this)},t.prototype.getSize=function(t){return kf.resolve(this.size)},t}(),pg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(ui.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),kf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ap),gg=function(){function t(t){this.persistence=t,this.ds=new kp((function(t){return Ll(t)}),Vl),this.lastRemoteSnapshotVersion=tl.min(),this.highestTargetId=0,this.ws=0,this._s=new lg,this.targetCount=0,this.ys=yp.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),kf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return kf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return kf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),kf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),kf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new yp(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,kf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),kf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,kf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),kf.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return kf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return kf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),kf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),kf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),kf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return kf.resolve(n)},t.prototype.containsKey=function(t,e){return kf.resolve(this._s.containsKey(e))},t}(),mg=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Mc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new gg(this),this.Ut=new ip,this.Ue=function(t,e){return new fg(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new zf(e),this.Ke=new cg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new dg(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;qc("MemoryPersistence","Starting transaction:",t);var i=new yg(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return kf.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),yg=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(ui.c)(e,t),e}(If),vg=function(){function t(t){this.persistence=t,this.As=new lg,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Wc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),kf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),kf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),kf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return kf.forEach(this.vs,(function(r){var i=bl.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return kf.or([function(){return kf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),bg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function _g(t,e){return"firestore_clients_"+t+"_"+e}function wg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Cg(t,e){return"firestore_targets_"+t+"_"+e}bg.UNAUTHENTICATED=new bg(null),bg.GOOGLE_CREDENTIALS=new bg("google-credentials-uid"),bg.FIRST_PARTY=new bg("first-party-uid"),bg.MOCK_USER=new bg("mock-user");var Sg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Lc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Bc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Eg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Lc(i.error.code,i.error.message)),o?new t(e,i.state,r):(Bc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Og=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=md(),s=0;i&&s<r.activeTargetIds.length;++s)i=vl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Bc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Tg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Bc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ig=function(){function t(){this.activeTargetIds=md()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),xg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new nd(Yc),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=_g(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Ig),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ui.d)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(_g(this.persistenceKey,r)))&&(o=Og.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.ks(c[u]);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Cg(this.persistenceKey,t));if(n){var r=Eg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Cg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return qc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){qc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){qc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(qc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Bc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(ui.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(ui.d)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Mc.o;if(null!=t)try{var n=JSON.parse(t);Kc("number"==typeof n),e=n}catch(t){Bc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Mc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Sg(this.currentUser,t,e,n),i=wg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=wg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Cg(this.persistenceKey,t),i=new Eg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Og.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Sg.Vs(new bg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Eg.Vs(r,e)},t.prototype.js=function(t){return Tg.Vs(t)},t.prototype.ii=function(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(qc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=md();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),kg=function(){function t(){this.li=new Ig,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ig,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ag=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),jg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){qc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){qc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ng={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Rg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Pg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(ui.c)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new Dc;s.listenOnce(jc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Ac.NO_ERROR:var e=s.getResponseJson();qc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ac.TIMEOUT:qc("Connection",'RPC "'+t+'" timed out'),o(new Lc(Fc.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:var n=s.getStatus();if(qc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Fc).indexOf(e)>=0?e:Fc.UNKNOWN}(r.status);o(new Lc(a,r.message))}else o(new Lc(Fc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Lc(Fc.UNAVAILABLE,"Connection failed."));break;default:Wc()}}finally{qc("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Oc,i=ba(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Rc({})),this.ki(o.initMessageHeaders,e),Object(ko.v)()||Object(ko.y)()||Object(ko.s)()||Object(ko.u)()||Object(ko.A)()||Object(ko.r)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");qc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Rg({Ei:function(t){c?qc("Connection","Not sending because WebChannel is closed:",t):(u||(qc("Connection","Opening WebChannel transport."),a.open(),u=!0),qc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,Pc.EventType.OPEN,(function(){c||qc("Connection","WebChannel transport opened.")})),h(a,Pc.EventType.CLOSE,(function(){c||(c=!0,qc("Connection","WebChannel transport closed"),l.Vi())})),h(a,Pc.EventType.ERROR,(function(t){c||(c=!0,Hc("Connection","WebChannel transport errored:",t),l.Vi(new Lc(Fc.UNAVAILABLE,"The operation could not be completed")))})),h(a,Pc.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Kc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){qc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Gh[t];if(void 0!==e)return ed(e)}(i),s=r.message;void 0===o&&(o=Fc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Lc(o,s)),a.close()}else qc("Connection","WebChannel received:",n),l.Si(n)}})),h(i,Nc.STAT_EVENT,(function(t){10===t.stat?qc("Connection","Detected buffering proxy"):11===t.stat&&qc("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);qc("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return qc("RestConnection","Received: ",t),t}),(function(e){throw Hc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ng[t]},t}());function Dg(){return"undefined"!=typeof window?window:null}function Mg(){return"undefined"!=typeof document?document:null}function Fg(t){return new xd(t,!0)}var Lg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&qc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Vg=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Lg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Fc.RESOURCE_EXHAUSTED?(Bc(e.toString()),Bc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Fc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Lc(Fc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(ui.b)(t,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return qc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(qc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ug=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(ui.c)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Kc(void 0===e||"string"==typeof e),cl.fromBase64String(e||"")):(Kc(void 0===e||e instanceof Uint8Array),cl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Fc.UNKNOWN:ed(t.code);return new Lc(e,t.message||"")}(a);n=new wd(r,i,o,s||null)}else if("documentChange"in e){i=Md(t,(r=e.documentChange).document.name),o=Nd(r.document.updateTime);var a=new Rl({mapValue:{fields:r.document.fields}}),u=(s=Dl.newFoundDocument(i,o,a),r.targetIds||[]);n=new bd(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Md(t,(r=e.documentDelete).document),o=r.readTime?Nd(r.readTime):tl.min(),a=Dl.newNoDocument(i,o),n=new bd([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Md(t,(r=e.documentRemove).document),n=new bd([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Wc();var c=e.filter;i=new Xh(r=c.count||0),n=new _d(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return tl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?tl.min():e.readTime?Nd(e.readTime):tl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Vd(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ul(r)?{documents:Wd(t,r)}:{query:Kd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ad(t,e.resumeToken):e.snapshotVersion.compareTo(tl.min())>0&&(n.readTime=kd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Vd(this.R),e.removeTarget=t,this.cr(e)},e}(Vg),qg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(ui.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Kc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Kc(void 0!==e),t.map((function(t){return function(t,e){var n=Nd(t.updateTime?t.updateTime:e);return n.isEqual(tl.min())&&(n=Nd(e)),new Dh(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Nd(t.commitTime);return this.listener.Tr(n,e)}return Kc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Vd(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Hd(e.R,t)}))};this.cr(n)},e}(Vg),Bg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(ui.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Lc(Fc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Fc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Lc(Fc.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Fc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Lc(Fc.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Hg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Bc(e),this.Vr=!1):qc("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),zg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(ui.b)(o,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){switch(t.label){case 0:return Xg(this)?(qc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ui.b)(this,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return(e=$c(t)).Or.add(4),[4,Kg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Wg(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Hg(n,r)};function Wg(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:if(!Xg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Kg(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function $g(t,e){var n=$c(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Zg(n)?Jg(n):pm(n).er()&&Gg(n,e))}function Qg(t,e){var n=$c(t),r=pm(n);n.$r.delete(e),r.er()&&Yg(n,e),0===n.$r.size&&(r.er()?r.ir():Xg(n)&&n.Br.set("Unknown"))}function Gg(t,e){t.qr.U(e.targetId),pm(t).mr(e)}function Yg(t,e){t.qr.U(e),pm(t).yr(e)}function Jg(t){t.qr=new Sd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),pm(t).start(),t.Br.Sr()}function Zg(t){return Xg(t)&&!pm(t).tr()&&t.$r.size>0}function Xg(t){return 0===$c(t).Or.size}function tm(t){t.qr=void 0}function em(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){return t.$r.forEach((function(e,n){Gg(t,e)})),[2]}))}))}function nm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(n){return tm(t),Zg(t)?(t.Br.Nr(e),Jg(t)):t.Br.set("Unknown"),[2]}))}))}function rm(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o;return Object(ui.d)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof wd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ui.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),qc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,im(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bd?t.qr.X(e):e instanceof _d?t.qr.rt(e):t.qr.et(e),n.isEqual(tl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Jp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(cl.EMPTY_BYTE_STRING,n.snapshotVersion)),Yg(t,e);var r=new Hf(n.target,e,1,n.sequenceNumber);Gg(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return qc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,im(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function im(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r=this;return Object(ui.d)(this,(function(i){switch(i.label){case 0:if(!Pf(e))throw e;return t.Or.add(1),[4,Kg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Jp(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(ui.b)(r,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return qc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Wg(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function om(t,e){return e().catch((function(n){return im(t,n,e)}))}function sm(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(ui.d)(this,(function(s){switch(s.label){case 0:e=$c(t),n=gm(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Xg(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,tg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=gm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,im(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return am(e)&&um(e),[2]}}))}))}function am(t){return Xg(t)&&!gm(t).tr()&&t.Fr.length>0}function um(t){gm(t).start()}function cm(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){return gm(t).Ar(),[2]}))}))}function lm(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ui.d)(this,(function(i){for(e=gm(t),n=0,r=t.Fr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function hm(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Bf.from(r,e,n),[4,om(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,sm(t)];case 2:return o.sent(),[2]}}))}))}function dm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(n){switch(n.label){case 0:return e&&gm(t).pr?[4,function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return td(r=e.code)&&r!==Fc.ABORTED?(n=t.Fr.shift(),gm(t).sr(),[4,om(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,sm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return am(t)&&um(t),[2]}}))}))}function fm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return n=$c(t),e?(n.Or.delete(2),[4,Wg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Kg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function pm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=$c(t);return r.br(),new Ug(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:em.bind(null,t),Ri:nm.bind(null,t),_r:rm.bind(null,t)}),t.Mr.push((function(n){return Object(ui.b)(e,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Zg(t)?Jg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),tm(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function gm(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=$c(t);return r.br(),new qg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:cm.bind(null,t),Ri:dm.bind(null,t),Ir:lm.bind(null,t),Tr:hm.bind(null,t)}),t.Mr.push((function(n){return Object(ui.b)(e,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,sm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(qc("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var mm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lc(Fc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ym(t,e){if(Bc("AsyncQueue",e+": "+t),Pf(t))return new Lc(Fc.UNAVAILABLE,e+": "+t);throw t}var vm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bl.comparator(e.key,n.key)}:function(t,e){return bl.comparator(t.key,e.key)},this.keyedMap=ld(),this.sortedSet=new nd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),bm=function(){function t(){this.Qr=new nd(bl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Wc():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),_m=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,vm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),wm=function(){this.Wr=void 0,this.listeners=[]},Cm=function(){this.queries=new kp((function(t){return ph(t)}),fh),this.onlineState="Unknown",this.Gr=new Set};function Sm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ui.d)(this,(function(c){switch(c.label){case 0:if(n=$c(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new wm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ym(a,"Initialization of query '"+gh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Im(n),[2]}}))}))}function Em(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ui.d)(this,(function(a){return n=$c(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Om(t,e){for(var n=$c(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Im(n)}function Tm(t,e,n){var r=$c(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Im(t){t.Gr.forEach((function(t){t.next()}))}var xm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _m(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=_m.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),km=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Am=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Md(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Bd(this.R,t.document,!1):Dl.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Nd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Am(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||pd()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return[4,ag(this.localStore,new Am(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,ug(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Hp(Object.assign({},this.progress),t))]}}))}))}}();var jm=function(t){this.key=t},Nm=function(t){this.key=t},Rm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=pd(),this.mutatedKeys=pd(),this.lo=yh(t),this.fo=new vm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new bm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=oh(this.query)&&i.size===this.query.limit?i.last():null,c=sh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=mh(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),oh(this.query)||sh(this.query))for(;s.size>this.query.limit;){var l=oh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new _m(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new bm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=pd(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Nm(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new jm(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=pd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return _m.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Pm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Dm=function(t){this.key=t,this.bo=!1},Mm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new kp((function(t){return ph(t)}),fh),this.Vo=new Map,this.So=new Set,this.Do=new nd(bl.comparator),this.Co=new Map,this.No=new lg,this.xo={},this.ko=new Map,this.Fo=yp.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Fm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:return n=dy(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,eg(n.localStore,hh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Lm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&$g(n.remoteStore,o),a.label=4;case 4:return[2,r]}}))}))}function Lm(t,e,n,r){return Object(ui.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(ui.d)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(ui.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,rg(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Jm(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,rg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Rm(e,i.Bn),s=o._o(i.documents),a=vd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Jm(t,n,u.To),c=new Pm(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Vm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return n=$c(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!fh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,ng(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Qg(n.remoteStore,r.targetId),Gm(n,r.targetId)})).catch(Cp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Gm(n,r.targetId),[4,ng(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Um(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:r=fy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=$c(t),i=Xc.now(),o=e.reduce((function(t,e){return t.add(e.key)}),pd());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=qh(c,n.get(c.key));null!=l&&s.push(new Wh(c.key,l,Pl(l.value.mapValue),Mh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new nd(Yc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ty(r,i.changes)];case 3:return a.sent(),[4,sm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ym(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function qm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r;return Object(ui.d)(this,(function(i){switch(i.label){case 0:n=$c(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Zp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Kc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Kc(r.bo):t.removedDocuments.size>0&&(Kc(r.bo),r.bo=!1))})),[4,ty(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Cp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Bm(t,e,n){var r=$c(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=$c(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Im(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hm(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(ui.d)(this,(function(c){switch(c.label){case 0:return(r=$c(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new nd(bl.comparator)).insert(o,Dl.newNoDocument(o,tl.min())),a=pd().add(o),u=new yd(tl.min(),new Map,new od(Yc),s,a),[4,qm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Xm(r),[3,4];case 2:return[4,ng(r.localStore,e,!1).then((function(){return Gm(r,e,n)})).catch(Cp)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function zm(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:n=$c(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Yp(n.localStore,e)];case 2:return i=o.sent(),Qm(n,r,null),$m(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ty(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Cp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Wm(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:r=$c(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=$c(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Kc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Qm(r,e,n),$m(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ty(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Cp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Km(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:Xg((n=$c(t)).remoteStore)||qc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=$c(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=ym(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function $m(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Qm(t,e,n){var r=$c(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Gm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ym(t,e)}))}function Ym(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Qg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Xm(t))}function Jm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof jm?(t.No.addReference(o.key,e),Zm(t,o)):o instanceof Nm?(qc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ym(t,o.key)):Wc()}}function Zm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(qc("SyncEngine","New document in limbo: "+n),t.So.add(r),Xm(t))}function Xm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bl(ol.fromString(e)),r=t.Fo.next();t.Co.set(r,new Dm(n)),t.Do=t.Do.insert(n,r),$g(t.remoteStore,new Hf(hh(ih(n.path)),r,2,Mc.o))}}function ty(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:return r=$c(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Wp.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(ui.d)(this,(function(l){switch(l.label){case 0:n=$c(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return kf.forEach(e,(function(e){return kf.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return kf.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Pf(r=l.sent()))throw r;return qc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.kn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.kn=n.kn.insert(a,c));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function ey(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return(n=$c(t)).currentUser.isEqual(e)?[3,3]:(qc("SyncEngine","User change. New user:",e.toKey()),[4,Gp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Lc(Fc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ty(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ny(t,e){var n=$c(t),r=n.Co.get(e);if(r&&r.bo)return pd().add(r.key);var i=pd(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function ry(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return[4,rg((n=$c(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Jm(n,e.targetId,i.To),i)]}}))}))}function iy(t){return Object(ui.b)(this,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){return[2,og((e=$c(t)).localStore).then((function(t){return ty(e,t)}))]}))}))}function oy(t,e,n,r){return Object(ui.b)(this,void 0,void 0,(function(){var i,o;return Object(ui.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=$c(t),r=$c(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):kf.resolve(null)}))}))}((i=$c(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,sm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Qm(i,e,r||null),$m(i,e),function(t,e){$c($c(t)._n).Gt(e)}(i.localStore,e)):Wc(),s.label=4;case 4:return[4,ty(i,o)];case 5:return s.sent(),[3,7];case 6:qc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function sy(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ui.d)(this,(function(c){switch(c.label){case 0:return dy(n=$c(t)),fy(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ay(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,fm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)$g(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then((function(){return Gm(n,e),ng(n.localStore,e,!0)})),Qg(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,ay(n,a)];case 5:return c.sent(),function(t){var e=$c(t);e.Co.forEach((function(t,n){Qg(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new nd(bl.comparator)}(n),n.$o=!1,[4,fm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function ay(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(ui.d)(this,(function(g){switch(g.label){case 0:n=$c(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,eg(n.localStore,hh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,ry(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ig(n.localStore,a)];case 8:return p=g.sent(),[4,eg(n.localStore,p)];case 9:return u=g.sent(),[4,Lm(n,uy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function uy(t){return rh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function cy(t){var e=$c(t);return $c($c(e.localStore).persistence).fn()}function ly(t,e,n,r){return Object(ui.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ui.d)(this,(function(a){switch(a.label){case 0:return(i=$c(t)).$o?(qc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,og(i.localStore)];case 3:return o=a.sent(),s=yd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ty(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,ng(i.localStore,e,!0)];case 6:return a.sent(),Gm(i,e,r),[3,8];case 7:Wc(),a.label=8;case 8:return[2]}}))}))}function hy(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(ui.d)(this,(function(d){switch(d.label){case 0:if(!(r=dy(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(qc("SyncEngine","Adding an already active target "+s),[3,5]):[4,ig(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,eg(r.localStore,a)];case 3:return u=d.sent(),[4,Lm(r,uy(a),u.targetId,!1)];case 4:d.sent(),$g(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,ng(r.localStore,t,!1).then((function(){Qg(r.remoteStore,t),Gm(r,t)})).catch(Cp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function dy(t){var e=$c(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ny.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hm.bind(null,e),e.vo._r=Om.bind(null,e.eventManager),e.vo.Mo=Tm.bind(null,e.eventManager),e}function fy(t){var e=$c(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wm.bind(null,e),e}var py=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return this.R=Fg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Qp(this.persistence,new Kp,t.initialUser,this.R)},t.prototype.qo=function(t){return new mg(vg.bs,this.R)},t.prototype.Bo=function(t){return new kg},t.prototype.terminate=function(){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),gy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ui.c)(e,t),e.prototype.initialize=function(e){return Object(ui.b)(this,void 0,void 0,(function(){var n=this;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,sg(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,fy(this.Qo.syncEngine)];case 4:return r.sent(),[4,sm(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Qp(this.persistence,new Kp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Op(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cp.withCacheSize(this.cacheSizeBytes):cp.DEFAULT;return new Vp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Dg(),Mg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new kg},e}(py),my=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ui.c)(e,t),e.prototype.initialize=function(e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r=this;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof xg?(this.sharedClientState.syncEngine={ui:oy.bind(null,n),ai:ly.bind(null,n),hi:hy.bind(null,n),fn:cy.bind(null,n),ci:iy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(ui.b)(r,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return[4,sy(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Dg();if(!xg.yt(e))throw new Lc(Fc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new xg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(gy),yy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n=this;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Bm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ey.bind(null,this.syncEngine),[4,fm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Cm},t.prototype.createDatastore=function(t){var e=Fg(t.databaseInfo.databaseId),n=new Pg(t.databaseInfo);return function(t,e,n){return new Bg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Bm(s.syncEngine,t,0)},o=jg.yt()?new jg:new Ag,new zg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Mm(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(ui.b)(this,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return e=$c(t),qc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Kg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),vy=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),by=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new km(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(ui.b)(this,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ui.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lc(Fc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(ui.d)(this,(function(u){switch(u.label){case 0:return n=$c(t),r=Vd(n.R)+"/documents",i={documents:e.map((function(t){return Dd(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Kc(!!e.found);var n=Md(t,e.found.name),r=Nd(e.found.updateTime),i=new Rl({mapValue:{fields:e.found.fields}});return Dl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Kc(!!e.missing),Kc(!!e.readTime);var n=Md(t,e.missing),r=Nd(e.readTime);return Dl.newNoDocument(n,r)}(t,e):Wc()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Kc(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Jh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ui.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=bl.fromPath(n);e.mutations.push(new Zh(r,e.precondition(r)))})),[4,function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return n=$c(t),r=Vd(n.R)+"/documents",i={writes:e.map((function(t){return Hd(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Wc();e=tl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Lc(Fc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Mh.updateTime(e):Mh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(tl.min()))throw new Lc(Fc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mh.updateTime(e)}return Mh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),_y=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Lg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(ui.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(ui.d)(this,(function(r){return t=new by(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ml(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!td(e)}return!1},t}(),wy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=bg.UNAUTHENTICATED,this.clientId=Gc.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(ui.b)(r,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return qc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lc(Fc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(ui.b)(t,void 0,void 0,(function(){var t,n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ym(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Cy(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),qc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(ui.b)(i,void 0,void 0,(function(){return Object(ui.d)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Gp(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Sy(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ey(t)];case 1:return n=i.sent(),qc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(ui.b)(this,void 0,void 0,(function(){var n,r;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return(n=$c(t)).asyncQueue.verifyOperationInProgress(),qc("RemoteStore","RemoteStore received new credentials"),r=Xg(n),n.Or.add(3),[4,Kg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Wg(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Ey(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(qc("FirestoreClient","Using default OfflineComponentProvider"),[4,Cy(t,new py)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Oy(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(qc("FirestoreClient","Using default OnlineComponentProvider"),[4,Sy(t,new yy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Ty(t){return Ey(t).then((function(t){return t.persistence}))}function Iy(t){return Ey(t).then((function(t){return t.localStore}))}function xy(t){return Oy(t).then((function(t){return t.remoteStore}))}function ky(t){return Oy(t).then((function(t){return t.syncEngine}))}function Ay(t){return Object(ui.b)(this,void 0,void 0,(function(){var e,n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return[4,Oy(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Fm.bind(null,e.syncEngine),n.onUnlisten=Vm.bind(null,e.syncEngine),n)]}}))}))}function jy(t,e,n){var r=this;void 0===n&&(n={});var i=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(r,void 0,void 0,(function(){var r;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vy({next:function(o){e.enqueueAndForget((function(){return Em(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Lc(Fc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Lc(Fc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new xm(ih(n.path),o,{includeMetadataChanges:!0,so:!0});return Sm(t,s)},[4,Ay(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Ny(t,e,n){var r=this;void 0===n&&(n={});var i=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(r,void 0,void 0,(function(){var r;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vy({next:function(n){e.enqueueAndForget((function(){return Em(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Lc(Fc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new xm(n,o,{includeMetadataChanges:!0,so:!0});return Sm(t,s)},[4,Ay(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Ry=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Py=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Dy=new Map,My=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Fy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(bg.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ly=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Vy=function(){function t(t){var e=this;this.currentUser=bg.UNAUTHENTICATED,this.oc=new xf,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){qc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(qc("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(qc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Kc("string"==typeof n.accessToken),new My(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Object(ui.b)(n,void 0,void 0,(function(){return Object(ui.d)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Kc(null===t||"string"==typeof t),new bg(t)},t}(),Uy=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=bg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),qy=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Uy(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(bg.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function By(t,e,n){if(!n)throw new Lc(Fc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zy(t,e,n,r){if(!0===e&&!0===r)throw new Lc(Fc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Wy(t){if(!bl.isDocumentKey(t))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ky(t){if(bl.isDocumentKey(t))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function $y(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Wc()}function Qy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Lc(Fc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$y(t);throw new Lc(Fc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Gy(t,e){if(e<=0)throw new Lc(Fc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Yy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Lc(Fc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lc(Fc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,zy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Jy=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yy({}),this._settingsFrozen=!1,t instanceof Py?(this._databaseId=t,this._credentials=new Fy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Lc(Fc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Py(t.options.projectId)}(t),this._credentials=new Vy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Lc(Fc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Lc(Fc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Fy;switch(t.type){case"gapi":var e=t.client;return Kc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new qy(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Lc(Fc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Dy.get(this))&&(qc("ComponentProvider","Removing Datastore"),Dy.delete(this),t.terminate()),Promise.resolve();var t},t}(),Zy=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tv(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Xy=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),tv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ih(r))||this)._path=r,i.type="collection",i}return Object(ui.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Zy(this.firestore,null,new bl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Xy);function ev(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ko.n)(t),By("collection","path",e),t instanceof Jy)return Ky(n=ol.fromString.apply(ol,Object(ui.f)([e],r))),new tv(t,null,n);if(!(t instanceof Zy||t instanceof tv))throw new Lc(Fc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ky(n=ol.fromString.apply(ol,Object(ui.f)([t.path],r)).child(ol.fromString(e))),new tv(t.firestore,null,n)}function nv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ko.n)(t),1===arguments.length&&(e=Gc.u()),By("doc","path",e),t instanceof Jy)return Wy(n=ol.fromString.apply(ol,Object(ui.f)([e],r))),new Zy(t,null,new bl(n));if(!(t instanceof Zy||t instanceof tv))throw new Lc(Fc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wy(n=t._path.child(ol.fromString.apply(ol,Object(ui.f)([e],r)))),new Zy(t.firestore,t instanceof tv?t.converter:null,new bl(n))}function rv(t,e){return t=Object(ko.n)(t),e=Object(ko.n)(e),(t instanceof Zy||t instanceof tv)&&(e instanceof Zy||e instanceof tv)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function iv(t,e){return t=Object(ko.n)(t),e=Object(ko.n)(e),t instanceof Xy&&e instanceof Xy&&t.firestore===e.firestore&&fh(t._query,e._query)&&t.converter===e.converter}var ov=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Lg(this,"async_queue_retry"),this.Ic=function(){var e=Mg();e&&qc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Mg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Mg();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new xf;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ui.d)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Pf(t=n.sent()))throw t;return qc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Bc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=mm.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Wc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(ui.b)(this,void 0,void 0,(function(){var t;return Object(ui.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function sv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var av=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ov,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(ui.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||cv(this),this._firestoreClient.terminate()},e}(Jy);function uv(t){return t._firestoreClient||cv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ry(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new wy(t._credentials,t._queue,r)}function lv(t,e,n){var r=this,i=new xf;return t.asyncQueue.enqueue((function(){return Object(ui.b)(r,void 0,void 0,(function(){var r;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Cy(t,n)];case 1:return o.sent(),[4,Sy(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Fc.FAILED_PRECONDITION||t.code===Fc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function hv(t){if(t._initialized||t._terminated)throw new Lc(Fc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new al(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),fv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(cl.fromBase64String(e))}catch(e){throw new Lc(Fc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(cl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),pv=function(t){this._methodName=t},gv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Lc(Fc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Lc(Fc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Yc(this._lat,t._lat)||Yc(this._long,t._long)},t}(),mv=/^__.*__$/,yv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Wh(t,this.data,this.fieldMask,e,this.fieldTransforms):new zh(t,this.data,e,this.fieldTransforms)},t}(),vv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Wh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function bv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wc()}}var _v=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Uv(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(bv(this.Nc)&&mv.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),wv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Fg(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new _v({Nc:t,methodName:e,qc:n,path:al.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Cv(t){var e=t._freezeSettings(),n=Fg(t._databaseId);return new wv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Mv("Data must be an object, but it was:",s,r);var a,u,c=Pv(r,s);if(o.merge)a=new ul(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Fv(e,d[h],n);if(!s.contains(f))throw new Lc(Fc.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");qv(l,f)||l.push(f)}a=new ul(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new yv(new Rl(c),a,u)}var Ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(pv);function Ov(t,e,n){return new _v({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype._toFieldTransform=function(t){return new Ph(t.path,new Th)},e.prototype.isEqual=function(t){return t instanceof e},e}(pv),Iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(ui.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ov(this,t,!0),n=this.Kc.map((function(t){return Rv(t,e)})),r=new Ih(n);return new Ph(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pv),xv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(ui.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ov(this,t,!0),n=this.Kc.map((function(t){return Rv(t,e)})),r=new kh(n);return new Ph(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pv),kv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(ui.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new jh(t.R,wh(t.R,this.Qc));return new Ph(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(pv);function Av(t,e,n,r){var i=t.Uc(1,e,n);Mv("Data must be an object, but it was:",i,r);var o=[],s=Rl.empty();nl(r,(function(t,r){var a=Vv(e,t,n);r=Object(ko.n)(r);var u=i.Oc(a);if(r instanceof Ev)o.push(a);else{var c=Rv(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ul(o);return new vv(s,a,i.fieldTransforms)}function jv(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Fv(e,r,n)],u=[i];if(o.length%2!=0)throw new Lc(Fc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Fv(e,o[c])),u.push(o[c+1]);for(var l=[],h=Rl.empty(),d=a.length-1;d>=0;--d)if(!qv(l,a[d])){var f=a[d],p=u[d];p=Object(ko.n)(p);var g=s.Oc(f);if(p instanceof Ev)l.push(f);else{var m=Rv(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new ul(l);return new vv(h,y,s.fieldTransforms)}function Nv(t,e,n,r){return void 0===r&&(r=!1),Rv(n,t.Uc(r?4:3,e))}function Rv(t,e){if(Dv(t=Object(ko.n)(t)))return Mv("Unsupported field value:",e,t),Pv(t,e);if(t instanceof pv)return function(t,e){if(!bv(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Rv(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(ko.n)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xc.fromDate(t);return{timestampValue:kd(e.R,n)}}if(t instanceof Xc)return n=new Xc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:kd(e.R,n)};if(t instanceof gv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fv)return{bytesValue:Ad(e.R,t._byteString)};if(t instanceof Zy){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Rd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+$y(t))}(t,e)}function Pv(t,e){var n={};return rl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nl(t,(function(t,r){var i=Rv(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Dv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xc||t instanceof gv||t instanceof fv||t instanceof Zy||t instanceof pv)}function Mv(t,e,n){if(!Dv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=$y(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function Fv(t,e,n){if((e=Object(ko.n)(e))instanceof dv)return e._internalPath;if("string"==typeof e)return Vv(t,e);throw Uv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Lv=new RegExp("[~\\*/\\[\\]]");function Vv(t,e,n){if(e.search(Lv)>=0)throw Uv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dv.bind.apply(dv,Object(ui.f)([void 0],e.split(".")))))._internalPath}catch(qb){throw Uv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Uv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Lc(Fc.INVALID_ARGUMENT,(a+=". ")+t+u)}function qv(t,e){return t.some((function(t){return t.isEqual(e)}))}var Bv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Zy(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(zv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Bv);function zv(t,e){return"string"==typeof e?Vv(t,e):e instanceof dv?e._internalPath:e._delegate._internalPath}var Wv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(ui.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new $v(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(zv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Bv),$v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Kv),Qv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new $v(n._firestore,n._userDataWriter,r.key,r,new Wv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lc(Fc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new $v(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new $v(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Gv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wc()}}function Yv(t,e){return t instanceof Kv&&e instanceof Kv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qv&&e instanceof Qv&&t._firestore===e._firestore&&iv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Jv(t){if(sh(t)&&0===t.explicitOrderBy.length)throw new Lc(Fc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Zv=function(){};function Xv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var tb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(ui.c)(e,t),e.prototype._apply=function(t){var e=Cv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ab(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(sb(r,t,l[c]));a={arrayValue:{values:u}}}else a=sb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ab(s,o),a=Nv(n,"where",s,"in"===o||"not-in"===o);var h=ql.create(i,o,a);return function(t,e){if(e.g()){var n=uh(t);if(null!==n&&!n.isEqual(e.field))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ah(t);null!==r&&ub(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Lc(Fc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Xy(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Zv),eb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(ui.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zl(e,n);return function(t,e){if(null===ah(t)){var n=uh(t);null!==n&&ub(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Xy(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new nh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Zv),nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(ui.c)(e,t),e.prototype._apply=function(t){return new Xy(t.firestore,t.converter,dh(t._query,this.Hc,this.Jc))},e}(Zv),rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(ui.c)(e,t),e.prototype._apply=function(t){var e=ob(t,this.type,this.Yc,this.Xc);return new Xy(t.firestore,t.converter,function(t,e){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Zv),ib=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(ui.c)(e,t),e.prototype._apply=function(t){var e=ob(t,this.type,this.Yc,this.Xc);return new Xy(t.firestore,t.converter,function(t,e){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Zv);function ob(t,e,n,r){if(n[0]=Object(ko.n)(n[0]),n[0]instanceof Bv)return function(t,e,n,r,i){if(!r)throw new Lc(Fc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=lh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Tl(e,r.key));else{var c=r.data.field(u.field);if(pl(c))throw new Lc(Fc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Yl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Cv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Lc(Fc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ch(t)&&-1!==c.indexOf("/"))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ol.fromString(c));if(!bl.isDocumentKey(l))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bl(l);a.push(Tl(e,h))}else{var d=Nv(n,r,c);a.push(d)}}return new Yl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function sb(t,e,n){if("string"==typeof(n=Object(ko.n)(n))){if(""===n)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ch(e)&&-1!==n.indexOf("/"))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ol.fromString(n));if(!bl.isDocumentKey(r))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Tl(t,new bl(r))}if(n instanceof Zy)return Tl(t,n._key);throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$y(n)+".")}function ab(t,e){if(!Array.isArray(t)||0===t.length)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ub(t,e,n){if(!n.isEqual(e))throw new Lc(Fc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var cb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),_l(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Wc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return nl(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new gv(dl(t.latitude),dl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return pl(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(gl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=hl(t);return new Xc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ol.fromString(t);Kc(rf(n));var r=new Py(n.get(1),n.get(3)),i=new bl(n.popFirst(5));return r.isEqual(e)||Bc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function lb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var hb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ui.c)(e,t),e.prototype.convertBytes=function(t){return new fv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zy(this.firestore,null,e)},e}(cb),db=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Cv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=fb(t,this._firestore),i=lb(r.converter,e,n),o=Sv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Mh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=fb(t,this._firestore);return o="string"==typeof(e=Object(ko.n)(e))||e instanceof dv?jv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Av(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Mh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=fb(t,this._firestore);return this._mutations=this._mutations.concat(new Jh(e._key,Mh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lc(Fc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function fb(t,e){if((t=Object(ko.n)(t)).firestore!==e)throw new Lc(Fc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ui.c)(e,t),e.prototype.convertBytes=function(t){return new fv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zy(this.firestore,null,e)},e}(cb);function gb(t,e,n){t=Qy(t,Zy);var r=Qy(t.firestore,av),i=lb(t.converter,e,n);return vb(r,[Sv(Cv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Mh.none())])}function mb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Qy(t,Zy);var o=Qy(t.firestore,av),s=Cv(o);return vb(o,[("string"==typeof(e=Object(ko.n)(e))||e instanceof dv?jv(s,"updateDoc",t._key,e,n,r):Av(s,"updateDoc",t._key,e)).toMutation(t._key,Mh.exists(!0))])}function yb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(ko.n)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||sv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(sv(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Zy)c=Qy(t.firestore,av),l=ih(t._key.path),u={next:function(e){i[a]&&i[a](bb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Qy(t,Xy);c=Qy(f.firestore,av),l=f._query;var p=new pb(c);u={next:function(t){i[a]&&i[a](new Qv(c,p,f,t))},error:i[a+1],complete:i[a+2]},Jv(t._query)}return function(t,e,n,r){var i=this,o=new vy(r),s=new xm(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(i,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return e=Sm,[4,Ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(i,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return e=Em,[4,Ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(uv(c),l,h,u)}function vb(t,e){return function(t,e){var n=this,r=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(n,void 0,void 0,(function(){var n;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return n=Um,[4,ky(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(uv(t),e)}function bb(t,e,n){var r=n.docs.get(e._key),i=new pb(t);return new Kv(t,i,e._key,r,new Wv(n.hasPendingWrites,n.fromCache),e.converter)}var _b=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(ui.c)(e,t),e.prototype.get=function(e){var n=this,r=fb(e,this._firestore),i=new pb(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Kv(n._firestore,i,r._key,t._document,new Wv(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Cv(t)}return t.prototype.get=function(t){var e=this,n=fb(t,this._firestore),r=new hb(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Wc();var i=t[0];if(i.isFoundDocument())return new Bv(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Bv(e._firestore,r,n._key,null,n.converter);throw Wc()}))},t.prototype.set=function(t,e,n){var r=fb(t,this._firestore),i=lb(r.converter,e,n),o=Sv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=fb(t,this._firestore);return o="string"==typeof(e=Object(ko.n)(e))||e instanceof dv?jv(this._dataReader,"Transaction.update",s._key,e,n,r):Av(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=fb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function wb(){if("undefined"==typeof Uint8Array)throw new Lc(Fc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Cb(){if("undefined"==typeof atob)throw new Lc(Fc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Sb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Cb(),new t(fv.fromBase64String(e))},t.fromUint8Array=function(e){return wb(),new t(fv.fromUint8Array(e))},t.prototype.toBase64=function(){return Cb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return wb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Eb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){hv(t=Qy(t,av));var n=uv(t),r=t._freezeSettings(),i=new yy;return lv(n,i,new gy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){hv(t=Qy(t,av));var e=uv(t),n=t._freezeSettings(),r=new yy;return lv(e,r,new my(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Lc(Fc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xf;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(ui.b)(e,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ui.b)(this,void 0,void 0,(function(){return Object(ui.d)(this,(function(e){switch(e.label){case 0:return jf.yt()?[4,jf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Bp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Ob=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Py||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Hc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Qy(t,Jy))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Hc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=bg.MOCK_USER;else{s=Object(ko.i)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Lc(Fc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new bg(u)}t._credentials=new Ly(new My(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(ui.b)(e,void 0,void 0,(function(){var e,n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return[4,Ty(t)];case 1:return e=r.sent(),[4,xy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=$c(t);return e.Or.delete(0),Wg(e)}(n))]}}))}))}))}(uv(Qy(this._delegate,av)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(ui.b)(e,void 0,void 0,(function(){var e,n;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return[4,Ty(t)];case 1:return e=r.sent(),[4,xy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(ui.b)(this,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return(e=$c(t)).Or.add(0),[4,Kg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(uv(Qy(this._delegate,av)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(e,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(r){switch(r.label){case 0:return e=Km,[4,ky(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(uv(Qy(this._delegate,av)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new vy(e);return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(n,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){$c(t).Gr.add(e),e.next()},[4,Ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(n,void 0,void 0,(function(){var e;return Object(ui.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){$c(t).Gr.delete(e)},[4,Ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(uv(t=Qy(t,av)),sv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Lc(Fc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Vb(this,ev(this._delegate,t))}catch(t){throw jb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ab(this,nv(this._delegate,t))}catch(t){throw jb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Mb(this,function(t,e){if(t=Qy(t,Jy),By("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Xy(t,null,function(t){return new nh(ol.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw jb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(n,void 0,void 0,(function(){var n;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Oy(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new _y(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(uv(t),(function(n){return e(new _b(t,n))}))}(this._delegate,(function(n){return t(new Ib(e,n))}))},t.prototype.batch=function(){var t=this;return uv(this._delegate),new xb(new db(this._delegate,(function(e){return vb(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Lc(Fc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Lc(Fc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Tb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ui.c)(e,t),e.prototype.convertBytes=function(t){return new Sb(new fv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ab.eu(e,this.firestore,null)},e}(cb),Ib=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Tb(t)}return t.prototype.get=function(t){var e=this,n=Ub(t);return this._delegate.get(n).then((function(t){return new Pb(e._firestore,new Kv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Ub(t);return n?(Hy("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ub(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ui.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ub(t);return this._delegate.delete(e),this},t}(),xb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ub(t);return n?(Hy("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ub(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ui.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ub(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),kb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new $v(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Db(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Tb(e),n),i.set(n,o)),o},t}();kb.su=new WeakMap;var Ab=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Tb(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Lc(Fc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Zy(n._delegate,r,new bl(e)))},t.eu=function(e,n,r){return new t(n,new Zy(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Vb(this.firestore,ev(this._delegate,t))}catch(t){throw jb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(ko.n)(t))instanceof Zy&&rv(this._delegate,t)},t.prototype.set=function(t,e){e=Hy("DocumentReference.set",e);try{return e?gb(this._delegate,t,e):gb(this._delegate,t)}catch(t){throw jb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?mb(this._delegate,t):mb.apply(void 0,Object(ui.f)([this._delegate,t,e],n))}catch(t){throw jb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return vb(Qy((t=this._delegate).firestore,av),[new Jh(t._key,Mh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Nb(e),i=Rb(e,(function(e){return new Pb(t.firestore,new Kv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return yb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qy(t,Zy);var e=Qy(t.firestore,av),n=uv(e),r=new pb(e);return function(t,e){var n=this,r=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(n,void 0,void 0,(function(){var n;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i;return Object(ui.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=$c(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Lc(Fc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ym(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Iy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Kv(e,r,t._key,n,new Wv(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qy(t,Zy);var e=Qy(t.firestore,av);return jy(uv(e),t._key,{source:"server"}).then((function(n){return bb(e,t,n)}))}(this._delegate):function(t){t=Qy(t,Zy);var e=Qy(t.firestore,av);return jy(uv(e),t._key).then((function(n){return bb(e,t,n)}))}(this._delegate)).then((function(t){return new Pb(e.firestore,new Kv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?kb.nu(this.firestore,e):null))},t}();function jb(t,e,n){return t.message=t.message.replace(e,n),t}function Nb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sv(r))return r}return{}}function Rb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sv(t[0])?t[0]:sv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ab(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Yv(this._delegate,t._delegate)},t}(),Db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ui.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Pb),Mb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Tb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Xv(this._delegate,function(t,e,n){var r=e,i=zv("where",t);return new tb(i,r,n)}(e,n,r)))}catch(e){throw jb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Xv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=zv("orderBy",t);return new eb(r,n)}(e,n)))}catch(e){throw jb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Xv(this._delegate,function(t){return Gy("limit",t),new nb("limit",t,"F")}(e)))}catch(e){throw jb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Xv(this._delegate,function(t){return Gy("limitToLast",t),new nb("limitToLast",t,"L")}(e)))}catch(e){throw jb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw jb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw jb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ib("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw jb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ib("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw jb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return iv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qy(t,Xy);var e=Qy(t.firestore,av),n=uv(e),r=new pb(e);return function(t,e){var n=this,r=new xf;return t.asyncQueue.enqueueAndForget((function(){return Object(ui.b)(n,void 0,void 0,(function(){var n;return Object(ui.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ui.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(ui.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,rg(t,e,!0)];case 1:return a=u.sent(),r=new Rm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ym(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Iy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Qv(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qy(t,Xy);var e=Qy(t.firestore,av),n=uv(e),r=new pb(e);return Ny(n,t._query,{source:"server"}).then((function(n){return new Qv(e,r,t,n)}))}(this._delegate):function(t){t=Qy(t,Xy);var e=Qy(t.firestore,av),n=uv(e),r=new pb(e);return Jv(t._query),Ny(n,t._query).then((function(n){return new Qv(e,r,t,n)}))}(this._delegate)).then((function(t){return new Lb(e.firestore,new Qv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Nb(e),i=Rb(e,(function(e){return new Lb(t.firestore,new Qv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return yb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?kb.nu(this.firestore,e):null))},t}(),Fb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Db(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Lb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Mb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Db(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Fb(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Db(n._firestore,r))}))},t.prototype.isEqual=function(t){return Yv(this._delegate,t._delegate)},t}(),Vb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(ui.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ab(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ab(this.firestore,void 0===t?nv(this._delegate):nv(this._delegate,t))}catch(t){throw jb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Qy(t.firestore,av),r=nv(t),i=lb(t.converter,e);return vb(n,[Sv(Cv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Mh.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Ab(e.firestore,t)}))},e.prototype.isEqual=function(t){return rv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?kb.nu(this.firestore,t):null))},e}(Mb);function Ub(t){return Qy(t,Zy)}var qb,Bb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dv.bind.apply(dv,Object(ui.f)([void 0],t)))}return t.documentId=function(){return new t(al.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(ko.n)(t))instanceof dv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Hb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Tv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ev("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Iv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new kv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),zb=n("/6Yf"),Wb={Firestore:Ob,GeoPoint:gv,Timestamp:Xc,Blob:Sb,Transaction:Ib,WriteBatch:xb,DocumentReference:Ab,DocumentSnapshot:Pb,Query:Mb,QueryDocumentSnapshot:Db,QuerySnapshot:Lb,CollectionReference:Vb,FieldPath:Bb,FieldValue:Hb,setLogLevel:function(t){Vc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new zb.a("firestore",(function(t){return function(t,e){return new Ob(t,new av(t,e),new Eb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Wb)))})(qb=xo.a),qb.registerVersion("@firebase/firestore","2.4.1"),n("qgXg"),n("Ylt2"),n("tf+s");const Kb=new r.u("angularfire2.auth.use-emulator");function $b(t,e){return function(t,e=vo.a){return new It.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Qb(t,e){return $b(t,e).pipe(Object(Mt.a)(t=>({payload:t,type:"query"})))}function Gb(t,e){return Qb(t,e).pipe(ue(void 0),bo(),Object(Mt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Yb(t,e,n){return Gb(t,n).pipe(ce((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jb(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Jb(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jb(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Co(),Object(Mt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Jb(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Zb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Xb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Gb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Mt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ue(void 0),bo(),Vt(([t,e])=>e.length>0||!t),Object(Mt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ce((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zb(t);return Yb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Mt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(yt.a)(this.query.get(t)).pipe(Object(Oo.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new t_(this.ref.doc(t),this.afs)}}class t_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=s_(n,e);return new Xb(r,i,this.afs)}snapshotChanges(){return $b(this.ref,this.afs.schedulers.outsideAngular).pipe(ue(void 0),bo(),Object(Mt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Mt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(yt.a)(this.ref.get(t)).pipe(Object(Oo.b)(this.afs.schedulers.insideAngular))}}class e_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Gb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Mt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Vt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Gb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ce((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Zb(t);return Yb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Mt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(yt.a)(this.query.get(t)).pipe(Object(Oo.b)(this.afs.schedulers.insideAngular))}}const n_=new r.u("angularfire2.enableFirestorePersistence"),r_=new r.u("angularfire2.firestore.persistenceSettings"),i_=new r.u("angularfire2.firestore.settings"),o_=new r.u("angularfire2.firestore.use-emulator");function s_(t,e=(t=>t)){return{query:e(t),ref:t}}let a_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new To.d(o),this.keepUnstableUntilFirst=Object(To.h)(this.schedulers);const c=Object(To.g)(t,o,e);!Io.a.auth&&u&&Object(To.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(To.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(yt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(qb){return"undefined"!=typeof console&&console.warn(qb),Object(mt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(mt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=s_(n,e),o=this.schedulers.ngZone.run(()=>r);return new Xb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new e_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new t_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(To.c),r.Yb(To.b,8),r.Yb(n_,8),r.Yb(i_,8),r.Yb(r.I),r.Yb(r.F),r.Yb(r_,8),r.Yb(o_,8),r.Yb(Kb,8))},t.\u0275prov=r.Nb({factory:function(){return new t(r.Yb(To.c),r.Yb(To.b,8),r.Yb(n_,8),r.Yb(i_,8),r.Yb(r.I),r.Yb(r.F),r.Yb(r_,8),r.Yb(o_,8),r.Yb(Kb,8))},token:t,providedIn:"any"}),t})(),u_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:n_,useValue:!0},{provide:r_,useValue:e}]}}}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:[a_]}),t})();var c_=n("w1tV");class l_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new h_(t,this.observables,this.project))}}class h_ extends Et{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(xt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class d_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new f_(t,this.predicate))}}class f_ extends St.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function p_(t){return null==t}function g_(t){return"function"==typeof t.set}function m_(t,e){return g_(e)?e:t.ref(e)}function y_(t,e){if("string"==typeof t)return e.stringCase();if(g_(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function v_(t,e,n="on",r=vo.a){return new It.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Mt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(c_.a)())}function b_(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function __(t,e){const{payload:n,prevKey:r,key:i}=e,o=b_(t,i),s=function(t,e){if(p_(e))return 0;{const n=b_(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function w_(t){return(p_(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function C_(t,e,n){return function(t,e,n){return v_(t,"value","once",n).pipe(ee(r=>{const i=[Object(mt.a)(r)];return e.forEach(e=>i.push(v_(t,e,"on",n))),Object(gi.a)(...i).pipe(ce(__,[]))}),Co())}(t,e=w_(e),n)}function S_(t,e,n){const r=(e=w_(e)).map(e=>v_(t,e,"on",n));return Object(gi.a)(...r)}function E_(t,e){return function(n,r){return y_(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function O_(t,e){return function(){return v_(t,"value","on",e)}}n("6Uf2");const T_=new r.u("angularfire2.realtimeDatabaseURL"),I_=new r.u("angularfire2.database.use-emulator");let x_=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new To.d(i),this.keepUnstableUntilFirst=Object(To.h)(this.schedulers);const a=o,u=Object(To.g)(t,i,e);!Io.a.auth&&s&&Object(To.j)(),this.database=Object(To.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>m_(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:E_(r,"update"),set:E_(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?y_(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>C_(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>S_(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return v_(t,"value","on",e).pipe(Object(Mt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new l_(t,n))}}(e),Object(Mt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new d_(r))),Object(Mt.a)(t=>t.actions));var r}(t,S_(t,e).pipe(ce((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>C_(t,r,n).pipe(Object(Mt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>m_(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>O_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>O_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Mt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(To.c),r.Yb(To.b,8),r.Yb(T_,8),r.Yb(r.I),r.Yb(r.F),r.Yb(I_,8),r.Yb(Kb,8))},t.\u0275prov=r.Nb({factory:function(){return new t(r.Yb(To.c),r.Yb(To.b,8),r.Yb(T_,8),r.Yb(r.I),r.Yb(r.F),r.Yb(I_,8),r.Yb(Kb,8))},token:t,providedIn:"any"}),t})(),k_=(()=>{class t{constructor(t,e){this.fireService=t,this.database=e}insertAnime(t){return this.fireService.collection("animes").add({name:t})}deleteAnime(t){return Object(ui.b)(this,void 0,void 0,(function*(){this.fireService.collection("animes").doc(t).delete(),(yield this.fireService.collection("reviews").ref.where("anime","==",t).get()).forEach(t=>t.ref.delete())}))}getAnimes(){return this.fireService.collection("animes").snapshotChanges().pipe(ie(1)).pipe(Object(Mt.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}getReviews(){return this.fireService.collection("reviews").snapshotChanges().pipe(ie(1)).pipe(Object(Mt.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}addReview(t){return this.fireService.collection("reviews").add({anime:t.anime,note:t.note,rating:t.rating})}deleteReview(t){return this.fireService.collection("reviews").doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a_),r.Yb(x_))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A_=n("XoHu");function j_(t,e){return new It.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(yt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const N_=new r.u("NgValueAccessor"),R_={provide:N_,useExisting:Object(r.ab)(()=>P_),multi:!0};let P_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n))},t.\u0275dir=r.Mb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.Fb([R_])]}),t})();const D_={provide:N_,useExisting:Object(r.ab)(()=>F_),multi:!0},M_=new r.u("CompositionEventMode");let F_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n),r.Rb(M_,8))},t.\u0275dir=r.Mb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.bc("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.Fb([D_])]}),t})(),L_=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t}),t})(),V_=(()=>{class t extends L_{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return U_(e||t)},t.\u0275dir=r.Mb({type:t,features:[r.Db]}),t})();const U_=r.Wb(V_);class q_ extends L_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class B_{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let H_=(()=>{class t extends B_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(q_,2))},t.\u0275dir=r.Mb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Jb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.Db]}),t})(),z_=(()=>{class t extends B_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(V_,2))},t.\u0275dir=r.Mb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Jb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.Db]}),t})();function W_(t){return null==t||0===t.length}function K_(t){return null!=t&&"number"==typeof t.length}const $_=new r.u("NgValidators"),Q_=new r.u("NgAsyncValidators"),G_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Y_{static min(t){return e=>{if(W_(e.value)||W_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(W_(e.value)||W_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return W_(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return W_(t.value)||G_.test(t.value)?null:{email:!0}}static minLength(t){return e=>W_(e.value)||!K_(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>K_(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Y_.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(W_(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(J_);return 0==e.length?null:function(t){return X_(tw(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(J_);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Ct.a)(e))return j_(e,null);if(Object(A_.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return j_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return j_(t=1===t.length&&Object(Ct.a)(t[0])?t[0]:t,null).pipe(Object(Mt.a)(t=>e(...t)))}return j_(t,null)}(tw(t,e).map(Z_)).pipe(Object(Mt.a)(X_))}}}function J_(t){return null!=t}function Z_(t){const e=Object(r.xb)(t)?Object(yt.a)(t):t;return Object(r.wb)(e),e}function X_(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function tw(t,e){return e.map(e=>e(t))}function ew(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const nw={provide:N_,useExisting:Object(r.ab)(()=>rw),multi:!0};let rw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n))},t.\u0275dir=r.Mb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.Fb([nw])]}),t})();const iw={provide:N_,useExisting:Object(r.ab)(()=>sw),multi:!0};let ow=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),sw=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(q_),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n),r.Rb(ow),r.Rb(r.v))},t.\u0275dir=r.Mb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.Fb([iw])]}),t})();const aw={provide:N_,useExisting:Object(r.ab)(()=>uw),multi:!0};let uw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n))},t.\u0275dir=r.Mb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.Fb([aw])]}),t})();const cw={provide:N_,useExisting:Object(r.ab)(()=>hw),multi:!0};function lw(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let hw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=lw(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n))},t.\u0275dir=r.Mb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.Fb([cw])]}),t})(),dw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(lw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.n),r.Rb(r.K),r.Rb(hw,9))},t.\u0275dir=r.Mb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const fw={provide:N_,useExisting:Object(r.ab)(()=>gw),multi:!0};function pw(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let gw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.K),r.Rb(r.n))},t.\u0275dir=r.Mb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.Fb([fw])]}),t})(),mw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(pw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(pw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.n),r.Rb(r.K),r.Rb(gw,9))},t.\u0275dir=r.Mb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function yw(t,e){t.validator=Y_.compose([t.validator,e.validator]),t.asyncValidator=Y_.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&vw(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&vw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function vw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function bw(t){return null!=t?Y_.compose(ew(t)):null}function _w(t){return null!=t?Y_.composeAsync(ew(t)):null}const ww=[P_,uw,rw,hw,gw,sw],Cw="VALID",Sw="INVALID",Ew="PENDING",Ow="DISABLED";function Tw(t){return(Aw(t)?t.validators:t)||null}function Iw(t){return Array.isArray(t)?bw(t):t||null}function xw(t,e){return(Aw(e)?e.asyncValidators:t)||null}function kw(t){return Array.isArray(t)?_w(t):t||null}function Aw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class jw{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Iw(this._rawValidators),this._composedAsyncValidatorFn=kw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Cw}get invalid(){return this.status===Sw}get pending(){return this.status==Ew}get disabled(){return this.status===Ow}get enabled(){return this.status!==Ow}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Iw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=kw(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ew,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ow,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Cw,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Cw&&this.status!==Ew||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ow:Cw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ew,this._hasOwnPendingAsyncValidator=!0;const e=Z_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Rw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Pw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.p,this.statusChanges=new r.p}_calculateStatus(){return this._allControlsDisabled()?Ow:this.errors?Sw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ew)?Ew:this._anyControlsHaveStatus(Sw)?Sw:Cw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Aw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Nw extends jw{constructor(t=null,e,n){super(Tw(e),xw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Rw extends jw{constructor(t,e,n){super(Tw(e),xw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Nw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Pw extends jw{constructor(t,e,n){super(Tw(e),xw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Nw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Dw={provide:V_,useExisting:Object(r.ab)(()=>Fw)},Mw=(()=>Promise.resolve(null))();let Fw=(()=>{class t extends V_{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.p,this.form=new Rw({},bw(t),_w(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Mw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),yw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Mw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this._directives,t)})}addFormGroup(t){Mw.then(()=>{const e=this._findContainer(t.path),n=new Rw({});(function(t,e){t.validator=Y_.compose([t.validator,e.validator]),t.asyncValidator=Y_.composeAsync([t.asyncValidator,e.asyncValidator])})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Mw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Mw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($_,10),r.Rb(Q_,10))},t.\u0275dir=r.Mb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.bc("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Fb([Dw]),r.Db]}),t})();const Lw={provide:q_,useExisting:Object(r.ab)(()=>Uw)},Vw=(()=>Promise.resolve(null))();let Uw=(()=>{class t extends q_{constructor(t,e,n,i){super(),this.control=new Nw,this._registered=!1,this.update=new r.p,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===F_?n=t:(e=t,ww.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return bw(this._rawValidators)}get asyncValidator(){return _w(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Vw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Vw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(V_,9),r.Rb($_,10),r.Rb(Q_,10),r.Rb(N_,10))},t.\u0275dir=r.Mb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.Fb([Lw]),r.Db,r.Eb]}),t})(),qw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Bw={provide:$_,useExisting:Object(r.ab)(()=>Hw),multi:!0};let Hw=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Y_.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Mb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Hb("required",e.required?"":null)},inputs:{required:"required"},features:[r.Fb([Bw])]}),t})(),zw=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)}}),t})(),Ww=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:[ow],imports:[zw]}),t})();function Kw(t,e){1&t&&(r.Ub(0,"small",15),r.pc(1,"Rating is required"),r.Tb())}function $w(t,e){1&t&&(r.Ub(0,"small",15),r.pc(1,"Additional note is required"),r.Tb())}function Qw(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div"),r.Ub(1,"form",4),r.bc("ngSubmit",(function(){return r.lc(t),r.dc().rateAnime()})),r.Ub(2,"p",5),r.pc(3,"Add Review"),r.Tb(),r.Ub(4,"select",6),r.bc("ngModelChange",(function(e){return r.lc(t),r.dc().rateRequest.rating=e})),r.Ub(5,"option",7),r.pc(6,"Excellent"),r.Tb(),r.Ub(7,"option",8),r.pc(8,"Great"),r.Tb(),r.Ub(9,"option",9),r.pc(10,"Ok"),r.Tb(),r.Ub(11,"option",10),r.pc(12,"Bad"),r.Tb(),r.Ub(13,"option",11),r.pc(14,"Terrible"),r.Tb(),r.Tb(),r.oc(15,Kw,2,0,"small",12),r.Ub(16,"input",13),r.bc("ngModelChange",(function(e){return r.lc(t),r.dc().rateRequest.note=e})),r.Tb(),r.oc(17,$w,2,0,"small",12),r.Ub(18,"button",14),r.pc(19,"Add Review"),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.dc();r.Gb(4),r.ic("ngModel",t.rateRequest.rating),r.Gb(11),r.ic("ngIf",t.showErrors),r.Gb(1),r.ic("ngModel",t.rateRequest.note),r.Gb(1),r.ic("ngIf",t.showErrors)}}function Gw(t,e){1&t&&(r.Ub(0,"div",16),r.Ub(1,"p"),r.pc(2,"Adding review..."),r.Tb(),r.Sb(3,"br"),r.Sb(4,"br"),r.Tb())}let Yw=(()=>{class t{constructor(t,e){this.bsModalRef=t,this.databaseService=e,this.rateAdded=new r.p}ngOnInit(){this.rateRequest=new ci}rateAnime(){if(this.isLoading=!0,!this.rateRequest.rating||!this.rateRequest.note)return this.showErrors=!0,void(this.isLoading=!1);this.rateRequest.anime=this.animeId,this.databaseService.addReview(this.rateRequest).then(t=>{this.rateAdded.emit(!0),this.closeModal()},t=>{alert("Something went wrong"),this.isLoading=!1})}closeModal(){this.bsModalRef.hide()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(so),r.Rb(k_))},t.\u0275cmp=r.Lb({type:t,selectors:[["app-rate-modal"]],outputs:{animeId:"animeId",rateAdded:"rateAdded"},decls:6,vars:2,consts:[[1,"align-to-right"],[1,"close-modal-button",3,"click"],[4,"ngIf"],["class","flex-column",4,"ngIf"],[1,"flex-column","add-anime-form",3,"ngSubmit"],[1,"anime-title"],["name","rating","required","",1,"rating-field",3,"ngModel","ngModelChange"],["name","excellent","value","Excellent","selected",""],["name","great","value","Great"],["name","ok","value","Ok"],["name","bad","value","Bad"],["name","terrible","value","Terrible"],["class","text-error",4,"ngIf"],["type","text","name","rate-note","placeholder","Add review","required","",1,"add-anime-name-field",3,"ngModel","ngModelChange"],[1,"add-anime-button"],[1,"text-error"],[1,"flex-column"]],template:function(t,e){1&t&&(r.Ub(0,"div"),r.Ub(1,"div",0),r.Ub(2,"button",1),r.bc("click",(function(){return e.closeModal()})),r.pc(3,"X"),r.Tb(),r.Tb(),r.oc(4,Qw,20,4,"div",2),r.oc(5,Gw,5,0,"div",3),r.Tb()),2&t&&(r.Gb(4),r.ic("ngIf",!e.isLoading),r.Gb(1),r.ic("ngIf",e.isLoading))},directives:[N,qw,z_,Fw,hw,Hw,H_,Uw,dw,mw,F_],styles:[""]}),t})();class Jw{}function Zw(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div"),r.Ub(1,"div",6),r.Ub(2,"span",7),r.pc(3),r.Tb(),r.Ub(4,"button",8),r.bc("click",(function(){r.lc(t);const n=e.$implicit;return r.dc(4).removeRating(n.id)})),r.Ub(5,"strong"),r.pc(6,"X"),r.Tb(),r.Tb(),r.Ub(7,"p",9),r.pc(8),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Gb(3),r.qc(t.rating),r.Gb(5),r.qc(t.note)}}function Xw(t,e){if(1&t&&(r.Ub(0,"span"),r.oc(1,Zw,9,2,"div",1),r.Tb()),2&t){const t=r.dc().$implicit;r.Gb(1),r.ic("ngForOf",t.value.reviews)}}function tC(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div"),r.Ub(1,"div",2),r.Ub(2,"span",3),r.pc(3),r.Tb(),r.Ub(4,"button",4),r.bc("click",(function(){r.lc(t);const n=e.$implicit;return r.dc(2).showAddReviewModal(n.value.anime)})),r.pc(5,"Rate"),r.Tb(),r.Ub(6,"button",5),r.bc("click",(function(){r.lc(t);const n=e.$implicit;return r.dc(2).removeAnime(n.value.anime.id)})),r.Ub(7,"strong"),r.pc(8,"X"),r.Tb(),r.Tb(),r.Tb(),r.oc(9,Xw,2,1,"span",0),r.Sb(10,"br"),r.Tb()}if(2&t){const t=e.$implicit;r.Gb(3),r.qc(t.value.anime.name),r.Gb(6),r.ic("ngIf",t.value.reviews)}}function eC(t,e){if(1&t&&(r.Ub(0,"span"),r.oc(1,tC,11,2,"div",1),r.ec(2,"keyvalue"),r.Tb()),2&t){const t=r.dc();r.Gb(1),r.ic("ngForOf",r.fc(2,1,t.animeCardMap))}}function nC(t,e){1&t&&(r.Ub(0,"span"),r.Ub(1,"div",10),r.Ub(2,"p"),r.pc(3,"Retrieving data..."),r.Tb(),r.Tb(),r.Tb())}let rC=(()=>{class t{constructor(t,e){this.modalService=t,this.databaseService=e}ngOnInit(){this.loadDocuments()}loadDocuments(){this.dataRetrieved=!1,this.animeCardMap=new Map,this.animeCards=[],this.databaseService.getAnimes().subscribe(t=>{for(let e of t){const t=new Jw;t.anime=e,t.reviews=[],this.animeCardMap.set(e.id,t)}this.databaseService.getReviews().subscribe(t=>{if(t&&t.length>0)for(let e of t)this.animeCardMap.has(e.anime)&&this.animeCardMap.get(e.anime).reviews.push(e);this.dataRetrieved=!0})},t=>{this.dataRetrieved=!0,alert("Something went wrong")})}removeRating(t){this.databaseService.deleteReview(t),this.loadDocuments()}removeAnime(t){return Object(ui.b)(this,void 0,void 0,(function*(){yield this.databaseService.deleteAnime(t),this.loadDocuments()}))}showAddReviewModal(t){const e=this.modalService.show(Yw);e.content.animeId=t.id,e.content.rateAdded.subscribe(t=>{this.loadDocuments()})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(mo),r.Rb(k_))},t.\u0275cmp=r.Lb({type:t,selectors:[["app-anime-card"]],decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"anime-card-header"],[1,"anime-title"],[1,"rate-button",3,"click"],[1,"remove-rating-button","remove-anime-button",3,"click"],[1,"rating-card"],[1,"rating"],[1,"remove-rating-button",3,"click"],[1,"review-note"],[1,"flex-column"]],template:function(t,e){1&t&&(r.oc(0,eC,3,3,"span",0),r.oc(1,nC,4,0,"span",0)),2&t&&(r.ic("ngIf",e.dataRetrieved),r.Gb(1),r.ic("ngIf",!e.dataRetrieved))},directives:[N,A],pipes:[D],styles:[""]}),t})();function iC(t,e){1&t&&(r.Ub(0,"small",9),r.pc(1,"Anime name is required"),r.Tb())}function oC(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div"),r.Ub(1,"form",4),r.bc("ngSubmit",(function(){return r.lc(t),r.dc().addAnime()})),r.Ub(2,"p",5),r.pc(3,"Add Anime"),r.Tb(),r.Ub(4,"input",6),r.bc("ngModelChange",(function(e){return r.lc(t),r.dc().animeName=e})),r.Tb(),r.oc(5,iC,2,0,"small",7),r.Ub(6,"button",8),r.pc(7,"Add Anime"),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.dc();r.Gb(4),r.ic("ngModel",t.animeName),r.Gb(1),r.ic("ngIf",t.showErrors)}}function sC(t,e){1&t&&(r.Ub(0,"div",10),r.Ub(1,"p"),r.pc(2,"Adding anime..."),r.Tb(),r.Tb())}let aC=(()=>{class t{constructor(t,e){this.bsModalRef=t,this.databaseService=e,this.animeAdded=new r.p}ngOnInit(){}closeModal(){this.bsModalRef.hide()}addAnime(){this.animeName?(this.isLoading=!0,this.databaseService.insertAnime(this.animeName).then(t=>{this.animeAdded.emit(!0),this.closeModal()},t=>{alert("Something went wrong"),this.isLoading=!1})):this.showErrors=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(so),r.Rb(k_))},t.\u0275cmp=r.Lb({type:t,selectors:[["app-add-anime"]],outputs:{animeAdded:"animeAdded"},decls:8,vars:2,consts:[[1,"align-to-right"],[1,"close-modal-button",3,"click"],[4,"ngIf"],["class","flex-column",4,"ngIf"],[1,"flex-column","add-anime-form",3,"ngSubmit"],[1,"anime-title"],["type","text","name","anime-name","placeholder","Add anime","required","",1,"add-anime-name-field",3,"ngModel","ngModelChange"],["class","text-error",4,"ngIf"],[1,"add-anime-button"],[1,"text-error"],[1,"flex-column"]],template:function(t,e){1&t&&(r.Ub(0,"div"),r.Ub(1,"div",0),r.Ub(2,"button",1),r.bc("click",(function(){return e.closeModal()})),r.pc(3,"X"),r.Tb(),r.Tb(),r.oc(4,oC,8,2,"div",2),r.oc(5,sC,3,0,"div",3),r.Sb(6,"br"),r.Sb(7,"br"),r.Tb()),2&t&&(r.Gb(4),r.ic("ngIf",!e.isLoading),r.Gb(1),r.ic("ngIf",e.isLoading))},directives:[N,qw,z_,Fw,F_,Hw,H_,Uw],styles:[""]}),t})(),uC=(()=>{class t{constructor(t){this.modalService=t,this.title="anime-reviews"}showAddAnimeModal(){this.modalService.show(aC).content.animeAdded.subscribe(t=>{this.animeCard.loadDocuments()})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(mo))},t.\u0275cmp=r.Lb({type:t,selectors:[["app-root"]],viewQuery:function(t,e){var n;1&t&&r.rc(rC,!0),2&t&&r.jc(n=r.cc())&&(e.animeCard=n.first)},decls:9,vars:0,consts:[[1,"page-container"],[1,"content"],[1,"page-header","flex-row"],[1,"title"],[1,"add-anime-button",3,"click"],[1,"anime-list"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"h1",3),r.pc(4,"Anime Reviews"),r.Tb(),r.Ub(5,"button",4),r.bc("click",(function(){return e.showAddAnimeModal()})),r.pc(6,"+ Add Anime"),r.Tb(),r.Tb(),r.Ub(7,"div",5),r.Sb(8,"app-anime-card"),r.Tb(),r.Tb(),r.Tb())},directives:[rC],styles:[""]}),t})();class cC{}const lC="*";function hC(t,e=null){return{type:2,steps:t,options:e}}function dC(t){return{type:6,styles:t,offset:null}}function fC(t){Promise.resolve(null).then(t)}class pC{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fC(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class gC{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?fC(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function mC(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yC(t){switch(t.length){case 0:return new pC;case 1:return t[0];default:return new gC(t)}}function vC(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case lC:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function bC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&_C(n,"start",t)));break;case"done":t.onDone(()=>r(n&&_C(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&_C(n,"destroy",t)))}}function _C(t,e,n){const r=n.totalTime,i=wC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function wC(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function CC(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function SC(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let EC=(t,e)=>!1,OC=(t,e)=>!1,TC=(t,e,n)=>[];const IC=mC();(IC||"undefined"!=typeof Element)&&(EC=(t,e)=>t.contains(e),OC=(()=>{if(IC||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):OC}})(),TC=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let xC=null,kC=!1;function AC(t){xC||(xC=("undefined"!=typeof document?document.body:null)||{},kC=!!xC.style&&"WebkitAppearance"in xC.style);let e=!0;return xC.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in xC.style,!e&&kC)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in xC.style),e}const jC=OC,NC=EC,RC=TC;function PC(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let DC=(()=>{class t{validateStyleProperty(t){return AC(t)}matchesElement(t,e){return jC(t,e)}containsElement(t,e){return NC(t,e)}query(t,e,n){return RC(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new pC(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})(),MC=(()=>{class t{}return t.NOOP=new DC,t})();const FC="ng-enter",LC="ng-leave",VC="ng-trigger",UC=".ng-trigger",qC="ng-animating",BC=".ng-animating";function HC(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:zC(parseFloat(e[1]),e[2])}function zC(t,e){switch(e){case"s":return 1e3*t;default:return t}}function WC(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=zC(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=zC(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function KC(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function $C(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else KC(t,n);return n}function QC(t,e,n){return n?e+":"+n+";":""}function GC(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=QC(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=QC(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function YC(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=iS(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),mC()&&GC(t))}function JC(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=iS(e);t.style[n]=""}),mC()&&GC(t))}function ZC(t){return Array.isArray(t)?1==t.length?t[0]:hC(t):t}const XC=new RegExp("{{\\s*(.+?)\\s*}}","g");function tS(t){let e=[];if("string"==typeof t){let n;for(;n=XC.exec(t);)e.push(n[1]);XC.lastIndex=0}return e}function eS(t,e,n){const r=t.toString(),i=r.replace(XC,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function nS(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const rS=/-+([a-z0-9])/g;function iS(t){return t.replace(rS,(...t)=>t[1].toUpperCase())}function oS(t,e){return 0===t||0===e}function sS(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=uS(t,e)}))}}return e}function aS(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function uS(t,e){return window.getComputedStyle(t)[e]}const cS="*";function lS(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(fS(i,s)),"<"!=o[0]||i==cS&&s==cS||e.push(fS(s,i))}(t,n,e)):n.push(t),n}const hS=new Set(["true","1"]),dS=new Set(["false","0"]);function fS(t,e){const n=hS.has(t)||dS.has(t),r=hS.has(e)||dS.has(e);return(i,o)=>{let s=t==cS||t==i,a=e==cS||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?hS.has(t):dS.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?hS.has(e):dS.has(e)),s&&a}}const pS=new RegExp("s*:selfs*,?","g");function gS(t,e,n){return new mS(t).build(e,n)}class mS{constructor(t){this._driver=t}build(t,e){const n=new yS(e);return this._resetContextStyleTimingState(n),aS(this,ZC(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(vS(t)){const e=t;Object.keys(e).forEach(t=>{tS(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=nS(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=aS(this,ZC(t.animation),e);return{type:1,matchers:lS(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:bS(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>aS(this,t,e)),options:bS(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=aS(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:bS(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return _S(WC(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=_S(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||WC(r,e),_S(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:dC({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=dC(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==lC?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(vS(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=tS(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(vS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(vS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:aS(this,ZC(t.animation),e),options:bS(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:bS(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:bS(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(pS,"")),[t=t.replace(/@\*/g,UC).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,BC),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,CC(e.collectedStyles,e.currentQuerySelector,{});const s=aS(this,ZC(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:bS(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:WC(t.timings,e.errors,!0);return{type:12,animation:aS(this,ZC(t.animation),e),timings:n,options:null}}}class yS{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function vS(t){return!Array.isArray(t)&&"object"==typeof t}function bS(t){var e;return t?(t=KC(t)).params&&(t.params=(e=t.params)?KC(e):null):t={},t}function _S(t,e,n){return{duration:t,delay:e,easing:n}}function wS(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class CS{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const SS=new RegExp(":enter","g"),ES=new RegExp(":leave","g");function OS(t,e,n,r,i,o={},s={},a,u,c=[]){return(new TS).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class TS{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new CS;const l=new xS(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),aS(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[wS(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?HC(n.duration):null,o=null!=n.delay?HC(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),aS(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=IS);const t=HC(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>aS(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?HC(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),aS(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return WC(e.params?eS(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?HC(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=IS);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),aS(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;aS(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const IS={};class xS{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=IS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new kS(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=HC(n.duration)),null!=n.delay&&(r.delay=HC(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=eS(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new xS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=IS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new AS(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(SS,"."+this._enterClassName)).replace(ES,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class kS{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new kS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||lC,this._currentKeyframe[t]=lC}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=lC})):$C(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=eS(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:lC),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=$C(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==lC&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?nS(t.values()):[],o=e.size?nS(e.values()):[];if(n){const t=r[0],e=KC(t);t.offset=0,e.offset=1,r=[t,e]}return wS(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class AS extends kS{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=$C(t[0],!1);a.offset=0,i.push(a);const u=$C(t[0],!1);u.offset=jS(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=$C(t[r],!1);s.offset=jS((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return wS(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function jS(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class NS{}class RS extends NS{normalizePropertyName(t,e){return iS(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(PS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const PS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function DS(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const MS={};class FS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||MS,d=this.buildStyles(n,s&&s.params||MS,l),f=a&&a.params||MS,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:OS(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return DS(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=CC(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=CC(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const C=nS(g.values());return DS(e,this._triggerName,n,r,v,d,p,_,C,m,y,w)}}class LS{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=KC(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=eS(o,r,e)),n[t]=o})}}),n}}class VS{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new LS(t.style,t.options&&t.options.params||{})}),US(this.states,"true","1"),US(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new FS(t,e,this.states))}),this.fallbackTransition=new FS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function US(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const qS=new CS;class BS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=gS(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=vC(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=OS(this._driver,e,i,FC,LC,{},{},n,qS,r),o.forEach(t=>{const e=CC(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,lC)})});const a=yC(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=wC(e,"","","");return bC(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const HS="ng-animate-queued",zS="ng-animate-disabled",WS=".ng-animate-disabled",KS=[],$S={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class GS{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=KC(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const YS="void",JS=new GS(YS);class ZS{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,oE(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=CC(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=CC(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(oE(t,VC),oE(t,"ng-trigger-"+e),a[e]=JS),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new tE(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(oE(t,VC),oE(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new GS(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=JS),u.value!==YS&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{JC(t,n),YC(t,r)})}return}const c=CC(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(oE(t,HS),o.onStart(()=>{sE(t,HS)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,UC,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,YS,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&yC(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||JS,s=new GS(YS),a=new tE(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==$S||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){oE(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=wC(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,bC(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class XS{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new ZS(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(eE(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!eE(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),oE(t,zS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),sE(t,zS))}removeNode(t,e,n,r){if(eE(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return eE(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,UC,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,BC,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return yC(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=$S,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,WS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,WS,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)oE(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?yC(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new CS,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=iE(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=FC+p++;f.set(e,n),t.forEach(t=>oE(t,n))});const g=[],m=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=iE(h,Array.from(m));b.forEach((t,e)=>{const n=LC+p++;v.set(e,n),t.forEach(t=>oE(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>sE(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>sE(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>JC(i,p.fromStyles)),e.onDestroy(()=>YC(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>JC(i,p.fromStyles)),e.onDestroy(()=>YC(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>CC(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{CC(C,e,[]).push(t),t.destroy()})});const E=g.filter(t=>uE(t,a,u)),O=new Map;rE(O,this.driver,y,u,lC).forEach(t=>{uE(t,a,u)&&E.push(t)});const T=new Map;d.forEach((t,e)=>{rE(T,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=O.get(t),n=T.get(t);O.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>YC(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,T,O);if(o.setRealPlayer(n),t===k)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=yC(e)),r.push(o)}}else JC(e,s.fromStyles),o.onDestroy(()=>YC(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=yC(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if(sE(t,LC),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,BC,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?aE(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==YS;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=CC(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}JC(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new pC(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof gC?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||KS).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=vC(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new tE(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{CC(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>oE(t,qC));const d=yC(h);return d.onDestroy(()=>{c.forEach(t=>sE(t,qC)),YC(a,e.toStyles)}),l.forEach(t=>{CC(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new pC(t.duration,t.delay)}}class tE{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new pC,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>bC(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){CC(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function eE(t){return t&&1===t.nodeType}function nE(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function rE(t,e,n,r,i){const o=[];n.forEach(t=>o.push(nE(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=QS,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>nE(t,o[a++])),s}function iE(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function oE(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function sE(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function aE(t,e,n){yC(n).onDone(()=>t.processLeaveNode(e))}function uE(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class cE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new XS(t,e,n),this._timelineEngine=new BS(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=gS(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new VS(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=SC(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=SC(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function lE(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=dE(e[0]),e.length>1&&(r=dE(e[e.length-1]))):e&&(n=dE(e)),n||r?new hE(t,n,r):null}let hE=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&YC(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(YC(this._element,this._initialStyles),this._endStyles&&(YC(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(JC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(JC(this._element,this._endStyles),this._endStyles=null),YC(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function dE(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];fE(i)&&(e=e||{},e[i]=t[i])}return e}function fE(t){return"display"===t||"position"===t}const pE="animation",gE="animationend";class mE{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=CE(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),wE(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),_E(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){yE(this._element,this._name,"paused")}resume(){yE(this._element,this._name,"running")}setPosition(t){const e=vE(this._element,this._name);this._position=t*this._duration,wE(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),_E(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=CE(t,"").split(","),r=bE(n,e);r>=0&&(n.splice(r,1),wE(t,"",n.join(",")))}(this._element,this._name))}}function yE(t,e,n){wE(t,"PlayState",n,vE(t,e))}function vE(t,e){const n=CE(t,"");return n.indexOf(",")>0?bE(n.split(","),e):bE([n],e)}function bE(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function _E(t,e,n){n?t.removeEventListener(gE,e):t.addEventListener(gE,e)}function wE(t,e,n,r){const i=pE+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function CE(t,e){return t.style[pE+e]}class SE{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new mE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:uS(this.element,n))})}this.currentSnapshot=t}}class EE extends pC{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=PC(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class OE{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return AC(t)}matchesElement(t,e){return jC(t,e)}containsElement(t,e){return NC(t,e)}query(t,e,n){return RC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>PC(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof SE),u={};oS(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=sS(t,e,u));if(0==n)return new EE(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=lE(t,e),f=new SE(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class TE{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:uS(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class IE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(xE().toString()),this._cssKeyframesDriver=new OE}validateStyleProperty(t){return AC(t)}matchesElement(t,e){return jC(t,e)}containsElement(t,e){return NC(t,e)}query(t,e,n){return RC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof TE);oS(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=lE(t,e=sS(t,e=e.map(t=>$C(t,!1)),u));return new TE(t,e,a,l)}}function xE(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let kE=(()=>{class t extends cC{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.X.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?hC(t):t;return NE(this._renderer,null,e,"register",[n]),new AE(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.L),r.Yb(a))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();class AE extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new jE(this._id,t,e||{},this._renderer)}}class jE{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return NE(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function NE(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const RE="@",PE="@.disabled";let DE=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new ME("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new FE(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.L),r.Yb(cE),r.Yb(r.F))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();class ME{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==RE&&e==PE?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class FE extends ME{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==RE?"."==e.charAt(1)&&e==PE?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==RE){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=RE&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let LE=(()=>{class t extends cE{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(MC),r.Yb(NS))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac}),t})();const VE=[{provide:MC,useFactory:function(){return"function"==typeof xE()?new IE:new OE}},{provide:new r.u("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:cC,useClass:kE},{provide:NS,useFactory:function(){return new RS}},{provide:cE,useClass:LE},{provide:r.L,useFactory:function(t,e,n){return new DE(t,e,n)},deps:[nt,cE,r.F]}];let UE=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:VE,imports:[gt]}),t})(),qE=(()=>{class t{}return t.\u0275mod=r.Pb({type:t,bootstrap:[uC]}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},providers:[],imports:[[gt,ai,yo.forRoot(),gt,UE,Ww,F,u_,To.a.initializeApp(i)]]}),t})();ft().bootstrapModule(qE).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);